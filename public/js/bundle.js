"use strict";angular.module("sampleApp",["ui.router","ui.bootstrap","appRoutes","dndLists","AppCtrl","MainCtrl","TravelerCtrl","SearchTravelerCtrl","FormGenCtrl.js","TravelerService","FormService","DocNumService","CounterService"]),angular.module("appRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"views/home.html",controller:"MainController"}).state("traveler",{url:"/traveler?_id&formId",views:{"":{templateUrl:"views/traveler.html",controller:"TravelerController"},"formReview@traveler":{templateUrl:"views/formReview.html"}}}).state("searchTraveler",{url:"/searchTraveler",views:{"":{templateUrl:"views/searchTraveler.html",controller:"SearchTravelerController"},"formReview@searchTraveler":{templateUrl:"views/formReview.html"}}}).state("formGenerator",{url:"/formGenerator",views:{"":{templateUrl:"views/formGeneratorNav.html",controller:"FormGeneratorController"},"templateGenerator@formGenerator":{templateUrl:"views/templateGenerator.html",controller:"FormGeneratorController"},"templateCreator@formGenerator":{templateUrl:"views/templateCreator.html",controller:"FormGeneratorController"}}}),r.html5Mode(!0)}]),angular.module("AppCtrl",["ngAnimate"]).controller("AppController",["$scope",function(e){e.isCollapsed=!0}]),angular.module("FormGenCtrl.js",["ui.bootstrap.tabs"]).controller("FormGeneratorController",["$scope","Form",function(e,t){e.submit=function(r){r&&""!==r||(r=prompt("password")),"QQmore"===r?t.create(e.template).success(function(t){alert("add"),e.create=t,delete e.template}):alert("go home son")},e.save=function(){var r=prompt("password");"QQmore"===r?e.create._id?t.save(e.create).success(function(e){alert("save")}):(e.template=e.create,e.submit(r)):alert("go home")},e["delete"]=function(){var a=prompt("password");"QQmore"===a?confirm("delete template?")&&(e.create._id&&t["delete"](e.create._id).success(function(e){alert("removed")}),r()):alert("go home")},e.setSelectTab=function(t){e.selectTab=t},e.addItemRecord=function(){if(e.inputItemRecord&&""!==e.inputItemRecord){e.create.itemRecord||(e.create.itemRecord=[]);var t=e.create.itemRecord.length,r={id:t+1,Description:e.inputItemRecord};if("select"===e.inputItemRecordType){var a=e.selectOptions;a=a.split(",");for(var o=0;o<a.length;o++)a[o]=a[o].trim();a=Array.from(new Set(a)),r.select={name:""},r.select.options=a}e.create.itemRecord.push(r),e.inputItemRecord=""}},e.addStep=function(){e.create.steps||(e.create.steps=[]);var t=e.create.steps.length,r={step:t+1,type:e.inputStepType||"",Description:e.inputStepDes||""};e.create.steps.push(r),e.inputStepDes=""},e.addSubStep=function(){if(e.tempSub.inputSubStepDes&&""!==e.tempSub.inputSubStepDes){var t=e.tempSub.selectStepForSubStep;e.create.steps[t].list||(e.create.steps[t].list=[]);var r=e.create.steps[t].list.length,a={sub_step:r+1,Description:e.tempSub.inputSubStepDes};e.create.steps[t].list.push(a),e.tempSub.inputSubStepDes=""}},e.addSubOption=function(){for(var t=e.tempSubOption.selectSubForOption.split(",")[0],r=e.tempSubOption.selectSubForOption.split(",")[1],a=e.tempSubOption.subOptions.selectSubOption,o=e.tempSubOption.subOptions.option.input.split(","),n=0;n<o.length;n++)o[n]=o[n].trim();o=Array.from(new Set(o));var c={type:a,name:e.tempSubOption.subOptions.option.name,options:o};e.create.steps[t].list[r].options||(e.create.steps[t].list[r].options=[]),e.create.steps[t].list[r].options.push(c),e.tempSubOption.subOptions.option.name="",e.tempSubOption.subOptions.option.input=""},e.modifyID=function(e,t){for(var r=0;r<e.length;r++)"itemRecord"===t&&(e[r].id=r+1),"steps"===t&&(e[r].step=r+1),"sub_step"===t&&(e[r].sub_step=r+1)},e.editOption=function(e,t){if(e){e.options=[],"string"==typeof t&&(t=t.split(","));for(var r=0;r<t.length;r++)e.options[r]=t[r].trim();e.options=Array.from(new Set(e.options))}},e.updateForm=function(){e.travelerData={},e.formId&&t.get(e.formId).success(function(t){e.create=t})};var r=function(){e.create={},e.create.isPublish=!1},a=function(){t.getFormList().success(function(t){e.formList=t})},o=function(){r(),a(),e.inputItemRecordType="text",e.jsonView=!1};o()}]),angular.module("MainCtrl",[]).controller("MainController",["$scope",function(e){e.tagline="to the moon and back!"}]),angular.module("SearchTravelerCtrl",["chart.js"]).controller("SearchTravelerController",["$scope","Traveler",function(e,t){e.search=function(){if(e.currentInput=e.searchInput,e.isSearch=!0,e.searchInput)if("sn"===e.searchOption){e.searchInput.toString();t.searchLike(e.searchInput).success(function(t){e.result=t,a()})}else t.normalSearch(e.searchOption,e.searchInput).success(function(t){e.result=t,a()})},e.editTraveler=function(e,t){window.open("traveler?_id="+e+"&formId="+t,"_blank")},e.removeTraveler=function(r,a){var o={idList:[r]};t.removeTraveler(o).success(function(t){e.result.splice(a,1)})},e.timeSpend=function(t){if(t.reviewAt){var a=Math.round((new Date(t.reviewAt)-new Date(t.createAt))/1e3);return e.totalTimeSpand+=a,r(a)}var o=Math.round((new Date-new Date(t.createAt))/1e3);return e.totalTimeSpand+=o,r(o)},e.totalTimeSpend=function(){return 5};var r=function(e){return Math.floor(e/60/60)+" Hours and "+Math.floor(e/60)%60+" min and "+e%60+" sec"},a=function(){e.stat={},e.pieLabels1=[],e.pieData1=[];for(var t=e.result,r=0;r<t.length;r++)t[r].status in e.stat?e.stat[t[r].status]+=1:(e.pieLabels1.push(t[r].status),e.stat[t[r].status]=1);e.stat.total=t.length;var a=0,o=0;e.stat.REJECT&&(a=e.stat.REJECT),e.stat.COMPLETED&&(o=e.stat.COMPLETED),e.stat.pecComplete=((o+a)/t.length*100).toFixed(2),e.stat.REJECT/t.length*100?e.stat.pecReject=(a/t.length*100).toFixed(2):e.stat.pecReject=0;for(var n=0;n<e.pieLabels1.length;n++)e.pieData1.push(e.stat[e.pieLabels1[n]]);e.pieLabels2=["Finish","Hold"],e.pieData2=[o+a,e.stat.total-(o+a)]},o=function(){e.isSearch=!1,e.searchOption="docNum",e.sortType="createAt",e.sortReverse=!1,e.travelerData={},e.totalTimeSpand=0},n=function(){o()};n()}]),angular.module("TravelerCtrl",[]).filter("unique",function(){return function(e,t){var r=[],a=[];return angular.forEach(e,function(e){var o=e[t];-1===a.indexOf(o)&&(a.push(o),r.push(e))}),r}}).controller("TravelerController",["$scope","Traveler","Form","DocNum","Counter","$stateParams",function(e,t,r,a,o,n){e.checkReadyReview=function(){e.travelerData.status&&"PANDING FOR REVIEW"===e.travelerData.status?(e.travelerData.status="OPEN",e.travelerData.readyReview=!1):(e.travelerData.status="PANDING FOR REVIEW",e.travelerData.readyReview=!0),e.save()},e.updateForm=function(){e.travelerData={},e.formId&&r.get(e.formId).success(function(t){e.forms=t,e.lastStep=t.steps.length,e.travelerData.formId=t._id,e.travelerData.formRev=t.formRev,e.travelerData.formNo=t.formNo,e.travelerData.customer=t.customer,e.travelerData.status="OPEN",f(t._id,function(){})})},e.updateDocNum=function(){e.selectSNList=[],e.isWorkFind=!1,e.docNum.docNumData=e.docNum.docNumSelectList[e.docNum.docNumSelect],"new"!==e.docNum.docNumSelect?(l(),i(e.docNum.docNumData._id)):delete e.travelerData.itemRecord},e.nextStep=function(){var t=e.forms.steps[e.currentStep-1];t.list.length>=e.currentSubStep+1?e.currentSubStep+=1:(e.currentStep+=1,e.currentSubStep=1,e.currentStep>e.lastStep&&e.checkReadyReview())},e.statusPage=function(t){e.currentSubStep=1,e.currentStep=t},e.statusSubPage=function(t){e.currentSubStep=t},e.goBack=function(){e.currentStep=1,e.currentSubStep=1,e.checkReadyReview()},e.save=function(r){for(var a=[],o=0;o<e.selectSNList.length;o++)a.push(e.selectSNList[o]._id);var n={idList:a,travelerData:e.travelerData};delete n.travelerData.sn,t.updateMultiple(n).success(function(e){r&&r(e)})},e.review=function(t){e.travelerData.reviewBy?("reject"===t?e.travelerData.status="REJECT":"complete"===t&&(e.travelerData.status="COMPLETED"),e.travelerData.reviewAt=new Date,e.save()):(e.closeAlert(0,"clear"),e.addAlert("warning","Enter Reviewer Name"))},e.submit=function(){e.username&&e.travelerData.sn?(e.travelerData.created=!0,e.travelerData.createdBy=e.username,e.travelerData.createAt=new Date,t.create(e.travelerData).success(function(t){e.travelerData=t,alert("submit complete"),u()})):alert("enter your name or serial number plz ")},e["new"]=function(){p()},e["delete"]=function(){if(e.selectSNList&&confirm("delete?")){for(var r=[],a=0;a<e.selectSNList.length;a++)r.push(e.selectSNList[a]._id);var o={idList:r};t.removeTraveler(o).success(function(e){p()})}},e.appendSubStepEditInfo=function(){var t=e.username;if(""!==t){var r=e.currentStep,a=e.currentSubStep;return e.travelerData.step[r][a].editBy=t,e.travelerData.step[r][a].editTime=new Date,!0}return e.closeAlert(0,"clear"),e.addAlert("warning","Enter your Name"),!1},e.printTraveler=function(){window.print()},e.saveDocNum=function(){e.docNum.docNumData.formId=e.travelerData.formId,e.docNum.docNumData.formRev=e.travelerData.formRev,e.docNum.docNumData.formNo=e.travelerData.formNo,m("create"),delete e.docNum.docNumData._id,a.create(e.docNum.docNumData).success(function(t){f(e.travelerData.formId,function(r){for(var a=0;a<r.length;a++)r[a]._id===t._id&&(e.docNum.docNumData=t,e.docNum.docNumSelect=a.toString(),e.travelerData.itemRecord={docNum:e.docNum.docNumData.docNum})})})},e.editDocNum=function(){a.editDocNumData(e.docNum.docNumData).success(function(t){f(e.travelerData.formId,function(){})})},e.checkForSN=function(r){r&&(e.isSNExistMoreThanOne=!1,t.normalSearch("sn|formId",r+"|"+e.formId,"sn").success(function(t){if(t.length>0&&(e.isSNExistMoreThanOne=!0,confirm("SN already exist. do you want to create a new traveler with same sn?")&&(e.isSNExistMoreThanOne=!1)),!e.isSNExistMoreThanOne){e.isSNExistMoreThanOne=!1;var a={sn:r,status:"OPEN",createAt:new Date,itemRecord:{docNumId:e.docNum.docNumData._id,docNum:e.docNum.docNumData.docNum}};s(a),r="",a={}}}))},e.moveToSelectSNList=function(){for(var t=[],r=e.SNListForDocNum.length;r>0;r--){var a=e.SNListForDocNum.pop();a.checkbox===!0?(a.checkbox=!1,e.selectSNList.push(a)):t.push(a)}e.SNListForDocNum=t,t=null},e.moveToSNListForDocNum=function(){for(var t=[],r=e.selectSNList.length;r>0;r--){var a=e.selectSNList.pop();a.checkbox===!0?(a.checkbox=!1,e.SNListForDocNum.push(a)):t.push(a)}e.selectSNList=t,t=null},e.selectAllList=function(e){for(var t=e[0].checkbox,r=0;r<e.length;r++)e[r].checkbox=!t},e.loadTraveler=function(r){r&&(e.selectSN=r),t.normalSearch("_id",e.selectSN).success(function(t){e.travelerData=t[0]})},e.searchSN=function(r){r&&(e.searchSNList=[],e.clearAfterChangeTab(),e.selectSNList=[],t.normalSearch("sn|formId",r+"|"+e.formId,"sn|createAt|status").success(function(t){e.isSNExist=!0,e.isSNMoreThanOne=!1,t.length>1?(e.isSNMoreThanOne=!0,e.searchSNList=t):1==t.length?(e.selectSNList.push({_id:t[0]._id,sn:t[0].sn}),e.selectSN=t[0]._id,e.loadTraveler(),v(t[0].formId)):e.isSNExist=!1}))},e.setTravelerData=function(t){e.selectSNList=[],e.selectSNList.push({_id:e.searchSNList[t]._id,sn:e.searchSNList[t].sn}),e.selectSN=e.searchSNList[t]._id,e.loadTraveler(),v()},e.createWork=function(){e.selectSNList.length>0&&o.nextSequenceValue({name:"workNum"}).success(function(t){t?(e.closeAlert(0,"clear"),e.addAlert("info","Group number "+t.sequence_value+" created"),e.travelerData.workNum=t.sequence_value.toString(),l(),e.save(),e.searchWorkNum(t.sequence_value)):o.create({name:"workNum",sequence_value:0}).success(function(t){e.createWork()})})},e.searchWorkNum=function(r){e.isWorkFind=!1,e.clearAfterChangeTab(),t.normalSearch("workNum",r,"sn|createAt|status|workNum|formId|itemRecord.docNumId|itemRecord.docNum").success(function(a){e.selectSNList=a,a.length>0&&(e.isWorkFind=!0,e.travelerData.itemRecord={docNumId:a[0].itemRecord.docNumId,docNum:a[0].itemRecord.docNum},v(a[0].formId),t.normalSearch("itemRecord.docNumId",a[0].itemRecord.docNumId,"sn|workNum|status|createAt").success(function(t){if(t.length>0)for(var a=0;a<t.length;a++)t[a].workNum&&t[a].workNum===r.toString()||e.SNListForDocNum.push(t[a])}))})},e.clearAfterChangeTab=function(){e.selectSNList=[],e.SNListForDocNum=[],e.isStartWork=!1,e.isWorkFind=!1,e.docNum.docNumSelect="new",e.docNum.docNumData={},e.travelerData.created=!1},e.createTraveler=function(t){e.isSNExist=!1,"new"===e.docNum.docNumSelect?(e.closeAlert(0,"clear"),e.addAlert("warning","Select a Document Number"),e.isCollapsedItemRecord=!1):!function(){var r=!0;c(t,function(a){if(a&&(e.isSNExist=!0,confirm("Same Serial number already exist in the database. Create a new Traveler with same Serial Number?")||(r=!1)),r){var o={sn:t,status:"OPEN",createAt:new Date};s(o,function(t){e.closeAlert(0,"clear"),e.isCollapsedItemRecord=!0,e.selectSNList=[],e.selectSNList.push({_id:t._id,sn:t.sn}),l(),e.save(),e.isSNExist=!1})}})}()},e.startWork=function(){e.isStartWork=!0,e.topCollapse=!0},e.addAlert=function(t,r){e.alerts.push({type:t,msg:r})},e.closeAlert=function(t,r){"clear"===r?e.alerts=[]:e.alerts.splice(t,1)};var c=function(r,a){e.isSNExist=!1,t.normalSearch("sn|formId",r+"|"+e.formId,"sn").success(function(t){t.length>0&&(e.isSNExist=!0),a(e.isSNExist)})},s=function(r,a){e.username&&(delete e.travelerData._id,delete e.travelerData.step,delete e.travelerData.workNum,e.travelerData.sn=r.sn,e.travelerData.itemRecord=r.itemRecord,e.travelerData.created=!0,e.travelerData.createdBy=e.username,e.travelerData.createAt=r.createAt,t.create(e.travelerData).success(function(t){r._id=t._id,e.SNListForDocNum.push(r),a&&a(t)}))},i=function(r){t.normalSearch("itemRecord.docNumId",r,"sn|status|createAt|workNum").success(function(t){e.SNListForDocNum=t})},u=function(){e.travelerData.sn&&e.travelerData.itemRecord.docNum&&(e.topCollapse=!0)},l=function(){e.travelerData.itemRecord={docNumId:e.docNum.docNumData._id,docNum:e.docNum.docNumData.docNum}},m=function(t){var r=1;if("create"===t)for(var a=0;a<e.docNum.docNumSelectList.length;a++)e.docNum.docNumSelectList[a].docNum===e.docNum.docNumData.docNum&&(r+=1);e.docNum.docNumData.label=r},d=function(){r.getFormList().success(function(t){e.formList=t})},p=function(){e.travelerData={},e.currentStep=1,e.currentSubStep=1,e.travelerData.readyReview=!1,e.formId="",e.isNew=!0},f=function(t,r){a.getDocNumList(t).success(function(t){e.docNum.docNumSelectList=t,r(t)})},v=function(t){t||(t=e.travelerData.formId),a.getDocNumList(t).success(function(t){for(var r=0;r<t.length;r++)if(t[r]._id===e.travelerData.itemRecord.docNumId){e.docNum.docNumData=t[r],e.docNum.docNumSelect=r.toString();break}})},N=function(){e.topCollapse=!1,e.username="John Snow",e.docNum={},e.isSNExist=!0,e.isSNExistMoreThanOne=!1,e.isSNMoreThanOne=!1,e.searchSNList=[],e.selectSN="",e.SNListForDocNum=[],e.selectSNList=[],e.isUseWorkNum=!1,e.isStartWork=!1,e.selectSearchSN="0",e.isWorkFind=!1,e.input={},e.isCollapsed=!0,e.isCollapseHeaderSNList=!0,e.isSearchClick=!0,e.isCollapsedItemRecord=!0,e.alerts=[]},S=function(){N(),p(),d(),n.formId&&(e.formId=n.formId,e.updateForm(),e.isNew=!1),n._id&&(e.isNew=!1,t.get("_id",n._id).success(function(t){e.travelerData=t,v(t.formId),u(),e.selectSNList.push({_id:t._id,sn:t.sn}),e.isStartWork=!0}))};S()}]),angular.module("CounterService",[]).factory("Counter",["$http",function(e){return{nextSequenceValue:function(t){return e.post("api/counter/nextSequenceValue/",t)},create:function(t){return e.post("api/counter/create",t)}}}]),angular.module("DocNumService",[]).factory("DocNum",["$http",function(e){return{getDocNumList:function(t){return e.get("/api/docNums/"+t)},create:function(t){return e.post("/api/docNums/",t)},editDocNumData:function(t){return e.put("/api/docNums/",t)},getDocNum:function(t,r){return console.log("d service"),e.get("/api/docNums/searchSingle?type="+t+"&data="+r)}}}]),angular.module("FormService",[]).factory("Form",["$http",function(e){return{create:function(t){return e.post("/api/forms",t)},getAll:function(){return e.get("/api/forms/")},getFormList:function(){return e.get("/api/forms/formList")},get:function(t){return e.get("/api/forms/search/"+t)},save:function(t){return e.put("/api/forms",t)},"delete":function(t){return e["delete"]("/api/forms/"+t)}}}]),angular.module("TravelerService",[]).factory("Traveler",["$http",function(e){var t={};return{create:function(t){return e.post("/api/traveler",t)},getReviewData:function(){return t},get:function(t,r){return e.get("/api/traveler?type="+t+"&data="+r)},save:function(t){return e.put("/api/traveler",t)},setReviewData:function(e){t=e},searchLike:function(t){return e.get("/api/traveler/searchLike/"+t)},removeTraveler:function(t){return e.post("/api/traveler/deleteTraveler",t)},normalSearch:function(t,r,a){return a||(a=""),e.get("/api/traveler/normalSearch?type="+t+"&data="+r+"&select="+a)},updateMultiple:function(t){return e.put("/api/traveler/updateMultiple",t)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyIsImFwcC5qcyIsImFwcFJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL0FwcEN0cmwuanMiLCJjb250cm9sbGVycy9Gb3JtR2VuQ3RybC5qcyIsImNvbnRyb2xsZXJzL01haW5DdHJsLmpzIiwiY29udHJvbGxlcnMvU2VhcmNoVHJhdmVsZXJDdHJsLmpzIiwiY29udHJvbGxlcnMvVHJhdmVsZXJDdHJsLmpzIiwic2VydmljZXMvQ291bnRlclNlcnZpY2UuanMiLCJzZXJ2aWNlcy9Eb2NOdW1TZXJ2aWNlLmpzIiwic2VydmljZXMvRm9ybVNlcnZpY2UuanMiLCJzZXJ2aWNlcy9UcmF2ZWxlclNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInZpZXdzIiwiIiwiZm9ybVJldmlld0B0cmF2ZWxlciIsImZvcm1SZXZpZXdAc2VhcmNoVHJhdmVsZXIiLCJ0ZW1wbGF0ZUdlbmVyYXRvckBmb3JtR2VuZXJhdG9yIiwidGVtcGxhdGVDcmVhdG9yQGZvcm1HZW5lcmF0b3IiLCJodG1sNU1vZGUiLCIkc2NvcGUiLCJpc0NvbGxhcHNlZCIsIkZvcm0iLCJzdWJtaXQiLCJwYXNzd29yZCIsInByb21wdCIsImNyZWF0ZSIsInRlbXBsYXRlIiwic3VjY2VzcyIsImRhdGEiLCJhbGVydCIsInNhdmUiLCJfaWQiLCJjb25maXJtIiwiaW5pdENyZWF0ZSIsInNldFNlbGVjdFRhYiIsIm4iLCJzZWxlY3RUYWIiLCJhZGRJdGVtUmVjb3JkIiwiaW5wdXRJdGVtUmVjb3JkIiwiaXRlbVJlY29yZCIsImxlbiIsImxlbmd0aCIsIml0ZW0iLCJpZCIsIkRlc2NyaXB0aW9uIiwiaW5wdXRJdGVtUmVjb3JkVHlwZSIsImhvbGRlciIsInNlbGVjdE9wdGlvbnMiLCJzcGxpdCIsImkiLCJ0cmltIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwibmFtZSIsInNlbGVjdCIsInB1c2giLCJhZGRTdGVwIiwic3RlcHMiLCJzdGVwIiwidHlwZSIsImlucHV0U3RlcFR5cGUiLCJpbnB1dFN0ZXBEZXMiLCJhZGRTdWJTdGVwIiwidGVtcFN1YiIsImlucHV0U3ViU3RlcERlcyIsInN0ZXBJbmRleCIsInNlbGVjdFN0ZXBGb3JTdWJTdGVwIiwibGlzdCIsInN1YlN0ZXAiLCJzdWJfc3RlcCIsImFkZFN1Yk9wdGlvbiIsInRlbXBTdWJPcHRpb24iLCJzZWxlY3RTdWJGb3JPcHRpb24iLCJzdWIiLCJzZWxlY3RPcHRpb24iLCJzdWJPcHRpb25zIiwic2VsZWN0U3ViT3B0aW9uIiwib3B0aW9ucyIsIm9wdGlvbiIsImlucHV0Iiwic3ViU3RlcE9wdGlvbiIsIm1vZGlmeUlEIiwib2JqZWN0IiwiZWRpdE9wdGlvbiIsImFkZHJlc3MiLCJ1cGRhdGVGb3JtIiwidHJhdmVsZXJEYXRhIiwiZm9ybUlkIiwiZ2V0IiwiaXNQdWJsaXNoIiwibG9hZEZvcm1MaXN0IiwiZ2V0Rm9ybUxpc3QiLCJmb3JtTGlzdCIsIm1haW4iLCJqc29uVmlldyIsInRhZ2xpbmUiLCJUcmF2ZWxlciIsInNlYXJjaCIsImN1cnJlbnRJbnB1dCIsInNlYXJjaElucHV0IiwiaXNTZWFyY2giLCJzZWFyY2hPcHRpb24iLCJ0b1N0cmluZyIsInNlYXJjaExpa2UiLCJyZXN1bHQiLCJmaW5kU3RhdGlzdGljcyIsIm5vcm1hbFNlYXJjaCIsImVkaXRUcmF2ZWxlciIsIndpbmRvdyIsIm9wZW4iLCJyZW1vdmVUcmF2ZWxlciIsImluZGV4IiwiaWRMaXN0Iiwic3BsaWNlIiwidGltZVNwZW5kIiwicmV2aWV3QXQiLCJkaWZmIiwiTWF0aCIsInJvdW5kIiwiRGF0ZSIsImNyZWF0ZUF0IiwidG90YWxUaW1lU3BhbmQiLCJjYWx1bGF0ZVRpbWUiLCJfZGlmZiIsInRvdGFsVGltZVNwZW5kIiwic2Vjb25kcyIsImZsb29yIiwic3RhdCIsInBpZUxhYmVsczEiLCJwaWVEYXRhMSIsInN0YXR1cyIsInRvdGFsIiwicmVqZWN0IiwiY29tcGxldGVkIiwiUkVKRUNUIiwiQ09NUExFVEVEIiwicGVjQ29tcGxldGUiLCJ0b0ZpeGVkIiwicGVjUmVqZWN0IiwiX2kiLCJwaWVMYWJlbHMyIiwicGllRGF0YTIiLCJpbml0Iiwic29ydFR5cGUiLCJzb3J0UmV2ZXJzZSIsImZpbHRlciIsImNvbGxlY3Rpb24iLCJrZXluYW1lIiwib3V0cHV0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpbmRleE9mIiwiRG9jTnVtIiwiQ291bnRlciIsIiRzdGF0ZVBhcmFtcyIsImNoZWNrUmVhZHlSZXZpZXciLCJyZWFkeVJldmlldyIsImZvcm1zIiwibGFzdFN0ZXAiLCJmb3JtUmV2IiwiZm9ybU5vIiwiY3VzdG9tZXIiLCJsb2FkRG9jTnVtTGlzdCIsInVwZGF0ZURvY051bSIsInNlbGVjdFNOTGlzdCIsImlzV29ya0ZpbmQiLCJkb2NOdW0iLCJkb2NOdW1EYXRhIiwiZG9jTnVtU2VsZWN0TGlzdCIsImRvY051bVNlbGVjdCIsInNldE51bURvY3RvVHJhdmVsZXIiLCJnZXRTTkxpc3QiLCJuZXh0U3RlcCIsImN1cnJlbnRTdGVwIiwiY3VycmVudFN1YlN0ZXAiLCJzdGF0dXNQYWdlIiwicGFnZSIsInN0YXR1c1N1YlBhZ2UiLCJnb0JhY2siLCJjYWxsYmFjayIsInNuIiwidXBkYXRlTXVsdGlwbGUiLCJyZXZpZXciLCJyZXZpZXdCeSIsImNsb3NlQWxlcnQiLCJhZGRBbGVydCIsInVzZXJuYW1lIiwiY3JlYXRlZCIsImNyZWF0ZWRCeSIsInNob3VsZENvbGxhcHNlIiwicmVzZXQiLCJhcHBlbmRTdWJTdGVwRWRpdEluZm8iLCJlZGl0QnkiLCJlZGl0VGltZSIsInByaW50VHJhdmVsZXIiLCJwcmludCIsInNhdmVEb2NOdW0iLCJzZXREb2NOdW1MYWJlbCIsImVkaXREb2NOdW0iLCJlZGl0RG9jTnVtRGF0YSIsImNoZWNrRm9yU04iLCJpc1NORXhpc3RNb3JlVGhhbk9uZSIsImRvY051bUlkIiwiY3JlYXRlTmV3VHJhdmVsZXIiLCJtb3ZlVG9TZWxlY3RTTkxpc3QiLCJzdGFjayIsIlNOTGlzdEZvckRvY051bSIsImVsIiwicG9wIiwiY2hlY2tib3giLCJtb3ZlVG9TTkxpc3RGb3JEb2NOdW0iLCJzZWxlY3RBbGxMaXN0IiwiYm9vbCIsImxvYWRUcmF2ZWxlciIsInNlbGVjdFNOIiwic2VhcmNoU04iLCJzZWFyY2hTTkxpc3QiLCJjbGVhckFmdGVyQ2hhbmdlVGFiIiwiaXNTTkV4aXN0IiwiaXNTTk1vcmVUaGFuT25lIiwibG9hZEl0ZW1SZWNvcmQiLCJzZXRUcmF2ZWxlckRhdGEiLCJjcmVhdGVXb3JrIiwibmV4dFNlcXVlbmNlVmFsdWUiLCJzZXF1ZW5jZV92YWx1ZSIsIndvcmtOdW0iLCJzZWFyY2hXb3JrTnVtIiwiaXNTdGFydFdvcmsiLCJjcmVhdGVUcmF2ZWxlciIsImlzQ29sbGFwc2VkSXRlbVJlY29yZCIsImlzV2FudENyZWF0ZSIsImNoZWNrU05FeGlzdERCIiwic3RhcnRXb3JrIiwidG9wQ29sbGFwc2UiLCJtc2ciLCJhbGVydHMiLCJhY3Rpb24iLCJjb3VudCIsImxhYmVsIiwiaXNOZXciLCJnZXREb2NOdW1MaXN0IiwiaXNVc2VXb3JrTnVtIiwic2VsZWN0U2VhcmNoU04iLCJpc0NvbGxhcHNlSGVhZGVyU05MaXN0IiwiaXNTZWFyY2hDbGljayIsImZhY3RvcnkiLCIkaHR0cCIsInBvc3QiLCJwdXQiLCJnZXREb2NOdW0iLCJjb25zb2xlIiwibG9nIiwiZ2V0QWxsIiwiZGVsZXRlIiwicmV2aWV3RGF0YSIsImZvcm1EYXRhIiwiZ2V0UmV2aWV3RGF0YSIsInNldFJldmlld0RhdGEiXSwibWFwcGluZ3MiOiJBQUFBLFlDQUFBLFNBQVFDLE9BQU8sYUFFYixZQUNBLGVBQ0EsWUFDQSxXQUVBLFVBQ0EsV0FDQSxlQUNBLHFCQUNBLGlCQUVBLGtCQUNBLGNBQ0EsZ0JBQ0EsbUJDaEJGRCxRQUFRQyxPQUFPLGFBQWMsY0FDM0JD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U2hDLEVBQUssV0FBVzJCLElBRXRGZ0ksZUFBZ0IsU0FBUzNKLEdBQ3JCLE1BQU80TixHQUFNRSxJQUFJLCtCQUFnQzlOIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ3NhbXBsZUFwcCcsIFsndWkucm91dGVyJywgJ3VpLmJvb3RzdHJhcCcsICdhcHBSb3V0ZXMnLCAnZG5kTGlzdHMnLCAnQXBwQ3RybCcsICdNYWluQ3RybCcsICdUcmF2ZWxlckN0cmwnLCAnU2VhcmNoVHJhdmVsZXJDdHJsJywgJ0Zvcm1HZW5DdHJsLmpzJywgJ1RyYXZlbGVyU2VydmljZScsICdGb3JtU2VydmljZScsICdEb2NOdW1TZXJ2aWNlJywgJ0NvdW50ZXJTZXJ2aWNlJ10pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwUm91dGVzJywgWyd1aS5yb3V0ZXInXSkuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2hvbWUnKTtcblxuXHQvLyAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cdCRzdGF0ZVByb3ZpZGVyXG5cblx0Ly8gaG9tZSBwYWdlXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0XHR1cmw6ICcvaG9tZScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9ob21lLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdNYWluQ29udHJvbGxlcidcblx0fSkuc3RhdGUoJ3RyYXZlbGVyJywge1xuXHRcdHVybDogJy90cmF2ZWxlcj9faWQmZm9ybUlkJyxcblx0XHR2aWV3czoge1xuXHRcdFx0Jyc6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90cmF2ZWxlci5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1RyYXZlbGVyQ29udHJvbGxlcidcblx0XHRcdH0sXG5cdFx0XHQnZm9ybVJldmlld0B0cmF2ZWxlcic6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9mb3JtUmV2aWV3Lmh0bWwnXG5cdFx0XHRcdC8vIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJ1RyYXZlbGVyJywgJ0Zvcm0nLGZ1bmN0aW9uKCRzY29wZSwgVHJhdmVsZXIsIEZvcm0pe1xuXHRcdFx0XHQvLyBcdCRzY29wZS5yZXZpZXdEYXRhID0gVHJhdmVsZXIuZ2V0UmV2aWV3RGF0YSgpO1xuXHRcdFx0XHQvLyBcdEZvcm0uZ2V0KCRzY29wZS5yZXZpZXdEYXRhLmZvcm1JZClcblx0XHRcdFx0Ly8gXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHQvLyBcdFx0XHQkc2NvcGUuZm9ybXMgPSBkYXRhO1xuXHRcdFx0XHQvLyBcdH0pO1xuXHRcdFx0XHQvLyB9XVxuXHRcdFx0XHQvLyBjb250cm9sbGVyOiAnVHJhdmVsZXJDb250cm9sbGVyJ1xuXHRcdFx0fVxuXHRcdH1cblx0fSkuc3RhdGUoJ3NlYXJjaFRyYXZlbGVyJywge1xuXHRcdHVybDogJy9zZWFyY2hUcmF2ZWxlcicsXG5cdFx0dmlld3M6IHtcblx0XHRcdCcnOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2VhcmNoVHJhdmVsZXIuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTZWFyY2hUcmF2ZWxlckNvbnRyb2xsZXInXG5cdFx0XHR9LFxuXHRcdFx0J2Zvcm1SZXZpZXdAc2VhcmNoVHJhdmVsZXInOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybVJldmlldy5odG1sJ1xuXHRcdFx0fVxuXHRcdH1cblx0fSkuc3RhdGUoJ2Zvcm1HZW5lcmF0b3InLCB7XG5cdFx0dXJsOiAnL2Zvcm1HZW5lcmF0b3InLFxuXHRcdHZpZXdzOiB7XG5cdFx0XHQnJzoge1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1HZW5lcmF0b3JOYXYuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcidcblx0XHRcdH0sXG5cdFx0XHQndGVtcGxhdGVHZW5lcmF0b3JAZm9ybUdlbmVyYXRvcic6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90ZW1wbGF0ZUdlbmVyYXRvci5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJ1xuXHRcdFx0fSxcblx0XHRcdCd0ZW1wbGF0ZUNyZWF0b3JAZm9ybUdlbmVyYXRvcic6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90ZW1wbGF0ZUNyZWF0b3IuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcidcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcEN0cmwnLCBbJ25nQW5pbWF0ZSddKS5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cblx0JHNjb3BlLmlzQ29sbGFwc2VkID0gdHJ1ZTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0Zvcm1HZW5DdHJsLmpzJywgWyd1aS5ib290c3RyYXAudGFicyddKS5jb250cm9sbGVyKCdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0Zvcm0nLCBmdW5jdGlvbiAoJHNjb3BlLCBGb3JtKSB7XG5cblx0JHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uIChwYXNzd29yZCkge1xuXHRcdGlmICghcGFzc3dvcmQgfHwgcGFzc3dvcmQgPT09ICcnKSB7XG5cdFx0XHRwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcblx0XHR9XG5cdFx0aWYgKHBhc3N3b3JkID09PSAnUVFtb3JlJykge1xuXHRcdFx0Rm9ybS5jcmVhdGUoJHNjb3BlLnRlbXBsYXRlKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdC8vIGRvIHNvbWV0aGluZ1xuXHRcdFx0XHRhbGVydCgnYWRkJyk7XG5cdFx0XHRcdCRzY29wZS5jcmVhdGUgPSBkYXRhO1xuXHRcdFx0XHRkZWxldGUgJHNjb3BlLnRlbXBsYXRlO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFsZXJ0KCdnbyBob21lIHNvbicpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcGFzc3dvcmQgPSBwcm9tcHQoJ3Bhc3N3b3JkJyk7XG5cdFx0aWYgKHBhc3N3b3JkID09PSAnUVFtb3JlJykge1xuXHRcdFx0aWYgKCRzY29wZS5jcmVhdGUuX2lkKSB7XG5cdFx0XHRcdEZvcm0uc2F2ZSgkc2NvcGUuY3JlYXRlKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0YWxlcnQoJ3NhdmUnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUuY3JlYXRlO1xuXHRcdFx0XHQkc2NvcGUuc3VibWl0KHBhc3N3b3JkKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0YWxlcnQoJ2dvIGhvbWUnKTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcGFzc3dvcmQgPSBwcm9tcHQoJ3Bhc3N3b3JkJyk7XG5cdFx0aWYgKHBhc3N3b3JkID09PSAnUVFtb3JlJykge1xuXHRcdFx0aWYgKGNvbmZpcm0oJ2RlbGV0ZSB0ZW1wbGF0ZT8nKSkge1xuXG5cdFx0XHRcdGlmICgkc2NvcGUuY3JlYXRlLl9pZCkge1xuXHRcdFx0XHRcdEZvcm0uZGVsZXRlKCRzY29wZS5jcmVhdGUuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRhbGVydCgncmVtb3ZlZCcpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluaXRDcmVhdGUoKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0YWxlcnQoJ2dvIGhvbWUnKTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnNldFNlbGVjdFRhYiA9IGZ1bmN0aW9uIChuKSB7XG5cdFx0JHNjb3BlLnNlbGVjdFRhYiA9IG47XG5cdH07XG5cblx0JHNjb3BlLmFkZEl0ZW1SZWNvcmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS5pbnB1dEl0ZW1SZWNvcmQgJiYgJHNjb3BlLmlucHV0SXRlbVJlY29yZCAhPT0gJycpIHtcblx0XHRcdGlmICghJHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkKSB7XG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuaXRlbVJlY29yZCA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGxlbiA9ICRzY29wZS5jcmVhdGUuaXRlbVJlY29yZC5sZW5ndGg7XG5cdFx0XHR2YXIgaXRlbSA9IHtcblx0XHRcdFx0XCJpZFwiOiBsZW4gKyAxLFxuXHRcdFx0XHRcIkRlc2NyaXB0aW9uXCI6ICRzY29wZS5pbnB1dEl0ZW1SZWNvcmRcblx0XHRcdH07XG5cdFx0XHRpZiAoJHNjb3BlLmlucHV0SXRlbVJlY29yZFR5cGUgPT09ICdzZWxlY3QnKSB7XG5cdFx0XHRcdHZhciBob2xkZXIgPSAkc2NvcGUuc2VsZWN0T3B0aW9ucztcblx0XHRcdFx0aG9sZGVyID0gaG9sZGVyLnNwbGl0KCcsJyk7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaG9sZGVyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aG9sZGVyW2ldID0gaG9sZGVyW2ldLnRyaW0oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRob2xkZXIgPSBBcnJheS5mcm9tKG5ldyBTZXQoaG9sZGVyKSk7XG5cdFx0XHRcdGl0ZW1bJ3NlbGVjdCddID0geyAnbmFtZSc6ICcnIH07XG5cdFx0XHRcdGl0ZW0uc2VsZWN0WydvcHRpb25zJ10gPSBob2xkZXI7XG5cdFx0XHR9XG5cdFx0XHQkc2NvcGUuY3JlYXRlLml0ZW1SZWNvcmQucHVzaChpdGVtKTtcblx0XHRcdCRzY29wZS5pbnB1dEl0ZW1SZWNvcmQgPSAnJztcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmFkZFN0ZXAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gaWYoJHNjb3BlLmlucHV0U3RlcERlcyAmJiAkc2NvcGUuaW5wdXRTdGVwRGVzICE9PSAnJyl7XG5cdFx0aWYgKCEkc2NvcGUuY3JlYXRlLnN0ZXBzKSB7XG5cdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzID0gW107XG5cdFx0fVxuXHRcdHZhciBsZW4gPSAkc2NvcGUuY3JlYXRlLnN0ZXBzLmxlbmd0aDtcblx0XHR2YXIgc3RlcCA9IHtcblx0XHRcdFwic3RlcFwiOiBsZW4gKyAxLFxuXHRcdFx0XCJ0eXBlXCI6ICRzY29wZS5pbnB1dFN0ZXBUeXBlIHx8ICcnLFxuXHRcdFx0XCJEZXNjcmlwdGlvblwiOiAkc2NvcGUuaW5wdXRTdGVwRGVzIHx8ICcnXG5cdFx0fTtcblx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzLnB1c2goc3RlcCk7XG5cblx0XHQkc2NvcGUuaW5wdXRTdGVwRGVzID0gJyc7XG5cdFx0Ly8gfVxuXHR9O1xuXG5cdCRzY29wZS5hZGRTdWJTdGVwID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICgkc2NvcGUudGVtcFN1Yi5pbnB1dFN1YlN0ZXBEZXMgJiYgJHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzICE9PSAnJykge1xuXHRcdFx0dmFyIHN0ZXBJbmRleCA9ICRzY29wZS50ZW1wU3ViLnNlbGVjdFN0ZXBGb3JTdWJTdGVwO1xuXHRcdFx0aWYgKCEkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBJbmRleF0ubGlzdCkge1xuXHRcdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBJbmRleF0ubGlzdCA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGxlbiA9ICRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0Lmxlbmd0aDtcblx0XHRcdHZhciBzdWJTdGVwID0ge1xuXHRcdFx0XHRcInN1Yl9zdGVwXCI6IGxlbiArIDEsXG5cdFx0XHRcdFwiRGVzY3JpcHRpb25cIjogJHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzXG5cdFx0XHR9O1xuXHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwSW5kZXhdLmxpc3QucHVzaChzdWJTdGVwKTtcblx0XHRcdCRzY29wZS50ZW1wU3ViLmlucHV0U3ViU3RlcERlcyA9ICcnO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuYWRkU3ViT3B0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzdGVwID0gJHNjb3BlLnRlbXBTdWJPcHRpb24uc2VsZWN0U3ViRm9yT3B0aW9uLnNwbGl0KCcsJylbMF07XG5cdFx0dmFyIHN1YiA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnNlbGVjdFN1YkZvck9wdGlvbi5zcGxpdCgnLCcpWzFdO1xuXHRcdHZhciBzZWxlY3RPcHRpb24gPSAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLnNlbGVjdFN1Yk9wdGlvbjtcblx0XHR2YXIgb3B0aW9ucyA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLmlucHV0LnNwbGl0KCcsJyk7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvcHRpb25zW2ldID0gb3B0aW9uc1tpXS50cmltKCk7XG5cdFx0fVxuXHRcdG9wdGlvbnMgPSBBcnJheS5mcm9tKG5ldyBTZXQob3B0aW9ucykpO1xuXHRcdHZhciBzdWJTdGVwT3B0aW9uID0ge1xuXHRcdFx0XCJ0eXBlXCI6IHNlbGVjdE9wdGlvbixcblx0XHRcdFwibmFtZVwiOiAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5uYW1lLFxuXHRcdFx0XCJvcHRpb25zXCI6IG9wdGlvbnNcblx0XHR9O1xuXHRcdGlmICghJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl0ub3B0aW9ucykge1xuXHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl0ub3B0aW9ucyA9IFtdO1xuXHRcdH1cblx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBdLmxpc3Rbc3ViXS5vcHRpb25zLnB1c2goc3ViU3RlcE9wdGlvbik7XG5cdFx0Ly8kc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBdLmxpc3Rbc3ViXVtzZWxlY3RPcHRpb25dID0gc3ViU3RlcE9wdGlvbjtcblx0XHQkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5uYW1lID0gJyc7XG5cdFx0JHNjb3BlLnRlbXBTdWJPcHRpb24uc3ViT3B0aW9ucy5vcHRpb24uaW5wdXQgPSAnJztcblx0fTtcblxuXHQkc2NvcGUubW9kaWZ5SUQgPSBmdW5jdGlvbiAob2JqZWN0LCB0eXBlKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0eXBlID09PSAnaXRlbVJlY29yZCcpIHtcblx0XHRcdFx0b2JqZWN0W2ldLmlkID0gaSArIDE7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZSA9PT0gJ3N0ZXBzJykge1xuXHRcdFx0XHRvYmplY3RbaV0uc3RlcCA9IGkgKyAxO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGUgPT09ICdzdWJfc3RlcCcpIHtcblx0XHRcdFx0b2JqZWN0W2ldLnN1Yl9zdGVwID0gaSArIDE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5lZGl0T3B0aW9uID0gZnVuY3Rpb24gKGFkZHJlc3MsIGlucHV0KSB7XG5cdFx0Ly8gY29uc29sZS5sb2codHlwZW9mIGlucHV0KTtcblx0XHQvLyBjb25zb2xlLmxvZyhpbnB1dCk7XG5cdFx0aWYgKGFkZHJlc3MpIHtcblx0XHRcdGFkZHJlc3Mub3B0aW9ucyA9IFtdO1xuXHRcdFx0aWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0aW5wdXQgPSBpbnB1dC5zcGxpdCgnLCcpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRhZGRyZXNzLm9wdGlvbnNbaV0gPSBpbnB1dFtpXS50cmltKCk7XG5cdFx0XHR9XG5cdFx0XHRhZGRyZXNzLm9wdGlvbnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWRkcmVzcy5vcHRpb25zKSk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS51cGRhdGVGb3JtID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcblx0XHRpZiAoJHNjb3BlLmZvcm1JZCkge1xuXHRcdFx0Rm9ybS5nZXQoJHNjb3BlLmZvcm1JZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHQvLyAkc2NvcGUuZm9ybXMgPSBkYXRhOyAgICAgICBcblx0XHRcdFx0Ly8gLy8gZmluZCB0aGUgbGFzdCBzdWJTdGVwXG5cdFx0XHRcdC8vICRzY29wZS5sYXN0U3RlcCA9IGRhdGEuc3RlcHMubGVuZ3RoO1xuXHRcdFx0XHQvLyAvLyBpbml0IHRoZSB0cmF2ZWxlckRhdGEgZnJvbSBmb3JtRGF0YVxuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCA9IGRhdGEuX2lkO1xuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXYgPSBkYXRhLmZvcm1SZXY7XG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEuZm9ybU5vID0gZGF0YS5mb3JtTm87XG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdPUEVOJztcblx0XHRcdFx0JHNjb3BlLmNyZWF0ZSA9IGRhdGE7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0dmFyIGluaXRDcmVhdGUgPSBmdW5jdGlvbiBpbml0Q3JlYXRlKCkge1xuXHRcdCRzY29wZS5jcmVhdGUgPSB7fTtcblx0XHQkc2NvcGUuY3JlYXRlLmlzUHVibGlzaCA9IGZhbHNlO1xuXHR9O1xuXG5cdHZhciBsb2FkRm9ybUxpc3QgPSBmdW5jdGlvbiBsb2FkRm9ybUxpc3QoKSB7XG5cdFx0Rm9ybS5nZXRGb3JtTGlzdCgpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdCRzY29wZS5mb3JtTGlzdCA9IGRhdGE7XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIG1haW4gPSBmdW5jdGlvbiBtYWluKCkge1xuXG5cdFx0aW5pdENyZWF0ZSgpO1xuXHRcdGxvYWRGb3JtTGlzdCgpO1xuXG5cdFx0JHNjb3BlLmlucHV0SXRlbVJlY29yZFR5cGUgPSAndGV4dCc7XG5cdFx0JHNjb3BlLmpzb25WaWV3ID0gZmFsc2U7XG5cdH07XG5cblx0bWFpbigpO1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnTWFpbkN0cmwnLCBbXSkuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcblxuXHQkc2NvcGUudGFnbGluZSA9ICd0byB0aGUgbW9vbiBhbmQgYmFjayEnO1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnU2VhcmNoVHJhdmVsZXJDdHJsJywgWydjaGFydC5qcyddKS5jb250cm9sbGVyKCdTZWFyY2hUcmF2ZWxlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICdUcmF2ZWxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIFRyYXZlbGVyKSB7XG5cblx0JHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuY3VycmVudElucHV0ID0gJHNjb3BlLnNlYXJjaElucHV0O1xuXHRcdCRzY29wZS5pc1NlYXJjaCA9IHRydWU7XG5cdFx0aWYgKCRzY29wZS5zZWFyY2hJbnB1dCkge1xuXHRcdFx0aWYgKCRzY29wZS5zZWFyY2hPcHRpb24gPT09ICdzbicpIHtcblx0XHRcdFx0dmFyIHNuID0gJHNjb3BlLnNlYXJjaElucHV0LnRvU3RyaW5nKCk7XG5cdFx0XHRcdFRyYXZlbGVyLnNlYXJjaExpa2UoJHNjb3BlLnNlYXJjaElucHV0KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdCA9IGRhdGE7XG5cdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBzZWFyY2ggZG9jIG51bVxuXHRcdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJHNjb3BlLnNlYXJjaE9wdGlvbiwgJHNjb3BlLnNlYXJjaElucHV0KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdCA9IGRhdGE7XG5cdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5lZGl0VHJhdmVsZXIgPSBmdW5jdGlvbiAoX2lkLCBmb3JtSWQpIHtcblx0XHR3aW5kb3cub3BlbigndHJhdmVsZXI/X2lkPScgKyBfaWQgKyAnJmZvcm1JZD0nICsgZm9ybUlkLCAnX2JsYW5rJyk7XG5cdH07XG5cblx0JHNjb3BlLnJlbW92ZVRyYXZlbGVyID0gZnVuY3Rpb24gKF9pZCwgaW5kZXgpIHtcblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdGlkTGlzdDogW19pZF1cblx0XHR9O1xuXHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdC8vICRzY29wZS5yZXN1bHQ9ZGF0YTtcblx0XHRcdCRzY29wZS5yZXN1bHQuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudGltZVNwZW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRpZiAoZGF0YS5yZXZpZXdBdCkge1xuXHRcdFx0dmFyIGRpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZShkYXRhLnJldmlld0F0KSAtIG5ldyBEYXRlKGRhdGEuY3JlYXRlQXQpKSAvIDEwMDApO1xuXHRcdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kICs9IGRpZmY7XG5cdFx0XHRyZXR1cm4gY2FsdWxhdGVUaW1lKGRpZmYpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgX2RpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoZGF0YS5jcmVhdGVBdCkpIC8gMTAwMCk7XG5cdFx0XHQkc2NvcGUudG90YWxUaW1lU3BhbmQgKz0gX2RpZmY7XG5cdFx0XHRyZXR1cm4gY2FsdWxhdGVUaW1lKF9kaWZmKTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnRvdGFsVGltZVNwZW5kID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIDU7XG5cdH07XG5cblx0dmFyIGNhbHVsYXRlVGltZSA9IGZ1bmN0aW9uIGNhbHVsYXRlVGltZShzZWNvbmRzKSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwIC8gNjApICsgJyBIb3VycyBhbmQgJyArIE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKSAlIDYwICsgJyBtaW4gYW5kICcgKyBzZWNvbmRzICUgNjAgKyAnIHNlYyc7XG5cdH07XG5cblx0Ly8gJHNjb3BlLnByaW50VHJhdmVsZXIgPSBmdW5jdGlvbihpbmRleCl7XG5cdC8vIFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9ICRzY29wZS5yZXN1bHRbaW5kZXhdO1xuXHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XG5cdC8vICAgIHZhciBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3dpZHRoPTgwMCxoZWlnaHQ9ODAwLHNjcm9sbGJhcnM9bm8sbWVudWJhcj1ubyx0b29sYmFyPW5vLGxvY2F0aW9uPW5vLHN0YXR1cz1ubyx0aXRsZWJhcj1ubyx0b3A9NTAnKTtcblx0Ly8gICAgcG9wdXBXaW4ud2luZG93LmZvY3VzKCk7XG5cdC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcblx0Ly8gICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoJzwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjx0aXRsZT5USVRMRSBPRiBUSEUgUFJJTlQgT1VUPC90aXRsZT4nICtcblx0Ly8gICAgICAgICc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cImxpYnMvYm9vc2F2ZURvY051bXRzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzc1wiPicgK1xuXHQvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XG5cdC8vICAgIHBvcHVwV2luLmRvY3VtZW50LmNsb3NlKCk7XG5cdC8vIH1cblxuXHR2YXIgZmluZFN0YXRpc3RpY3MgPSBmdW5jdGlvbiBmaW5kU3RhdGlzdGljcygpIHtcblx0XHQkc2NvcGUuc3RhdCA9IHt9O1xuXHRcdCRzY29wZS5waWVMYWJlbHMxID0gW107XG5cdFx0JHNjb3BlLnBpZURhdGExID0gW107XG5cdFx0dmFyIGRhdGEgPSAkc2NvcGUucmVzdWx0O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGRhdGFbaV0uc3RhdHVzIGluICRzY29wZS5zdGF0KSB7XG5cdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSArPSAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHNjb3BlLnBpZUxhYmVsczEucHVzaChkYXRhW2ldLnN0YXR1cyk7XG5cdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSA9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCRzY29wZS5zdGF0LnRvdGFsID0gZGF0YS5sZW5ndGg7XG5cdFx0dmFyIHJlamVjdCA9IDA7XG5cdFx0dmFyIGNvbXBsZXRlZCA9IDA7XG5cdFx0Ly8gY2FsdWxhdGUgcGVyY2VudCBvZiB0b3RhbCBjb21wbGF0ZWQgb3V0IG9mIHRvdGFsXG5cdFx0aWYgKCRzY29wZS5zdGF0LlJFSkVDVCkge1xuXHRcdFx0cmVqZWN0ID0gJHNjb3BlLnN0YXQuUkVKRUNUO1xuXHRcdH1cblxuXHRcdGlmICgkc2NvcGUuc3RhdC5DT01QTEVURUQpIHtcblx0XHRcdGNvbXBsZXRlZCA9ICRzY29wZS5zdGF0LkNPTVBMRVRFRDtcblx0XHR9XG5cdFx0JHNjb3BlLnN0YXQucGVjQ29tcGxldGUgPSAoKGNvbXBsZXRlZCArIHJlamVjdCkgLyBkYXRhLmxlbmd0aCAqIDEwMCkudG9GaXhlZCgyKTtcblxuXHRcdC8vIGNhbHVsYXRlIHBlcmNlbnQgb2YgcmVqZWN0IG91dCBvZiB0b3RhbFxuXHRcdGlmICgkc2NvcGUuc3RhdC5SRUpFQ1QgLyBkYXRhLmxlbmd0aCAqIDEwMCkge1xuXHRcdFx0JHNjb3BlLnN0YXQucGVjUmVqZWN0ID0gKHJlamVjdCAvIGRhdGEubGVuZ3RoICogMTAwKS50b0ZpeGVkKDIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUuc3RhdC5wZWNSZWplY3QgPSAwO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIF9pID0gMDsgX2kgPCAkc2NvcGUucGllTGFiZWxzMS5sZW5ndGg7IF9pKyspIHtcblx0XHRcdCRzY29wZS5waWVEYXRhMS5wdXNoKCRzY29wZS5zdGF0WyRzY29wZS5waWVMYWJlbHMxW19pXV0pO1xuXHRcdH1cblxuXHRcdCRzY29wZS5waWVMYWJlbHMyID0gWydGaW5pc2gnLCAnSG9sZCddO1xuXHRcdCRzY29wZS5waWVEYXRhMiA9IFtjb21wbGV0ZWQgKyByZWplY3QsICRzY29wZS5zdGF0LnRvdGFsIC0gKGNvbXBsZXRlZCArIHJlamVjdCldO1xuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQkc2NvcGUuaXNTZWFyY2ggPSBmYWxzZTtcblx0XHQkc2NvcGUuc2VhcmNoT3B0aW9uID0gJ2RvY051bSc7XG5cdFx0JHNjb3BlLnNvcnRUeXBlID0gJ2NyZWF0ZUF0Jztcblx0XHQkc2NvcGUuc29ydFJldmVyc2UgPSBmYWxzZTtcblx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XG5cdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kID0gMDtcblx0fTtcblxuXHR2YXIgbWFpbiA9IGZ1bmN0aW9uIG1haW4oKSB7XG5cdFx0aW5pdCgpO1xuXHR9O1xuXHRtYWluKCk7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlckN0cmwnLCBbXSkuZmlsdGVyKCd1bmlxdWUnLCBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiBmdW5jdGlvbiAoY29sbGVjdGlvbiwga2V5bmFtZSkge1xuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAga2V5cyA9IFtdO1xuXG5cdFx0YW5ndWxhci5mb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIga2V5ID0gaXRlbVtrZXluYW1lXTtcblx0XHRcdGlmIChrZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcblx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdG91dHB1dC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH07XG59KS5jb250cm9sbGVyKCdUcmF2ZWxlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICdUcmF2ZWxlcicsICdGb3JtJywgJ0RvY051bScsICdDb3VudGVyJywgJyRzdGF0ZVBhcmFtcycsIGZ1bmN0aW9uICgkc2NvcGUsIFRyYXZlbGVyLCBGb3JtLCBEb2NOdW0sIENvdW50ZXIsICRzdGF0ZVBhcmFtcykge1xuXG5cdCRzY29wZS5jaGVja1JlYWR5UmV2aWV3ID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICgkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9PT0gJ1BBTkRJTkcgRk9SIFJFVklFVycpIHtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ09QRU4nO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdQQU5ESU5HIEZPUiBSRVZJRVcnO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IHRydWU7XG5cdFx0fVxuXHRcdCRzY29wZS5zYXZlKCk7XG5cdH07XG5cblx0JHNjb3BlLnVwZGF0ZUZvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xuXHRcdGlmICgkc2NvcGUuZm9ybUlkKSB7XG5cdFx0XHRGb3JtLmdldCgkc2NvcGUuZm9ybUlkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdCRzY29wZS5mb3JtcyA9IGRhdGE7XG5cdFx0XHRcdC8vIGZpbmQgdGhlIGxhc3Qgc3ViU3RlcFxuXHRcdFx0XHQkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcblx0XHRcdFx0Ly8gaW5pdCB0aGUgdHJhdmVsZXJEYXRhIGZyb20gZm9ybURhdGFcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQgPSBkYXRhLl9pZDtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtUmV2ID0gZGF0YS5mb3JtUmV2O1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObyA9IGRhdGEuZm9ybU5vO1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmN1c3RvbWVyID0gZGF0YS5jdXN0b21lcjtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnT1BFTic7XG5cdFx0XHRcdGxvYWREb2NOdW1MaXN0KGRhdGEuX2lkLCBmdW5jdGlvbiAoKSB7fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnVwZGF0ZURvY051bSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gW107XG5cdFx0JHNjb3BlLmlzV29ya0ZpbmQgPSBmYWxzZTtcblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEgPSAkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbJHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RdO1xuXHRcdGlmICgkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCAhPT0gJ25ldycpIHtcblx0XHRcdHNldE51bURvY3RvVHJhdmVsZXIoKTtcblx0XHRcdGdldFNOTGlzdCgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuX2lkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGVsZXRlICRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZDtcblx0XHR9XG5cblx0XHQvLyBjYWxsIGEgZnVuY3Rpb24gdG8gdXNlIGRvY251bSB0byByZXR1cm4gdGhlIGxpc3Qgb2Ygc2VyaWFsIG51bWJlciBhc3NvY2lhdGUgd2l0aFxuXHRcdC8vIHRoaXMgZG9jbnVtXG5cdH07XG5cblx0JHNjb3BlLm5leHRTdGVwID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBvYmplY3QgPSAkc2NvcGUuZm9ybXMuc3RlcHNbJHNjb3BlLmN1cnJlbnRTdGVwIC0gMV07XG5cdFx0aWYgKG9iamVjdC5saXN0Lmxlbmd0aCA+PSAkc2NvcGUuY3VycmVudFN1YlN0ZXAgKyAxKSB7XG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgKz0gMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdGVwICs9IDE7XG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xuXHRcdFx0aWYgKCRzY29wZS5jdXJyZW50U3RlcCA+ICRzY29wZS5sYXN0U3RlcCkge1xuXHRcdFx0XHQvLyBUcmF2ZWxlci5zZXRSZXZpZXdEYXRhKCRzY29wZS50cmF2ZWxlckRhdGEpO1xuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gdHJ1ZTtcdFx0XG5cdFx0XHRcdCRzY29wZS5jaGVja1JlYWR5UmV2aWV3KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zdGF0dXNQYWdlID0gZnVuY3Rpb24gKHBhZ2UpIHtcblx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xuXHRcdCRzY29wZS5jdXJyZW50U3RlcCA9IHBhZ2U7XG5cdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xuXHRcdC8vICRzY29wZS5jaGVja1JlYWR5UmV2aWV3KCk7XG5cdH07XG5cblx0JHNjb3BlLnN0YXR1c1N1YlBhZ2UgPSBmdW5jdGlvbiAocGFnZSkge1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IHBhZ2U7XG5cdH07XG5cblx0JHNjb3BlLmdvQmFjayA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSAxO1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xuXHRcdCRzY29wZS5jaGVja1JlYWR5UmV2aWV3KCk7XG5cdH07XG5cblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuXHRcdHZhciBpZExpc3QgPSBbXTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zZWxlY3RTTkxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlkTGlzdC5wdXNoKCRzY29wZS5zZWxlY3RTTkxpc3RbaV0uX2lkKTtcblx0XHR9XG5cblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdGlkTGlzdDogaWRMaXN0LFxuXHRcdFx0dHJhdmVsZXJEYXRhOiAkc2NvcGUudHJhdmVsZXJEYXRhXG5cdFx0fTtcblx0XHQvLyBpZihpZExpc3QubGVuZ3RoID4gMSl7XG5cdFx0ZGVsZXRlIGRhdGEudHJhdmVsZXJEYXRhLnNuO1xuXHRcdC8vIH1cblx0XHRUcmF2ZWxlci51cGRhdGVNdWx0aXBsZShkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGRhdGEpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5yZXZpZXcgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG5cdFx0aWYgKCRzY29wZS50cmF2ZWxlckRhdGEucmV2aWV3QnkpIHtcblx0XHRcdGlmIChvcHRpb24gPT09ICdyZWplY3QnKSB7XG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ1JFSkVDVCc7XG5cdFx0XHR9IGVsc2UgaWYgKG9wdGlvbiA9PT0gJ2NvbXBsZXRlJykge1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdDT01QTEVURUQnO1xuXHRcdFx0fVxuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZXZpZXdBdCA9IG5ldyBEYXRlKCk7XG5cdFx0XHQkc2NvcGUuc2F2ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUuY2xvc2VBbGVydCgwLCAnY2xlYXInKTtcblx0XHRcdCRzY29wZS5hZGRBbGVydCgnd2FybmluZycsICdFbnRlciBSZXZpZXdlciBOYW1lJyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS51c2VybmFtZSAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLnNuKSB7XG5cdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0Ly8gc2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkID0gdHJ1ZTtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZEJ5ID0gJHNjb3BlLnVzZXJuYW1lO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVBdCA9IG5ldyBEYXRlKCk7XG5cdFx0XHRUcmF2ZWxlci5jcmVhdGUoJHNjb3BlLnRyYXZlbGVyRGF0YSlcblxuXHRcdFx0Ly8gaWYgc3VjY2Vzc2Z1bCBjcmVhdGVcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcblx0XHRcdFx0YWxlcnQoJ3N1Ym1pdCBjb21wbGV0ZScpO1xuXHRcdFx0XHRzaG91bGRDb2xsYXBzZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFsZXJ0KCdlbnRlciB5b3VyIG5hbWUgb3Igc2VyaWFsIG51bWJlciBwbHogJyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5uZXcgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmVzZXQoKTtcblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0aWYgKCRzY29wZS5zZWxlY3RTTkxpc3QpIHtcblx0XHRcdGlmIChjb25maXJtKCdkZWxldGU/JykpIHtcblx0XHRcdFx0dmFyIGlkTGlzdCA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zZWxlY3RTTkxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZExpc3QucHVzaCgkc2NvcGUuc2VsZWN0U05MaXN0W2ldLl9pZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XCJpZExpc3RcIjogaWRMaXN0XG5cdFx0XHRcdH07XG5cdFx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRyZXNldCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmFwcGVuZFN1YlN0ZXBFZGl0SW5mbyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdXNlcm5hbWUgPSAkc2NvcGUudXNlcm5hbWU7XG5cdFx0aWYgKHVzZXJuYW1lICE9PSAnJykge1xuXHRcdFx0dmFyIGN1cnJlbnRTdGVwID0gJHNjb3BlLmN1cnJlbnRTdGVwO1xuXHRcdFx0dmFyIGN1cnJlbnRTdWJTdGVwID0gJHNjb3BlLmN1cnJlbnRTdWJTdGVwO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGVwW2N1cnJlbnRTdGVwXVtjdXJyZW50U3ViU3RlcF0uZWRpdEJ5ID0gdXNlcm5hbWU7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXBbY3VycmVudFN0ZXBdW2N1cnJlbnRTdWJTdGVwXS5lZGl0VGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0JHNjb3BlLmNsb3NlQWxlcnQoMCwgJ2NsZWFyJyk7XG5cdFx0JHNjb3BlLmFkZEFsZXJ0KCd3YXJuaW5nJywgJ0VudGVyIHlvdXIgTmFtZScpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQkc2NvcGUucHJpbnRUcmF2ZWxlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XG5cdFx0Ly8gICAgdmFyIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAnd2lkdGg9ODAwLGhlaWdodD04MDAsc2Nyb2xsYmFycz1ubyxtZW51YmFyPW5vLHRvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLHRpdGxlYmFyPW5vLHRvcD01MCcpO1xuXHRcdC8vICAgIHBvcHVwV2luLndpbmRvdy5mb2N1cygpO1xuXHRcdC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcblx0XHQvLyAgICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZSgnPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPlRJVExFIE9GIFRIRSBQUklOVCBPVVQ8L3RpdGxlPicgK1xuXHRcdC8vICAgICAgICAnPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJsaWJzL2Jvb3NhdmVEb2NOdW10c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3NcIj4nICtcblx0XHQvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XG5cdFx0Ly8gICAgcG9wdXBXaW4uZG9jdW1lbnQuY2xvc2UoKTtcblx0XHR3aW5kb3cucHJpbnQoKTtcblx0fTtcblxuXHQkc2NvcGUuc2F2ZURvY051bSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZm9ybUlkID0gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQ7XG5cdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmZvcm1SZXYgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXY7XG5cdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmZvcm1ObyA9ICRzY29wZS50cmF2ZWxlckRhdGEuZm9ybU5vO1xuXHRcdHNldERvY051bUxhYmVsKCdjcmVhdGUnKTtcblx0XHRkZWxldGUgJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZDtcblx0XHREb2NOdW0uY3JlYXRlKCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0bG9hZERvY051bUxpc3QoJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQsIGZ1bmN0aW9uIChsaXN0KSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChsaXN0W2ldLl9pZCA9PT0gZGF0YS5faWQpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IGRhdGE7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZCA9IHsgXCJkb2NOdW1cIjogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmRvY051bSB9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLmVkaXREb2NOdW0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gc2V0RG9jTnVtTGFiZWwoJ2VkaXQnKTtcblx0XHQvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEpKTtcblx0XHREb2NOdW0uZWRpdERvY051bURhdGEoJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRsb2FkRG9jTnVtTGlzdCgkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCwgZnVuY3Rpb24gKCkge30pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5jaGVja0ZvclNOID0gZnVuY3Rpb24gKGlucHV0KSB7XG5cblx0XHRpZiAoaW5wdXQpIHtcblx0XHRcdCRzY29wZS5pc1NORXhpc3RNb3JlVGhhbk9uZSA9IGZhbHNlO1xuXHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdzbnxmb3JtSWQnLCBpbnB1dCArICd8JyArICRzY29wZS5mb3JtSWQsICdzbicpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0aWYgKGRhdGEubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3RNb3JlVGhhbk9uZSA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKGNvbmZpcm0oJ1NOIGFscmVhZHkgZXhpc3QuIGRvIHlvdSB3YW50IHRvIGNyZWF0ZSBhIG5ldyB0cmF2ZWxlciB3aXRoIHNhbWUgc24/JykpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3RNb3JlVGhhbk9uZSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghJHNjb3BlLmlzU05FeGlzdE1vcmVUaGFuT25lKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdE1vcmVUaGFuT25lID0gZmFsc2U7XG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSB7XG5cdFx0XHRcdFx0XHRcInNuXCI6IGlucHV0LFxuXHRcdFx0XHRcdFx0XCJzdGF0dXNcIjogXCJPUEVOXCIsXG5cdFx0XHRcdFx0XHRcImNyZWF0ZUF0XCI6IG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHRcIml0ZW1SZWNvcmRcIjoge1xuXHRcdFx0XHRcdFx0XHRcImRvY051bUlkXCI6ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5faWQsXG5cdFx0XHRcdFx0XHRcdFwiZG9jTnVtXCI6ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNyZWF0ZU5ld1RyYXZlbGVyKGl0ZW0pO1xuXHRcdFx0XHRcdGlucHV0ID0gJyc7XG5cdFx0XHRcdFx0aXRlbSA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLm1vdmVUb1NlbGVjdFNOTGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBjb25zb2xlLmxvZygkc2NvcGUuU05MaXN0Rm9yRG9jTnVtLmxlbmd0aCk7XG5cblx0XHR2YXIgc3RhY2sgPSBbXTtcblx0XHRmb3IgKHZhciBpID0gJHNjb3BlLlNOTGlzdEZvckRvY051bS5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcblx0XHRcdHZhciBlbCA9ICRzY29wZS5TTkxpc3RGb3JEb2NOdW0ucG9wKCk7XG5cdFx0XHRpZiAoZWwuY2hlY2tib3ggPT09IHRydWUpIHtcblx0XHRcdFx0ZWwuY2hlY2tib3ggPSBmYWxzZTtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKGVsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0YWNrLnB1c2goZWwpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQkc2NvcGUuU05MaXN0Rm9yRG9jTnVtID0gc3RhY2s7XG5cdFx0c3RhY2sgPSBudWxsO1xuXHR9O1xuXG5cdCRzY29wZS5tb3ZlVG9TTkxpc3RGb3JEb2NOdW0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHN0YWNrID0gW107XG5cdFx0Zm9yICh2YXIgaSA9ICRzY29wZS5zZWxlY3RTTkxpc3QubGVuZ3RoOyBpID4gMDsgaS0tKSB7XG5cdFx0XHR2YXIgZWwgPSAkc2NvcGUuc2VsZWN0U05MaXN0LnBvcCgpO1xuXHRcdFx0aWYgKGVsLmNoZWNrYm94ID09PSB0cnVlKSB7XG5cdFx0XHRcdGVsLmNoZWNrYm94ID0gZmFsc2U7XG5cdFx0XHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0ucHVzaChlbCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdGFjay5wdXNoKGVsKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0JHNjb3BlLnNlbGVjdFNOTGlzdCA9IHN0YWNrO1xuXHRcdHN0YWNrID0gbnVsbDtcblx0fTtcblxuXHQkc2NvcGUuc2VsZWN0QWxsTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG5cdFx0dmFyIGJvb2wgPSBsaXN0WzBdLmNoZWNrYm94O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGlzdFtpXS5jaGVja2JveCA9ICFib29sO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUubG9hZFRyYXZlbGVyID0gZnVuY3Rpb24gKGlucHV0KSB7XG5cdFx0aWYgKGlucHV0KSB7XG5cdFx0XHQkc2NvcGUuc2VsZWN0U04gPSBpbnB1dDtcblx0XHR9XG5cdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdfaWQnLCAkc2NvcGUuc2VsZWN0U04pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSBkYXRhWzBdO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5zZWFyY2hTTiA9IGZ1bmN0aW9uIChzbikge1xuXG5cdFx0aWYgKHNuKSB7XG5cdFx0XHQkc2NvcGUuc2VhcmNoU05MaXN0ID0gW107XG5cdFx0XHQkc2NvcGUuY2xlYXJBZnRlckNoYW5nZVRhYigpO1xuXHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdCA9IFtdO1xuXHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdzbnxmb3JtSWQnLCBzbiArICd8JyArICRzY29wZS5mb3JtSWQsICdzbnxjcmVhdGVBdHxzdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSB0cnVlO1xuXHRcdFx0XHQkc2NvcGUuaXNTTk1vcmVUaGFuT25lID0gZmFsc2U7XG5cdFx0XHRcdGlmIChkYXRhLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHQkc2NvcGUuaXNTTk1vcmVUaGFuT25lID0gdHJ1ZTtcblx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoU05MaXN0ID0gZGF0YTtcblx0XHRcdFx0fSBlbHNlIGlmIChkYXRhLmxlbmd0aCA9PSAxKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKHsgXCJfaWRcIjogZGF0YVswXS5faWQsIFwic25cIjogZGF0YVswXS5zbiB9KTtcblx0XHRcdFx0XHQkc2NvcGUuc2VsZWN0U04gPSBkYXRhWzBdLl9pZDtcblx0XHRcdFx0XHQkc2NvcGUubG9hZFRyYXZlbGVyKCk7XG5cdFx0XHRcdFx0bG9hZEl0ZW1SZWNvcmQoZGF0YVswXS5mb3JtSWQpO1xuXHRcdFx0XHRcdC8vICRzY29wZS5pc1N0YXJ0V29yayA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0ID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zZXRUcmF2ZWxlckRhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdCRzY29wZS5zZWxlY3RTTkxpc3QgPSBbXTtcblx0XHQkc2NvcGUuc2VsZWN0U05MaXN0LnB1c2goeyBcIl9pZFwiOiAkc2NvcGUuc2VhcmNoU05MaXN0W2RhdGFdLl9pZCwgXCJzblwiOiAkc2NvcGUuc2VhcmNoU05MaXN0W2RhdGFdLnNuIH0pO1xuXHRcdCRzY29wZS5zZWxlY3RTTiA9ICRzY29wZS5zZWFyY2hTTkxpc3RbZGF0YV0uX2lkO1xuXHRcdCRzY29wZS5sb2FkVHJhdmVsZXIoKTtcblx0XHRsb2FkSXRlbVJlY29yZCgpO1xuXHRcdC8vICRzY29wZS5pc1N0YXJ0V29yayA9IHRydWU7XG5cdH07XG5cblx0JHNjb3BlLmNyZWF0ZVdvcmsgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS5zZWxlY3RTTkxpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0Q291bnRlci5uZXh0U2VxdWVuY2VWYWx1ZSh7IG5hbWU6ICd3b3JrTnVtJyB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNsb3NlQWxlcnQoMCwgJ2NsZWFyJyk7XG5cdFx0XHRcdFx0JHNjb3BlLmFkZEFsZXJ0KCdpbmZvJywgJ0dyb3VwIG51bWJlciAnICsgZGF0YS5zZXF1ZW5jZV92YWx1ZSArICcgY3JlYXRlZCcpO1xuXHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEud29ya051bSA9IGRhdGEuc2VxdWVuY2VfdmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRzZXROdW1Eb2N0b1RyYXZlbGVyKCk7XG5cdFx0XHRcdFx0JHNjb3BlLnNhdmUoKTtcblx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoV29ya051bShkYXRhLnNlcXVlbmNlX3ZhbHVlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRDb3VudGVyLmNyZWF0ZSh7XG5cdFx0XHRcdFx0XHRcIm5hbWVcIjogXCJ3b3JrTnVtXCIsXG5cdFx0XHRcdFx0XHRcInNlcXVlbmNlX3ZhbHVlXCI6IDBcblx0XHRcdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuY3JlYXRlV29yaygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnNlYXJjaFdvcmtOdW0gPSBmdW5jdGlvbiAoaW5wdXQpIHtcblx0XHQkc2NvcGUuaXNXb3JrRmluZCA9IGZhbHNlO1xuXHRcdCRzY29wZS5jbGVhckFmdGVyQ2hhbmdlVGFiKCk7XG5cdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCd3b3JrTnVtJywgaW5wdXQsICdzbnxjcmVhdGVBdHxzdGF0dXN8d29ya051bXxmb3JtSWR8aXRlbVJlY29yZC5kb2NOdW1JZHxpdGVtUmVjb3JkLmRvY051bScpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdCRzY29wZS5zZWxlY3RTTkxpc3QgPSBkYXRhO1xuXHRcdFx0aWYgKGRhdGEubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQkc2NvcGUuaXNXb3JrRmluZCA9IHRydWU7XG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGFbJ2l0ZW1SZWNvcmQnXSA9IHtcblx0XHRcdFx0XHRkb2NOdW1JZDogZGF0YVswXS5pdGVtUmVjb3JkLmRvY051bUlkLFxuXHRcdFx0XHRcdGRvY051bTogZGF0YVswXS5pdGVtUmVjb3JkLmRvY051bVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRsb2FkSXRlbVJlY29yZChkYXRhWzBdLmZvcm1JZCk7XG5cblx0XHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdpdGVtUmVjb3JkLmRvY051bUlkJywgZGF0YVswXS5pdGVtUmVjb3JkLmRvY051bUlkLCAnc258d29ya051bXxzdGF0dXN8Y3JlYXRlQXQnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0aWYgKGRhdGEubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghZGF0YVtpXS53b3JrTnVtIHx8IGRhdGFbaV0ud29ya051bSAhPT0gaW5wdXQudG9TdHJpbmcoKSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0ucHVzaChkYXRhW2ldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLmNsZWFyQWZ0ZXJDaGFuZ2VUYWIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnNlbGVjdFNOTGlzdCA9IFtdO1xuXHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0gPSBbXTtcblx0XHQkc2NvcGUuaXNTdGFydFdvcmsgPSBmYWxzZTtcblx0XHQkc2NvcGUuaXNXb3JrRmluZCA9IGZhbHNlO1xuXHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0ID0gJ25ldyc7XG5cdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhID0ge307XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkID0gZmFsc2U7XG5cdH07XG5cblx0JHNjb3BlLmNyZWF0ZVRyYXZlbGVyID0gZnVuY3Rpb24gKHNuKSB7XG5cdFx0JHNjb3BlLmlzU05FeGlzdCA9IGZhbHNlO1xuXHRcdGlmICgkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9PT0gJ25ldycpIHtcblx0XHRcdCRzY29wZS5jbG9zZUFsZXJ0KDAsICdjbGVhcicpO1xuXHRcdFx0JHNjb3BlLmFkZEFsZXJ0KCd3YXJuaW5nJywgJ1NlbGVjdCBhIERvY3VtZW50IE51bWJlcicpO1xuXHRcdFx0JHNjb3BlLmlzQ29sbGFwc2VkSXRlbVJlY29yZCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgaXNXYW50Q3JlYXRlID0gdHJ1ZTtcblx0XHRcdFx0Y2hlY2tTTkV4aXN0REIoc24sIGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGlmICghY29uZmlybSgnU2FtZSBTZXJpYWwgbnVtYmVyIGFscmVhZHkgZXhpc3QgaW4gdGhlIGRhdGFiYXNlLiBDcmVhdGUgYSBuZXcgVHJhdmVsZXIgd2l0aCBzYW1lIFNlcmlhbCBOdW1iZXI/JykpIHtcblx0XHRcdFx0XHRcdFx0aXNXYW50Q3JlYXRlID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpc1dhbnRDcmVhdGUpIHtcblx0XHRcdFx0XHRcdHZhciBpdGVtID0ge1xuXHRcdFx0XHRcdFx0XHRcInNuXCI6IHNuLFxuXHRcdFx0XHRcdFx0XHRcInN0YXR1c1wiOiBcIk9QRU5cIixcblx0XHRcdFx0XHRcdFx0XCJjcmVhdGVBdFwiOiBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0Y3JlYXRlTmV3VHJhdmVsZXIoaXRlbSwgZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmNsb3NlQWxlcnQoMCwgJ2NsZWFyJyk7XG5cdFx0XHRcdFx0XHRcdCRzY29wZS5pc0NvbGxhcHNlZEl0ZW1SZWNvcmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gW107XG5cdFx0XHRcdFx0XHRcdCRzY29wZS5zZWxlY3RTTkxpc3QucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0XCJfaWRcIjogZGF0YS5faWQsXG5cdFx0XHRcdFx0XHRcdFx0XCJzblwiOiBkYXRhLnNuXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRzZXROdW1Eb2N0b1RyYXZlbGVyKCk7XG5cdFx0XHRcdFx0XHRcdCRzY29wZS5zYXZlKCk7XG5cdFx0XHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Ly8gJHNjb3BlLmlzU3RhcnRXb3JrID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KSgpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuc3RhcnRXb3JrID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5pc1N0YXJ0V29yayA9IHRydWU7XG5cdFx0JHNjb3BlLnRvcENvbGxhcHNlID0gdHJ1ZTtcblx0fTtcblxuXHQkc2NvcGUuYWRkQWxlcnQgPSBmdW5jdGlvbiAodHlwZSwgbXNnKSB7XG5cdFx0JHNjb3BlLmFsZXJ0cy5wdXNoKHtcblx0XHRcdFwidHlwZVwiOiB0eXBlLFxuXHRcdFx0XCJtc2dcIjogbXNnXG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLmNsb3NlQWxlcnQgPSBmdW5jdGlvbiAoaW5kZXgsIGFjdGlvbikge1xuXHRcdGlmIChhY3Rpb24gPT09ICdjbGVhcicpIHtcblx0XHRcdCRzY29wZS5hbGVydHMgPSBbXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHNjb3BlLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgY2hlY2tTTkV4aXN0REIgPSBmdW5jdGlvbiBjaGVja1NORXhpc3REQihzbiwgY2FsbGJhY2spIHtcblx0XHQkc2NvcGUuaXNTTkV4aXN0ID0gZmFsc2U7XG5cdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdzbnxmb3JtSWQnLCBzbiArICd8JyArICRzY29wZS5mb3JtSWQsICdzbicpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdGlmIChkYXRhLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRjYWxsYmFjaygkc2NvcGUuaXNTTkV4aXN0KTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgY3JlYXRlTmV3VHJhdmVsZXIgPSBmdW5jdGlvbiBjcmVhdGVOZXdUcmF2ZWxlcihpdGVtLCBjYWxsYmFjaykge1xuXHRcdC8vIGNvbnNvbGUubG9nKGl0ZW0uc24pO1xuXHRcdGlmICgkc2NvcGUudXNlcm5hbWUpIHtcblx0XHRcdGRlbGV0ZSAkc2NvcGUudHJhdmVsZXJEYXRhLl9pZDtcblx0XHRcdGRlbGV0ZSAkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXA7XG5cdFx0XHRkZWxldGUgJHNjb3BlLnRyYXZlbGVyRGF0YS53b3JrTnVtO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zbiA9IGl0ZW0uc247XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQgPSBpdGVtLml0ZW1SZWNvcmQ7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZWQgPSB0cnVlO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkQnkgPSAkc2NvcGUudXNlcm5hbWU7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZUF0ID0gaXRlbS5jcmVhdGVBdDtcblx0XHRcdFRyYXZlbGVyLmNyZWF0ZSgkc2NvcGUudHJhdmVsZXJEYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdGl0ZW0uX2lkID0gZGF0YS5faWQ7XG5cdFx0XHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0ucHVzaChpdGVtKTtcblx0XHRcdFx0aWYgKGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgZ2V0U05MaXN0ID0gZnVuY3Rpb24gZ2V0U05MaXN0KGlucHV0KSB7XG5cdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdpdGVtUmVjb3JkLmRvY051bUlkJywgaW5wdXQsICdzbnxzdGF0dXN8Y3JlYXRlQXR8d29ya051bScpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0gPSBkYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBzaG91bGRDb2xsYXBzZSA9IGZ1bmN0aW9uIHNob3VsZENvbGxhcHNlKCkge1xuXHRcdGlmICgkc2NvcGUudHJhdmVsZXJEYXRhLnNuICYmICRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZC5kb2NOdW0pIHtcblx0XHRcdCRzY29wZS50b3BDb2xsYXBzZSA9IHRydWU7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBzZXROdW1Eb2N0b1RyYXZlbGVyID0gZnVuY3Rpb24gc2V0TnVtRG9jdG9UcmF2ZWxlcigpIHtcblx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQgPSB7XG5cdFx0XHRcImRvY051bUlkXCI6ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5faWQsXG5cdFx0XHRcImRvY051bVwiOiAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtXG5cdFx0fTtcblx0fTtcblxuXHR2YXIgc2V0RG9jTnVtTGFiZWwgPSBmdW5jdGlvbiBzZXREb2NOdW1MYWJlbChhY3Rpb24pIHtcblxuXHRcdHZhciBjb3VudCA9IDE7XG5cdFx0aWYgKGFjdGlvbiA9PT0gJ2NyZWF0ZScpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICgkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbaV0uZG9jTnVtID09PSAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtKSB7XG5cdFx0XHRcdFx0Y291bnQgKz0gMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIGlmKGFjdGlvbiA9PT0gJ2VkaXQnKXtcblx0XHQvLyBcdGZvcihsZXQgaT0wOyBpPCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdC5sZW5ndGg7aSsrKXtcblx0XHQvLyBcdFx0aWYoJHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0W2ldLmRvY051bSA9PT0gJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmRvY051bSAmJlxuXHRcdC8vIFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFtpXS5faWQgIT09ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5faWQpe1xuXHRcdC8vIFx0XHRcdGNvdW50ICs9IDE7XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdH1cblx0XHQvLyB9XG5cdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmxhYmVsID0gY291bnQ7XG5cdH07XG5cblx0dmFyIGxvYWRGb3JtTGlzdCA9IGZ1bmN0aW9uIGxvYWRGb3JtTGlzdCgpIHtcblx0XHRGb3JtLmdldEZvcm1MaXN0KCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0JHNjb3BlLmZvcm1MaXN0ID0gZGF0YTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgcmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcblx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XG5cdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gMTtcblx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xuXHRcdCRzY29wZS50cmF2ZWxlckRhdGEucmVhZHlSZXZpZXcgPSBmYWxzZTtcblx0XHQkc2NvcGUuZm9ybUlkID0gJyc7XG5cdFx0JHNjb3BlLmlzTmV3ID0gdHJ1ZTtcblx0fTtcblxuXHR2YXIgbG9hZERvY051bUxpc3QgPSBmdW5jdGlvbiBsb2FkRG9jTnVtTGlzdChpZCwgY2FsbGJhY2spIHtcblx0XHREb2NOdW0uZ2V0RG9jTnVtTGlzdChpZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0ID0gZGF0YTtcblx0XHRcdGNhbGxiYWNrKGRhdGEpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8vIGxvYWQgaW5mb3JtYXRpb24gZm9yIEl0ZW1SZWNvcmQgd2l0aFxuXHQvLyBkb2NOdW0uXG5cdHZhciBsb2FkSXRlbVJlY29yZCA9IGZ1bmN0aW9uIGxvYWRJdGVtUmVjb3JkKGZvcm1JZCkge1xuXHRcdGlmICghZm9ybUlkKSB7XG5cdFx0XHRmb3JtSWQgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZDtcblx0XHR9XG5cdFx0RG9jTnVtLmdldERvY051bUxpc3QoZm9ybUlkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGRhdGFbaV0uX2lkID09PSAkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQuZG9jTnVtSWQpIHtcblx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEgPSBkYXRhW2ldO1xuXHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0ID0gaS50b1N0cmluZygpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuXHRcdCRzY29wZS50b3BDb2xsYXBzZSA9IGZhbHNlO1xuXHRcdCRzY29wZS51c2VybmFtZSA9ICdKb2huIFNub3cnO1xuXHRcdCRzY29wZS5kb2NOdW0gPSB7fTtcblx0XHQkc2NvcGUuaXNTTkV4aXN0ID0gdHJ1ZTtcblx0XHQkc2NvcGUuaXNTTkV4aXN0TW9yZVRoYW5PbmUgPSBmYWxzZTtcblx0XHQkc2NvcGUuaXNTTk1vcmVUaGFuT25lID0gZmFsc2U7XG5cdFx0JHNjb3BlLnNlYXJjaFNOTGlzdCA9IFtdO1xuXHRcdCRzY29wZS5zZWxlY3RTTiA9ICcnO1xuXHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0gPSBbXTtcblx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gW107XG5cdFx0JHNjb3BlLmlzVXNlV29ya051bSA9IGZhbHNlO1xuXHRcdCRzY29wZS5pc1N0YXJ0V29yayA9IGZhbHNlO1xuXHRcdCRzY29wZS5zZWxlY3RTZWFyY2hTTiA9ICcwJztcblx0XHQkc2NvcGUuaXNXb3JrRmluZCA9IGZhbHNlO1xuXHRcdCRzY29wZS5pbnB1dCA9IHt9O1xuXHRcdCRzY29wZS5pc0NvbGxhcHNlZCA9IHRydWU7XG5cdFx0Ly8gJHNjb3BlLmlzQ29sbGFwc2VkU2VsZWN0U05MaXN0ID0gdHJ1ZTtcblx0XHQkc2NvcGUuaXNDb2xsYXBzZUhlYWRlclNOTGlzdCA9IHRydWU7XG5cdFx0JHNjb3BlLmlzU2VhcmNoQ2xpY2sgPSB0cnVlO1xuXHRcdCRzY29wZS5pc0NvbGxhcHNlZEl0ZW1SZWNvcmQgPSB0cnVlO1xuXHRcdCRzY29wZS5hbGVydHMgPSBbXTtcblx0fTtcblxuXHR2YXIgbWFpbiA9IGZ1bmN0aW9uIG1haW4oKSB7XG5cblx0XHRpbml0KCk7XG5cdFx0cmVzZXQoKTtcblx0XHRsb2FkRm9ybUxpc3QoKTtcblxuXHRcdGlmICgkc3RhdGVQYXJhbXMuZm9ybUlkKSB7XG5cdFx0XHQkc2NvcGUuZm9ybUlkID0gJHN0YXRlUGFyYW1zLmZvcm1JZDtcblx0XHRcdCRzY29wZS51cGRhdGVGb3JtKCk7XG5cdFx0XHQkc2NvcGUuaXNOZXcgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBsb2FkIHRoZSB0cmF2ZWxlciBmcm9tIFNlYXJjaCBwYWdlXG5cdFx0Ly8gdGFrZSB0aGUgcHJhbWFzIGZyb20gVVJMXG5cdFx0aWYgKCRzdGF0ZVBhcmFtcy5faWQpIHtcblx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xuXHRcdFx0VHJhdmVsZXIuZ2V0KCdfaWQnLCAkc3RhdGVQYXJhbXMuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdC8vIGRhdGEgaXMgYSBhcnJheS4gcmVzdWx0IGNvdWxkIGJlIG1vcmUgdGhhbiBvbmVcblx0XHRcdFx0Ly8gbmVlZCB0byBkZWFsIHdpdCB0aGlzLlxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcblx0XHRcdFx0bG9hZEl0ZW1SZWNvcmQoZGF0YS5mb3JtSWQpO1xuXHRcdFx0XHRzaG91bGRDb2xsYXBzZSgpO1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0U05MaXN0LnB1c2goeyBcIl9pZFwiOiBkYXRhLl9pZCwgXCJzblwiOiBkYXRhLnNuIH0pO1xuXHRcdFx0XHQkc2NvcGUuaXNTdGFydFdvcmsgPSB0cnVlO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdG1haW4oKTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0NvdW50ZXJTZXJ2aWNlJywgW10pLmZhY3RvcnkoJ0NvdW50ZXInLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdHJldHVybiB7XG5cdFx0bmV4dFNlcXVlbmNlVmFsdWU6IGZ1bmN0aW9uIG5leHRTZXF1ZW5jZVZhbHVlKGlucHV0KSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NvdW50ZXIvbmV4dFNlcXVlbmNlVmFsdWUvJywgaW5wdXQpO1xuXHRcdH0sXG5cdFx0Y3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJ2FwaS9jb3VudGVyL2NyZWF0ZScsIGRhdGEpO1xuXHRcdH1cblx0fTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0RvY051bVNlcnZpY2UnLCBbXSkuZmFjdG9yeSgnRG9jTnVtJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG5cdHJldHVybiB7XG5cdFx0Z2V0RG9jTnVtTGlzdDogZnVuY3Rpb24gZ2V0RG9jTnVtTGlzdChmb3JtSWQpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9jTnVtcy8nICsgZm9ybUlkKTtcblx0XHR9LFxuXHRcdGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2RvY051bXMvJywgZGF0YSk7XG5cdFx0fSxcblx0XHRlZGl0RG9jTnVtRGF0YTogZnVuY3Rpb24gZWRpdERvY051bURhdGEoZGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9kb2NOdW1zLycsIGRhdGEpO1xuXHRcdH0sXG5cdFx0Z2V0RG9jTnVtOiBmdW5jdGlvbiBnZXREb2NOdW0odHlwZSwgZGF0YSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Qgc2VydmljZScpO1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9kb2NOdW1zL3NlYXJjaFNpbmdsZT90eXBlPScgKyB0eXBlICsgJyZkYXRhPScgKyBkYXRhKTtcblx0XHR9XG5cdH07XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdGb3JtU2VydmljZScsIFtdKS5mYWN0b3J5KCdGb3JtJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG5cdHJldHVybiB7XG5cblx0XHRjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9mb3JtcycsIGRhdGEpO1xuXHRcdH0sXG5cblx0XHRnZXRBbGw6IGZ1bmN0aW9uIGdldEFsbCgpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZm9ybXMvJyk7XG5cdFx0fSxcblxuXHRcdGdldEZvcm1MaXN0OiBmdW5jdGlvbiBnZXRGb3JtTGlzdCgpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZm9ybXMvZm9ybUxpc3QnKTtcblx0XHR9LFxuXG5cdFx0Z2V0OiBmdW5jdGlvbiBnZXQoZm9ybUlkKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zL3NlYXJjaC8nICsgZm9ybUlkKTtcblx0XHR9LFxuXHRcdHNhdmU6IGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9mb3JtcycsIGRhdGEpO1xuXHRcdH0sXG5cdFx0ZGVsZXRlOiBmdW5jdGlvbiBfZGVsZXRlKGZvcm1JZCkge1xuXHRcdFx0cmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9mb3Jtcy8nICsgZm9ybUlkKTtcblx0XHR9XG5cdH07XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlclNlcnZpY2UnLCBbXSkuZmFjdG9yeSgnVHJhdmVsZXInLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICB2YXIgcmV2aWV3RGF0YSA9IHt9O1xuXG4gICAgcmV0dXJuIHtcblxuICAgICAgICAvLyB0aGVzZSB3aWxsIHdvcmsgd2hlbiBtb3JlIEFQSSByb3V0ZXMgYXJlIGRlZmluZWQgb24gdGhlIE5vZGUgc2lkZSBvZiB0aGluZ3NcbiAgICAgICAgLy8gY2FsbCB0byBQT1NUIGFuZCBjcmVhdGUgYSBuZXcgZm9ybVxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShmb3JtRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdHJhdmVsZXInLCBmb3JtRGF0YSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0UmV2aWV3RGF0YTogZnVuY3Rpb24gZ2V0UmV2aWV3RGF0YSgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXZpZXdEYXRhO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KHR5cGUsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdHJhdmVsZXI/dHlwZT0nICsgdHlwZSArICcmZGF0YT0nICsgZGF0YSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2F2ZTogZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3RyYXZlbGVyJywgZGF0YSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0UmV2aWV3RGF0YTogZnVuY3Rpb24gc2V0UmV2aWV3RGF0YShkYXRhKSB7XG4gICAgICAgICAgICByZXZpZXdEYXRhID0gZGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWFyY2hMaWtlOiBmdW5jdGlvbiBzZWFyY2hMaWtlKHNuKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL3NlYXJjaExpa2UvJyArIHNuKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gY2FsbCB0byBERUxFVEUgZm9ybXNcbiAgICAgICAgcmVtb3ZlVHJhdmVsZXI6IGZ1bmN0aW9uIHJlbW92ZVRyYXZlbGVyKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3RyYXZlbGVyL2RlbGV0ZVRyYXZlbGVyJywgZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIG5vcm1hbFNlYXJjaDogZnVuY3Rpb24gbm9ybWFsU2VhcmNoKHR5cGUsIGRhdGEsIHNlbGVjdCkge1xuICAgICAgICAgICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3QgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdHJhdmVsZXIvbm9ybWFsU2VhcmNoP3R5cGU9JyArIHR5cGUgKyAnJmRhdGE9JyArIGRhdGEgKyAnJnNlbGVjdD0nICsgc2VsZWN0KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlTXVsdGlwbGU6IGZ1bmN0aW9uIHVwZGF0ZU11bHRpcGxlKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvdHJhdmVsZXIvdXBkYXRlTXVsdGlwbGUnLCBkYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ3NhbXBsZUFwcCcsIFxyXG5cdFtcclxuXHRcdCd1aS5yb3V0ZXInLCBcclxuXHRcdCd1aS5ib290c3RyYXAnLFxyXG5cdFx0J2FwcFJvdXRlcycsXHJcblx0XHQnZG5kTGlzdHMnLFxyXG5cclxuXHRcdCdBcHBDdHJsJyxcclxuXHRcdCdNYWluQ3RybCcsIFxyXG5cdFx0J1RyYXZlbGVyQ3RybCcsIFxyXG5cdFx0J1NlYXJjaFRyYXZlbGVyQ3RybCcsIFxyXG5cdFx0J0Zvcm1HZW5DdHJsLmpzJyxcclxuXHRcdFxyXG5cdFx0J1RyYXZlbGVyU2VydmljZScsIFxyXG5cdFx0J0Zvcm1TZXJ2aWNlJyxcclxuXHRcdCdEb2NOdW1TZXJ2aWNlJyxcclxuXHRcdCdDb3VudGVyU2VydmljZSdcclxuXHRdXHJcbik7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcFJvdXRlcycsIFsndWkucm91dGVyJ10pXHJcblx0LmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicgLFxyXG5cdFx0ZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpe1xyXG5cclxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9ob21lJyk7XHJcblxyXG5cdFx0Ly8gJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xyXG5cdFx0JHN0YXRlUHJvdmlkZXJcclxuXHJcblx0XHRcdC8vIGhvbWUgcGFnZVxyXG5cdFx0XHQuc3RhdGUoJ2hvbWUnLCB7XHJcblx0XHRcdFx0dXJsOiAnL2hvbWUnLFxyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvaG9tZS5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTWFpbkNvbnRyb2xsZXInXHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHRcclxuXHRcdFx0LnN0YXRlKCd0cmF2ZWxlcicsIHtcclxuXHRcdFx0XHR1cmw6ICcvdHJhdmVsZXI/X2lkJmZvcm1JZCcsXHJcblx0XHRcdFx0dmlld3M6e1xyXG5cdFx0XHRcdFx0Jyc6e1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3RyYXZlbGVyLmh0bWwnLFxyXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVHJhdmVsZXJDb250cm9sbGVyJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdCdmb3JtUmV2aWV3QHRyYXZlbGVyJzp7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybVJldmlldy5odG1sJ1xyXG5cdFx0XHRcdFx0XHQvLyBjb250cm9sbGVyOiBbJyRzY29wZScsICdUcmF2ZWxlcicsICdGb3JtJyxmdW5jdGlvbigkc2NvcGUsIFRyYXZlbGVyLCBGb3JtKXtcclxuXHRcdFx0XHRcdFx0Ly8gXHQkc2NvcGUucmV2aWV3RGF0YSA9IFRyYXZlbGVyLmdldFJldmlld0RhdGEoKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHRGb3JtLmdldCgkc2NvcGUucmV2aWV3RGF0YS5mb3JtSWQpXHJcblx0XHRcdFx0XHRcdC8vIFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdFx0Ly8gXHRcdFx0JHNjb3BlLmZvcm1zID0gZGF0YTtcclxuXHRcdFx0XHRcdFx0Ly8gXHR9KTtcclxuXHRcdFx0XHRcdFx0Ly8gfV1cclxuXHRcdFx0XHRcdFx0Ly8gY29udHJvbGxlcjogJ1RyYXZlbGVyQ29udHJvbGxlcidcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHQuc3RhdGUoJ3NlYXJjaFRyYXZlbGVyJyx7XHJcblx0XHRcdFx0dXJsOiAnL3NlYXJjaFRyYXZlbGVyJyxcclxuXHRcdFx0XHR2aWV3czp7XHJcblx0XHRcdFx0XHQnJzp7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2VhcmNoVHJhdmVsZXIuaHRtbCcsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdTZWFyY2hUcmF2ZWxlckNvbnRyb2xsZXInXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0J2Zvcm1SZXZpZXdAc2VhcmNoVHJhdmVsZXInOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9mb3JtUmV2aWV3Lmh0bWwnXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0LnN0YXRlKCdmb3JtR2VuZXJhdG9yJyx7XHJcblx0XHRcdFx0dXJsOiAnL2Zvcm1HZW5lcmF0b3InLFxyXG5cdFx0XHRcdHZpZXdzOntcclxuXHRcdFx0XHRcdCcnOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9mb3JtR2VuZXJhdG9yTmF2Lmh0bWwnLFxyXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRm9ybUdlbmVyYXRvckNvbnRyb2xsZXInXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0J3RlbXBsYXRlR2VuZXJhdG9yQGZvcm1HZW5lcmF0b3InOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90ZW1wbGF0ZUdlbmVyYXRvci5odG1sJyxcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdCd0ZW1wbGF0ZUNyZWF0b3JAZm9ybUdlbmVyYXRvcic6e1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3RlbXBsYXRlQ3JlYXRvci5odG1sJyxcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJ1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcEN0cmwnLCBbJ25nQW5pbWF0ZSddKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xyXG5cclxuXHRcdCRzY29wZS5pc0NvbGxhcHNlZCA9IHRydWU7XHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnRm9ybUdlbkN0cmwuanMnLCBbJ3VpLmJvb3RzdHJhcC50YWJzJ10pXHJcblx0XHJcblx0LmNvbnRyb2xsZXIoJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJywgWyckc2NvcGUnLCdGb3JtJyAsIGZ1bmN0aW9uKCRzY29wZSwgRm9ybSl7XHJcblxyXG5cclxuXHRcdCRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbihwYXNzd29yZCl7XHJcblx0XHRcdGlmKCFwYXNzd29yZCB8fCBwYXNzd29yZCA9PT0gJycpe1xyXG5cdFx0XHRcdHBhc3N3b3JkID0gcHJvbXB0KCdwYXNzd29yZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHBhc3N3b3JkID09PSAnUVFtb3JlJyl7XHJcblx0XHRcdEZvcm0uY3JlYXRlKCRzY29wZS50ZW1wbGF0ZSlcclxuXHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+e1xyXG5cdFx0XHRcdFx0Ly8gZG8gc29tZXRoaW5nXHJcblx0XHRcdFx0XHRhbGVydCgnYWRkJyk7XHJcblx0XHRcdFx0XHQkc2NvcGUuY3JlYXRlID0gZGF0YTtcclxuXHRcdFx0XHRcdGRlbGV0ZSAkc2NvcGUudGVtcGxhdGU7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGFsZXJ0KCdnbyBob21lIHNvbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIHBhc3N3b3JkID0gcHJvbXB0KCdwYXNzd29yZCcpO1xyXG5cdFx0XHRpZihwYXNzd29yZCA9PT0nUVFtb3JlJyl7XHJcblx0XHRcdFx0aWYoJHNjb3BlLmNyZWF0ZS5faWQpe1xyXG5cdFx0XHRcdFx0Rm9ybS5zYXZlKCRzY29wZS5jcmVhdGUpXHJcblx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhPT57XHJcblx0XHRcdFx0XHRcdGFsZXJ0KCdzYXZlJyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdCRzY29wZS50ZW1wbGF0ZSA9ICRzY29wZS5jcmVhdGU7XHJcblx0XHRcdFx0XHQkc2NvcGUuc3VibWl0KHBhc3N3b3JkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGFsZXJ0KCdnbyBob21lJyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcclxuXHRcdFx0aWYocGFzc3dvcmQgPT09ICdRUW1vcmUnKXtcclxuXHRcdFx0XHRpZihjb25maXJtKCdkZWxldGUgdGVtcGxhdGU/Jykpe1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYoJHNjb3BlLmNyZWF0ZS5faWQpe1xyXG5cdFx0XHRcdFx0XHRGb3JtLmRlbGV0ZSgkc2NvcGUuY3JlYXRlLl9pZClcclxuXHRcdFx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhPT57XHJcblx0XHRcdFx0XHRcdFx0XHRhbGVydCgncmVtb3ZlZCcpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpbml0Q3JlYXRlKCk7XHJcblx0XHRcdFx0fVx0XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGFsZXJ0KCdnbyBob21lJyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnNldFNlbGVjdFRhYiA9IGZ1bmN0aW9uKG4pe1xyXG5cdFx0XHQkc2NvcGUuc2VsZWN0VGFiID0gbjtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmFkZEl0ZW1SZWNvcmQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkc2NvcGUuaW5wdXRJdGVtUmVjb3JkICYmICRzY29wZS5pbnB1dEl0ZW1SZWNvcmQgIT09ICcnKXtcclxuXHRcdFx0XHRpZighJHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkKXtcclxuXHRcdFx0XHRcdCRzY29wZS5jcmVhdGUuaXRlbVJlY29yZCA9IFtdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgbGVuID0gJHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkLmxlbmd0aDtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IHtcclxuXHRcdFx0XHRcdFwiaWRcIjogbGVuKzEsXHJcblx0XHRcdFx0XHRcIkRlc2NyaXB0aW9uXCI6JHNjb3BlLmlucHV0SXRlbVJlY29yZFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0aWYoJHNjb3BlLmlucHV0SXRlbVJlY29yZFR5cGUgPT09ICdzZWxlY3QnKXtcclxuXHRcdFx0XHRcdHZhciBob2xkZXIgPSAkc2NvcGUuc2VsZWN0T3B0aW9ucztcclxuXHRcdFx0XHRcdGhvbGRlciA9IGhvbGRlci5zcGxpdCgnLCcpO1xyXG5cdFx0XHRcdFx0Zm9yKGxldCBpID0gMDsgaTxob2xkZXIubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRcdGhvbGRlcltpXSA9IGhvbGRlcltpXS50cmltKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRob2xkZXIgPSBBcnJheS5mcm9tKG5ldyBTZXQoaG9sZGVyKSk7XHJcblx0XHRcdFx0XHRpdGVtWydzZWxlY3QnXSA9IHsnbmFtZSc6Jyd9O1xyXG5cdFx0XHRcdFx0aXRlbS5zZWxlY3RbJ29wdGlvbnMnXSA9IGhvbGRlcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkLnB1c2goaXRlbSk7XHJcblx0XHRcdFx0JHNjb3BlLmlucHV0SXRlbVJlY29yZCA9ICcnO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5hZGRTdGVwID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gaWYoJHNjb3BlLmlucHV0U3RlcERlcyAmJiAkc2NvcGUuaW5wdXRTdGVwRGVzICE9PSAnJyl7XHJcblx0XHRcdFx0aWYoISRzY29wZS5jcmVhdGUuc3RlcHMpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwcyA9IFtdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgbGVuID0gJHNjb3BlLmNyZWF0ZS5zdGVwcy5sZW5ndGg7XHJcblx0XHRcdFx0dmFyIHN0ZXAgPSB7XHJcblx0XHRcdFx0XHRcInN0ZXBcIjogbGVuKzEsXHJcblx0XHRcdFx0XHRcInR5cGVcIjogJHNjb3BlLmlucHV0U3RlcFR5cGUgfHwgJycsXHJcblx0XHRcdFx0XHRcIkRlc2NyaXB0aW9uXCI6ICRzY29wZS5pbnB1dFN0ZXBEZXMgfHwgJydcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHMucHVzaChzdGVwKTtcclxuXHJcblx0XHRcdFx0JHNjb3BlLmlucHV0U3RlcERlcyA9ICcnO1xyXG5cdFx0XHQvLyB9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5hZGRTdWJTdGVwID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoJHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzICYmICRzY29wZS50ZW1wU3ViLmlucHV0U3ViU3RlcERlcyAhPT0gJycpe1xyXG5cdFx0XHRcdGxldCBzdGVwSW5kZXggPSAkc2NvcGUudGVtcFN1Yi5zZWxlY3RTdGVwRm9yU3ViU3RlcDtcclxuXHRcdFx0XHRpZighJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwSW5kZXhdLmxpc3Qpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwSW5kZXhdLmxpc3Q9W107XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxldCBsZW4gPSAkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBJbmRleF0ubGlzdC5sZW5ndGg7XHJcblx0XHRcdFx0bGV0IHN1YlN0ZXAgPSB7XHJcblx0XHRcdFx0XHRcInN1Yl9zdGVwXCI6IGxlbisxLFxyXG5cdFx0XHRcdFx0XCJEZXNjcmlwdGlvblwiOiAkc2NvcGUudGVtcFN1Yi5pbnB1dFN1YlN0ZXBEZXNcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0LnB1c2goc3ViU3RlcCk7XHJcblx0XHRcdFx0JHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzID0gJyc7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmFkZFN1Yk9wdGlvbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGxldCBzdGVwID0gJHNjb3BlLnRlbXBTdWJPcHRpb24uc2VsZWN0U3ViRm9yT3B0aW9uLnNwbGl0KCcsJylbMF07XHJcblx0XHRcdGxldCBzdWIgPSAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zZWxlY3RTdWJGb3JPcHRpb24uc3BsaXQoJywnKVsxXTtcclxuXHRcdFx0bGV0IHNlbGVjdE9wdGlvbiA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMuc2VsZWN0U3ViT3B0aW9uO1xyXG5cdFx0XHRsZXQgb3B0aW9ucyA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLmlucHV0LnNwbGl0KCcsJyk7XHJcblx0XHRcdGZvcihsZXQgaT0wOyBpPCBvcHRpb25zLmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdG9wdGlvbnNbaV0gPSBvcHRpb25zW2ldLnRyaW0oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRvcHRpb25zID0gQXJyYXkuZnJvbShuZXcgU2V0KG9wdGlvbnMpKTtcclxuXHRcdFx0bGV0IHN1YlN0ZXBPcHRpb24gPSB7XHJcblx0XHRcdFx0XHRcInR5cGVcIjogc2VsZWN0T3B0aW9uLFxyXG5cdFx0XHRcdFx0XCJuYW1lXCI6ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLm5hbWUsXHJcblx0XHRcdFx0XHRcIm9wdGlvbnNcIjogb3B0aW9uc1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRpZighJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl0ub3B0aW9ucyl7XHJcblx0XHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl0ub3B0aW9ucz1bXTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBdLmxpc3Rbc3ViXS5vcHRpb25zLnB1c2goc3ViU3RlcE9wdGlvbik7XHJcblx0XHRcdC8vJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl1bc2VsZWN0T3B0aW9uXSA9IHN1YlN0ZXBPcHRpb247XHJcblx0XHRcdCRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLm5hbWUgPSAnJztcclxuXHRcdFx0JHNjb3BlLnRlbXBTdWJPcHRpb24uc3ViT3B0aW9ucy5vcHRpb24uaW5wdXQgPSAnJztcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdCRzY29wZS5tb2RpZnlJRCA9IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSl7XHJcblx0XHRcdGZvcihsZXQgaT0wOyBpPG9iamVjdC5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHRpZih0eXBlID09PSdpdGVtUmVjb3JkJyl7XHJcblx0XHRcdFx0XHRvYmplY3RbaV0uaWQgPSBpKzE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHR5cGUgPT09J3N0ZXBzJyl7XHJcblx0XHRcdFx0XHRvYmplY3RbaV0uc3RlcCA9IGkrMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYodHlwZSA9PT0nc3ViX3N0ZXAnKXtcclxuXHRcdFx0XHRcdG9iamVjdFtpXS5zdWJfc3RlcCA9IGkrMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmVkaXRPcHRpb24gPSBmdW5jdGlvbihhZGRyZXNzLCBpbnB1dCl7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHR5cGVvZiBpbnB1dCk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGlucHV0KTtcclxuXHRcdFx0aWYoYWRkcmVzcyl7XHJcblx0XHRcdFx0YWRkcmVzcy5vcHRpb25zID0gW107XHJcbiAgICAgICAgaWYodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdFx0ICBpbnB1dCA9IGlucHV0LnNwbGl0KCcsJyk7XHJcbiAgICAgICAgfVxyXG5cdFx0XHRcdGZvcihsZXQgaT0wO2k8aW5wdXQubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRhZGRyZXNzLm9wdGlvbnNbaV0gPSBpbnB1dFtpXS50cmltKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFkZHJlc3Mub3B0aW9ucyA9IEFycmF5LmZyb20obmV3IFNldChhZGRyZXNzLm9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcbiAgICAkc2NvcGUudXBkYXRlRm9ybSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xyXG4gICAgICAgICAgaWYoJHNjb3BlLmZvcm1JZCl7XHJcbiAgICAgICAgICAgIEZvcm0uZ2V0KCRzY29wZS5mb3JtSWQpXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUuZm9ybXMgPSBkYXRhOyAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyAvLyBmaW5kIHRoZSBsYXN0IHN1YlN0ZXBcclxuICAgICAgICAgICAgICAgIC8vICRzY29wZS5sYXN0U3RlcCA9IGRhdGEuc3RlcHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgLy8gLy8gaW5pdCB0aGUgdHJhdmVsZXJEYXRhIGZyb20gZm9ybURhdGFcclxuICAgICAgICAgICAgICAgIC8vICRzY29wZS50cmF2ZWxlckRhdGEuZm9ybUlkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXYgPSBkYXRhLmZvcm1SZXY7XHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObyA9IGRhdGEuZm9ybU5vO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnRyYXZlbGVyRGF0YS5jdXN0b21lciA9IGRhdGEuY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdPUEVOJztcclxuICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGU9IGRhdGE7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHRcdHZhciBpbml0Q3JlYXRlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLmNyZWF0ZSA9IHt9O1xyXG5cdFx0XHQkc2NvcGUuY3JlYXRlLmlzUHVibGlzaCA9IGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcbiAgICB2YXIgbG9hZEZvcm1MaXN0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgRm9ybS5nZXRGb3JtTGlzdCgpXHJcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAkc2NvcGUuZm9ybUxpc3QgPSBkYXRhO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cdFx0dmFyIG1haW4gPSBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0aW5pdENyZWF0ZSgpO1xyXG4gICAgICBcdFx0bG9hZEZvcm1MaXN0KCk7XHJcblx0XHRcclxuXHRcdFx0JHNjb3BlLmlucHV0SXRlbVJlY29yZFR5cGUgPSAndGV4dCc7XHJcblx0XHRcdCRzY29wZS5qc29uVmlldyA9IGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcblx0XHRtYWluKCk7XHJcblx0fV0pOyIsImFuZ3VsYXIubW9kdWxlKCdNYWluQ3RybCcsIFtdKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcclxuXHJcblx0XHQkc2NvcGUudGFnbGluZSA9ICd0byB0aGUgbW9vbiBhbmQgYmFjayEnO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ1NlYXJjaFRyYXZlbGVyQ3RybCcsIFsnY2hhcnQuanMnXSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1NlYXJjaFRyYXZlbGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1RyYXZlbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBUcmF2ZWxlcil7XHJcblxyXG5cdFx0JHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5jdXJyZW50SW5wdXQgPSAkc2NvcGUuc2VhcmNoSW5wdXQ7XHJcblx0XHRcdCRzY29wZS5pc1NlYXJjaCA9IHRydWU7XHJcblx0XHRcdGlmKCRzY29wZS5zZWFyY2hJbnB1dCl7XHJcblx0XHRcdFx0aWYoJHNjb3BlLnNlYXJjaE9wdGlvbiA9PT0nc24nKXtcclxuXHRcdFx0XHRcdGxldCBzbiA9ICRzY29wZS5zZWFyY2hJbnB1dC50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0VHJhdmVsZXIuc2VhcmNoTGlrZSgkc2NvcGUuc2VhcmNoSW5wdXQpXHJcblxyXG5cdFx0XHRcdFx0XHQuc3VjY2VzcyggZGF0YSA9PntcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUucmVzdWx0PWRhdGE7XHJcblx0XHRcdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQvLyBzZWFyY2ggZG9jIG51bVxyXG5cdFx0XHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCRzY29wZS5zZWFyY2hPcHRpb24sICRzY29wZS5zZWFyY2hJbnB1dClcclxuXHRcdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PntcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUucmVzdWx0PWRhdGE7XHJcblx0XHRcdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuZWRpdFRyYXZlbGVyID0gZnVuY3Rpb24oX2lkLCBmb3JtSWQpe1xyXG5cdFx0XHR3aW5kb3cub3BlbigndHJhdmVsZXI/X2lkPScrX2lkKycmZm9ybUlkPScrZm9ybUlkLCAnX2JsYW5rJyk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5yZW1vdmVUcmF2ZWxlciA9IGZ1bmN0aW9uKF9pZCwgaW5kZXgpe1xyXG5cdFx0XHRsZXQgZGF0YSA9e1xyXG5cdFx0XHRcdGlkTGlzdDpbXHJcblx0XHRcdFx0XHRfaWRcclxuXHRcdFx0XHRdXHJcblx0XHRcdH07XHJcblx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKGRhdGEpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoIGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gJHNjb3BlLnJlc3VsdD1kYXRhO1xyXG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUudGltZVNwZW5kID0gZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdGlmKGRhdGEucmV2aWV3QXQpe1xyXG5cdFx0XHRcdGxldCBkaWZmID0gTWF0aC5yb3VuZCgobmV3IERhdGUoZGF0YS5yZXZpZXdBdCkgLSBuZXcgRGF0ZShkYXRhLmNyZWF0ZUF0KSkvMTAwMCk7XHJcblx0XHRcdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kICs9IGRpZmY7XHJcblx0XHRcdFx0cmV0dXJuIGNhbHVsYXRlVGltZShkaWZmKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0bGV0IGRpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoZGF0YS5jcmVhdGVBdCkpLzEwMDApO1xyXG5cdFx0XHRcdCRzY29wZS50b3RhbFRpbWVTcGFuZCArPSBkaWZmO1xyXG5cdFx0XHRcdHJldHVybiBjYWx1bGF0ZVRpbWUoZGlmZik7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnRvdGFsVGltZVNwZW5kID0gZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdHJldHVybiA1O1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgY2FsdWxhdGVUaW1lID0gZnVuY3Rpb24oc2Vjb25kcyl7XHJcblx0XHRcdHJldHVybiBNYXRoLmZsb29yKHNlY29uZHMvNjAvNjApICsgJyBIb3VycyBhbmQgJyArIE1hdGguZmxvb3Ioc2Vjb25kcy82MCklNjAgKyBcclxuXHRcdFx0XHRcdCcgbWluIGFuZCAnICsgc2Vjb25kcyAlIDYwICsgJyBzZWMnO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyAkc2NvcGUucHJpbnRUcmF2ZWxlciA9IGZ1bmN0aW9uKGluZGV4KXtcclxuXHRcdC8vIFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9ICRzY29wZS5yZXN1bHRbaW5kZXhdO1xyXG5cdFx0XHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XHJcblx0XHQgLy8gICAgdmFyIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAnd2lkdGg9ODAwLGhlaWdodD04MDAsc2Nyb2xsYmFycz1ubyxtZW51YmFyPW5vLHRvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLHRpdGxlYmFyPW5vLHRvcD01MCcpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLndpbmRvdy5mb2N1cygpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcclxuXHRcdCAvLyAgICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZSgnPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPlRJVExFIE9GIFRIRSBQUklOVCBPVVQ8L3RpdGxlPicgK1xyXG5cdFx0IC8vICAgICAgICAnPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJsaWJzL2Jvb3NhdmVEb2NOdW10c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3NcIj4nICtcclxuXHRcdCAvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XHJcblx0XHQgLy8gICAgcG9wdXBXaW4uZG9jdW1lbnQuY2xvc2UoKTtcclxuXHRcdC8vIH1cclxuXHJcblx0XHR2YXIgZmluZFN0YXRpc3RpY3MgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuc3RhdCA9IHt9O1xyXG5cdFx0XHQkc2NvcGUucGllTGFiZWxzMT1bXTtcclxuXHRcdFx0JHNjb3BlLnBpZURhdGExID0gW107XHJcblx0XHRcdGxldCBkYXRhID0gJHNjb3BlLnJlc3VsdDtcclxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8ZGF0YS5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHRpZihkYXRhW2ldLnN0YXR1cyBpbiAkc2NvcGUuc3RhdCl7XHJcblx0XHRcdFx0XHQkc2NvcGUuc3RhdFtkYXRhW2ldLnN0YXR1c10gKz0xO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0JHNjb3BlLnBpZUxhYmVsczEucHVzaChkYXRhW2ldLnN0YXR1cyk7XHJcblx0XHRcdFx0XHQkc2NvcGUuc3RhdFtkYXRhW2ldLnN0YXR1c10gPTE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdCRzY29wZS5zdGF0LnRvdGFsID0gZGF0YS5sZW5ndGg7XHJcblx0XHRcdGxldCByZWplY3QgPSAwO1xyXG5cdFx0XHRsZXQgY29tcGxldGVkID0gMDtcclxuXHRcdFx0Ly8gY2FsdWxhdGUgcGVyY2VudCBvZiB0b3RhbCBjb21wbGF0ZWQgb3V0IG9mIHRvdGFsXHJcblx0XHRcdGlmKCRzY29wZS5zdGF0LlJFSkVDVCl7XHJcblx0XHRcdFx0cmVqZWN0ID0gJHNjb3BlLnN0YXQuUkVKRUNUO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZigkc2NvcGUuc3RhdC5DT01QTEVURUQpe1xyXG5cdFx0XHRcdGNvbXBsZXRlZCA9ICRzY29wZS5zdGF0LkNPTVBMRVRFRDtcclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuc3RhdC5wZWNDb21wbGV0ZSA9ICgoKGNvbXBsZXRlZCkrKHJlamVjdCkpLyhkYXRhLmxlbmd0aCkqMTAwKS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY2FsdWxhdGUgcGVyY2VudCBvZiByZWplY3Qgb3V0IG9mIHRvdGFsXHJcblx0XHRcdGlmKCgkc2NvcGUuc3RhdC5SRUpFQ1QpLyhkYXRhLmxlbmd0aCkqMTAwKXtcclxuXHRcdFx0XHQkc2NvcGUuc3RhdC5wZWNSZWplY3QgPSAoKHJlamVjdCkvKGRhdGEubGVuZ3RoKSoxMDApLnRvRml4ZWQoMik7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5zdGF0LnBlY1JlamVjdCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGZvcihsZXQgaT0wO2k8JHNjb3BlLnBpZUxhYmVsczEubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0JHNjb3BlLnBpZURhdGExLnB1c2goJHNjb3BlLnN0YXRbJHNjb3BlLnBpZUxhYmVsczFbaV1dKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JHNjb3BlLnBpZUxhYmVsczIgPSBbJ0ZpbmlzaCcsICdIb2xkJ107XHJcblx0XHRcdCRzY29wZS5waWVEYXRhMiA9IFtjb21wbGV0ZWQrcmVqZWN0LCAoJHNjb3BlLnN0YXQudG90YWwtKGNvbXBsZXRlZCtyZWplY3QpKV07XHJcblx0XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLmlzU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5zZWFyY2hPcHRpb24gPSAnZG9jTnVtJztcclxuXHRcdFx0JHNjb3BlLnNvcnRUeXBlID0gJ2NyZWF0ZUF0JztcclxuXHRcdFx0JHNjb3BlLnNvcnRSZXZlcnNlID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcclxuXHRcdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kID0gMDtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIG1haW4gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpbml0KCk7XHJcblx0XHR9O1xyXG5cdFx0bWFpbigpO1xyXG5cdH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnVHJhdmVsZXJDdHJsJywgW10pXHJcblx0XHJcblx0LmZpbHRlcigndW5pcXVlJywgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBrZXluYW1lKXtcclxuXHRcdFx0dmFyIG91dHB1dCA9IFtdLFxyXG5cdFx0XHRcdGtleXMgICA9IFtdO1xyXG5cclxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0pe1xyXG5cdFx0XHRcdHZhciBrZXkgPSBpdGVtW2tleW5hbWVdO1xyXG5cdFx0XHRcdGlmKGtleXMuaW5kZXhPZihrZXkpID09PSAtMSl7XHJcblx0XHRcdFx0XHRrZXlzLnB1c2goa2V5KTtcclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBvdXRwdXQ7XHJcblx0XHR9O1xyXG5cdH0pXHJcblx0XHJcblx0LmNvbnRyb2xsZXIoJ1RyYXZlbGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywnVHJhdmVsZXInLCAnRm9ybScsICdEb2NOdW0nLCAnQ291bnRlcicsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbigkc2NvcGUsIFRyYXZlbGVyLCBGb3JtLCBEb2NOdW0sIENvdW50ZXIsICRzdGF0ZVBhcmFtcyl7XHJcblxyXG5cdFx0JHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9PT0gJ1BBTkRJTkcgRk9SIFJFVklFVycpe1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ09QRU4nO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEucmVhZHlSZXZpZXcgPSBmYWxzZTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnUEFORElORyBGT1IgUkVWSUVXJztcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuc2F2ZSgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUudXBkYXRlRm9ybSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XHJcblx0XHRcdGlmKCRzY29wZS5mb3JtSWQpe1xyXG5cdFx0XHRcdEZvcm0uZ2V0KCRzY29wZS5mb3JtSWQpXHJcblx0XHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmZvcm1zID0gZGF0YTtcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBmaW5kIHRoZSBsYXN0IHN1YlN0ZXBcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmxhc3RTdGVwID0gZGF0YS5zdGVwcy5sZW5ndGg7XHJcblx0XHRcdFx0XHRcdC8vIGluaXQgdGhlIHRyYXZlbGVyRGF0YSBmcm9tIGZvcm1EYXRhXHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuZm9ybUlkID0gZGF0YS5faWQ7XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuZm9ybVJldiA9IGRhdGEuZm9ybVJldjtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtTm8gPSBkYXRhLmZvcm1ObztcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jdXN0b21lciA9IGRhdGEuY3VzdG9tZXI7XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ09QRU4nO1xyXG5cdFx0XHRcdFx0XHRsb2FkRG9jTnVtTGlzdChkYXRhLl9pZCwgKCk9Pnt9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS51cGRhdGVEb2NOdW0gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gW107XHJcblx0XHRcdCRzY29wZS5pc1dvcmtGaW5kID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9ICRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFskc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdF07XHJcblx0XHRcdGlmKCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0ICE9PSAnbmV3Jyl7XHJcblx0XHRcdFx0c2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0XHRcdGdldFNOTGlzdCgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuX2lkKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0ZGVsZXRlICRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY2FsbCBhIGZ1bmN0aW9uIHRvIHVzZSBkb2NudW0gdG8gcmV0dXJuIHRoZSBsaXN0IG9mIHNlcmlhbCBudW1iZXIgYXNzb2NpYXRlIHdpdGggXHJcblx0XHRcdC8vIHRoaXMgZG9jbnVtXHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5uZXh0U3RlcCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBvYmplY3QgPSAkc2NvcGUuZm9ybXMuc3RlcHNbJHNjb3BlLmN1cnJlbnRTdGVwLTFdO1xyXG5cdFx0XHRpZihvYmplY3QubGlzdC5sZW5ndGggPj0gJHNjb3BlLmN1cnJlbnRTdWJTdGVwKzEpe1xyXG5cdFx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCArPSAxO1x0XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5jdXJyZW50U3RlcCArPSAxO1xyXG5cdFx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XHJcblx0XHRcdFx0aWYoJHNjb3BlLmN1cnJlbnRTdGVwID4gJHNjb3BlLmxhc3RTdGVwKXtcclxuXHRcdFx0XHRcdC8vIFRyYXZlbGVyLnNldFJldmlld0RhdGEoJHNjb3BlLnRyYXZlbGVyRGF0YSk7XHJcblx0XHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gdHJ1ZTtcdFx0XHJcblx0XHRcdFx0XHQkc2NvcGUuY2hlY2tSZWFkeVJldmlldygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3RhdHVzUGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSBwYWdlO1xyXG5cdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XHJcblx0XHRcdC8vICRzY29wZS5jaGVja1JlYWR5UmV2aWV3KCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5zdGF0dXNTdWJQYWdlID0gZnVuY3Rpb24ocGFnZSl7XHJcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IHBhZ2U7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5nb0JhY2sgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSAxO1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5jaGVja1JlYWR5UmV2aWV3KCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oY2FsbGJhY2spe1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IGlkTGlzdCA9IFtdO1xyXG5cdFx0XHRmb3IobGV0IGkgPSAwO2kgPCAkc2NvcGUuc2VsZWN0U05MaXN0Lmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdGlkTGlzdC5wdXNoKCRzY29wZS5zZWxlY3RTTkxpc3RbaV0uX2lkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IGRhdGEgPSB7XHJcblx0XHRcdFx0aWRMaXN0IDogaWRMaXN0LFxyXG5cdFx0XHRcdHRyYXZlbGVyRGF0YTogJHNjb3BlLnRyYXZlbGVyRGF0YVxyXG5cdFx0XHR9O1xyXG5cdFx0XHQvLyBpZihpZExpc3QubGVuZ3RoID4gMSl7XHJcblx0XHRcdGRlbGV0ZSBkYXRhLnRyYXZlbGVyRGF0YS5zbjtcclxuXHRcdFx0Ly8gfVxyXG5cdFx0XHRUcmF2ZWxlci51cGRhdGVNdWx0aXBsZShkYXRhKVxyXG5cdFx0XHRcdC5zdWNjZXNzKGRhdGEgPT57XHJcblx0XHRcdFx0XHRpZihjYWxsYmFjaylcclxuXHRcdFx0XHRcdFx0Y2FsbGJhY2soZGF0YSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5yZXZpZXcgPSBmdW5jdGlvbihvcHRpb24pe1xyXG5cdFx0XHRpZigkc2NvcGUudHJhdmVsZXJEYXRhLnJldmlld0J5KXtcclxuXHRcdFx0XHRpZihvcHRpb24gPT09ICdyZWplY3QnKXtcclxuXHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ1JFSkVDVCc7XHJcblx0XHRcdFx0fWVsc2UgaWYob3B0aW9uID09PSAnY29tcGxldGUnKXtcclxuXHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ0NPTVBMRVRFRCc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEucmV2aWV3QXQgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0XHRcdCRzY29wZS5zYXZlKCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5jbG9zZUFsZXJ0KDAsJ2NsZWFyJyk7XHJcblx0XHRcdFx0JHNjb3BlLmFkZEFsZXJ0KCd3YXJuaW5nJywgJ0VudGVyIFJldmlld2VyIE5hbWUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoJHNjb3BlLnVzZXJuYW1lICYmICRzY29wZS50cmF2ZWxlckRhdGEuc24pe1xyXG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEuY29tcGxldGVkID0gZmFsc2U7XHJcblx0XHRcdFx0Ly8gc2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZCA9IHRydWU7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkQnkgPSAkc2NvcGUudXNlcm5hbWU7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVBdCA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdFx0VHJhdmVsZXIuY3JlYXRlKCRzY29wZS50cmF2ZWxlckRhdGEpXHJcblxyXG5cdFx0XHRcdFx0Ly8gaWYgc3VjY2Vzc2Z1bCBjcmVhdGVcclxuXHRcdFx0XHRcdC5zdWNjZXNzKCBkYXRhID0+e1xyXG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KCdzdWJtaXQgY29tcGxldGUnKTtcclxuXHRcdFx0XHRcdFx0c2hvdWxkQ29sbGFwc2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZW50ZXIgeW91ciBuYW1lIG9yIHNlcmlhbCBudW1iZXIgcGx6ICcpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5uZXcgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRyZXNldCgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdGlmKCRzY29wZS5zZWxlY3RTTkxpc3Qpe1xyXG5cdFx0XHRcdGlmKGNvbmZpcm0oJ2RlbGV0ZT8nKSl7XHJcblx0XHRcdFx0XHRsZXQgaWRMaXN0ID0gW107XHJcblx0XHRcdFx0XHRmb3IobGV0IGkgPSAwO2kgPCAkc2NvcGUuc2VsZWN0U05MaXN0Lmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdFx0XHRpZExpc3QucHVzaCgkc2NvcGUuc2VsZWN0U05MaXN0W2ldLl9pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRsZXQgZGF0YSA9IHtcclxuXHRcdFx0XHRcdFx0XCJpZExpc3RcIjogaWRMaXN0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRUcmF2ZWxlci5yZW1vdmVUcmF2ZWxlcihkYXRhKVxyXG5cdFx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+IHtcclxuXHRcdFx0XHRcdFx0XHRyZXNldCgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmFwcGVuZFN1YlN0ZXBFZGl0SW5mbyA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciB1c2VybmFtZSA9ICRzY29wZS51c2VybmFtZTtcclxuXHRcdFx0aWYodXNlcm5hbWUgIT09ICcnKXtcclxuXHRcdFx0XHR2YXIgY3VycmVudFN0ZXAgPSAkc2NvcGUuY3VycmVudFN0ZXA7XHJcblx0XHRcdFx0dmFyIGN1cnJlbnRTdWJTdGVwID0gJHNjb3BlLmN1cnJlbnRTdWJTdGVwO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RlcFtjdXJyZW50U3RlcF1bY3VycmVudFN1YlN0ZXBdLmVkaXRCeSA9IHVzZXJuYW1lO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RlcFtjdXJyZW50U3RlcF1bY3VycmVudFN1YlN0ZXBdLmVkaXRUaW1lID0gbmV3IERhdGUoKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuY2xvc2VBbGVydCgwLCdjbGVhcicpO1xyXG5cdFx0XHQkc2NvcGUuYWRkQWxlcnQoJ3dhcm5pbmcnLCAnRW50ZXIgeW91ciBOYW1lJyk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnByaW50VHJhdmVsZXIgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XHJcblx0XHQgLy8gICAgdmFyIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAnd2lkdGg9ODAwLGhlaWdodD04MDAsc2Nyb2xsYmFycz1ubyxtZW51YmFyPW5vLHRvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLHRpdGxlYmFyPW5vLHRvcD01MCcpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLndpbmRvdy5mb2N1cygpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcclxuXHRcdCAvLyAgICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZSgnPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPlRJVExFIE9GIFRIRSBQUklOVCBPVVQ8L3RpdGxlPicgK1xyXG5cdFx0IC8vICAgICAgICAnPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJsaWJzL2Jvb3NhdmVEb2NOdW10c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3NcIj4nICtcclxuXHRcdCAvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XHJcblx0XHQgLy8gICAgcG9wdXBXaW4uZG9jdW1lbnQuY2xvc2UoKTtcclxuXHRcdFx0d2luZG93LnByaW50KCk7XHJcblx0XHR9O1xyXG5cclxuXHJcblx0XHQkc2NvcGUuc2F2ZURvY051bSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5mb3JtSWQgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZDtcclxuXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmZvcm1SZXYgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXY7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5mb3JtTm8gPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObztcclxuXHRcdFx0c2V0RG9jTnVtTGFiZWwoJ2NyZWF0ZScpO1xyXG5cdFx0XHRkZWxldGUgJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZDtcclxuXHRcdFx0RG9jTnVtLmNyZWF0ZSgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRsb2FkRG9jTnVtTGlzdCgkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCwgKGxpc3QpPT57XHJcblx0XHRcdFx0XHRcdGZvcihsZXQgaT0wOyBpPGxpc3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0aWYobGlzdFtpXS5faWQgPT09IGRhdGEuX2lkKXtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZCA9IHtcImRvY051bVwiOiRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW19O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmVkaXREb2NOdW0gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQvLyBzZXREb2NOdW1MYWJlbCgnZWRpdCcpO1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEpKTtcclxuXHRcdFx0RG9jTnVtLmVkaXREb2NOdW1EYXRhKCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSlcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGxvYWREb2NOdW1MaXN0KCRzY29wZS50cmF2ZWxlckRhdGEuZm9ybUlkLCAoKT0+e30pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuY2hlY2tGb3JTTiA9IGZ1bmN0aW9uKGlucHV0KXtcclxuXHJcblx0XHRcdGlmKGlucHV0KXtcclxuXHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0TW9yZVRoYW5PbmUgPSBmYWxzZTtcclxuXHRcdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJ3NufGZvcm1JZCcsIGlucHV0Kyd8Jyskc2NvcGUuZm9ybUlkLCAnc24nKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YT0+e1xyXG5cdFx0XHRcdFx0XHRpZihkYXRhLmxlbmd0aD4wKXtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0TW9yZVRoYW5PbmUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdGlmKGNvbmZpcm0oJ1NOIGFscmVhZHkgZXhpc3QuIGRvIHlvdSB3YW50IHRvIGNyZWF0ZSBhIG5ldyB0cmF2ZWxlciB3aXRoIHNhbWUgc24/Jykpe1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdE1vcmVUaGFuT25lID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZighJHNjb3BlLmlzU05FeGlzdE1vcmVUaGFuT25lKXtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0TW9yZVRoYW5PbmUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRsZXQgaXRlbSA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdFwic25cIjogaW5wdXQsXHJcblx0XHRcdFx0XHRcdFx0XHRcInN0YXR1c1wiOiBcIk9QRU5cIixcclxuXHRcdFx0XHRcdFx0XHRcdFwiY3JlYXRlQXRcIjogbmV3IERhdGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcIml0ZW1SZWNvcmRcIjp7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFwiZG9jTnVtSWRcIjogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XCJkb2NOdW1cIjogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmRvY051bVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0Y3JlYXRlTmV3VHJhdmVsZXIoaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0aW5wdXQgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRpdGVtID0ge307XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUubW92ZVRvU2VsZWN0U05MaXN0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJHNjb3BlLlNOTGlzdEZvckRvY051bS5sZW5ndGgpO1xyXG5cdFxyXG5cdFx0XHRsZXQgc3RhY2sgPSBbXTtcclxuXHRcdFx0Zm9yKGxldCBpPSRzY29wZS5TTkxpc3RGb3JEb2NOdW0ubGVuZ3RoO2kgPiAwO2ktLSl7XHJcblx0XHRcdFx0bGV0IGVsID0gJHNjb3BlLlNOTGlzdEZvckRvY051bS5wb3AoKTtcclxuXHRcdFx0XHRpZihlbC5jaGVja2JveCA9PT0gdHJ1ZSl7XHJcblx0XHRcdFx0XHRlbC5jaGVja2JveCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKGVsKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHN0YWNrLnB1c2goZWwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuU05MaXN0Rm9yRG9jTnVtID0gc3RhY2s7XHJcblx0XHRcdHN0YWNrID0gbnVsbDtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLm1vdmVUb1NOTGlzdEZvckRvY051bSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGxldCBzdGFjayA9IFtdO1xyXG5cdFx0XHRmb3IobGV0IGkgPSRzY29wZS5zZWxlY3RTTkxpc3QubGVuZ3RoOyBpPjA7aS0tKXtcclxuXHRcdFx0XHRsZXQgZWwgPSAkc2NvcGUuc2VsZWN0U05MaXN0LnBvcCgpO1xyXG5cdFx0XHRcdGlmKGVsLmNoZWNrYm94ID09PSAgdHJ1ZSl7XHJcblx0XHRcdFx0XHRlbC5jaGVja2JveCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0JHNjb3BlLlNOTGlzdEZvckRvY051bS5wdXNoKGVsKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHN0YWNrLnB1c2goZWwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gc3RhY2s7XHJcblx0XHRcdHN0YWNrID0gbnVsbDtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnNlbGVjdEFsbExpc3QgPSBmdW5jdGlvbihsaXN0KXtcclxuXHRcdFx0bGV0IGJvb2wgPSBsaXN0WzBdLmNoZWNrYm94O1xyXG5cdFx0XHRmb3IobGV0IGk9MDtpPGxpc3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0bGlzdFtpXS5jaGVja2JveCA9ICFib29sO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5sb2FkVHJhdmVsZXIgPSBmdW5jdGlvbihpbnB1dCl7XHJcblx0XHRcdGlmKGlucHV0KXtcclxuXHRcdFx0XHQkc2NvcGUuc2VsZWN0U04gPSBpbnB1dDtcclxuXHRcdFx0fVxyXG5cdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJ19pZCcsICRzY29wZS5zZWxlY3RTTilcclxuXHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+e1xyXG5cdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IGRhdGFbMF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnNlYXJjaFNOID0gZnVuY3Rpb24oc24pe1xyXG5cclxuXHRcdFx0aWYoc24pe1xyXG5cdFx0XHRcdCRzY29wZS5zZWFyY2hTTkxpc3Q9IFtdO1xyXG5cdFx0XHRcdCRzY29wZS5jbGVhckFmdGVyQ2hhbmdlVGFiKCk7XHJcblx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdCA9IFtdO1xyXG5cdFx0XHRcdFRyYXZlbGVyLm5vcm1hbFNlYXJjaCgnc258Zm9ybUlkJywgc24rJ3wnKyRzY29wZS5mb3JtSWQsICdzbnxjcmVhdGVBdHxzdGF0dXMnKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PntcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5pc1NOTW9yZVRoYW5PbmUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0aWYoZGF0YS5sZW5ndGggPiAxKXtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuaXNTTk1vcmVUaGFuT25lID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoU05MaXN0ID0gZGF0YTtcclxuXHRcdFx0XHRcdFx0fWVsc2UgaWYoZGF0YS5sZW5ndGggPT0gMSl7XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKHtcIl9pZFwiOmRhdGFbMF0uX2lkLCBcInNuXCI6ZGF0YVswXS5zbn0pO1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5zZWxlY3RTTiA9IGRhdGFbMF0uX2lkO1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5sb2FkVHJhdmVsZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRsb2FkSXRlbVJlY29yZChkYXRhWzBdLmZvcm1JZCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gJHNjb3BlLmlzU3RhcnRXb3JrID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc2V0VHJhdmVsZXJEYXRhID0gZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdCRzY29wZS5zZWxlY3RTTkxpc3QgPSBbXTtcclxuXHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKHtcIl9pZFwiOiRzY29wZS5zZWFyY2hTTkxpc3RbZGF0YV0uX2lkLCBcInNuXCI6ICRzY29wZS5zZWFyY2hTTkxpc3RbZGF0YV0uc259KTtcclxuXHRcdFx0JHNjb3BlLnNlbGVjdFNOID0gJHNjb3BlLnNlYXJjaFNOTGlzdFtkYXRhXS5faWQ7XHJcblx0XHRcdCRzY29wZS5sb2FkVHJhdmVsZXIoKTtcclxuXHRcdFx0bG9hZEl0ZW1SZWNvcmQoKTtcclxuXHRcdFx0Ly8gJHNjb3BlLmlzU3RhcnRXb3JrID0gdHJ1ZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmNyZWF0ZVdvcmsgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkc2NvcGUuc2VsZWN0U05MaXN0Lmxlbmd0aCA+IDApe1xyXG5cdFx0XHRcdENvdW50ZXIubmV4dFNlcXVlbmNlVmFsdWUoe25hbWU6J3dvcmtOdW0nfSlcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGRhdGE9PntcclxuXHRcdFx0XHRcdFx0aWYoZGF0YSl7XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmNsb3NlQWxlcnQoMCwnY2xlYXInKTtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuYWRkQWxlcnQoJ2luZm8nLCAnR3JvdXAgbnVtYmVyICcgK2RhdGEuc2VxdWVuY2VfdmFsdWUrICcgY3JlYXRlZCcpO1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEud29ya051bSA9IGRhdGEuc2VxdWVuY2VfdmFsdWUudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHRzZXROdW1Eb2N0b1RyYXZlbGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLnNhdmUoKTtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoV29ya051bShkYXRhLnNlcXVlbmNlX3ZhbHVlKTtcclxuXHRcdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdFx0Q291bnRlci5jcmVhdGUoXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwid29ya051bVwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcInNlcXVlbmNlX3ZhbHVlXCI6MFxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdCkuc3VjY2VzcyhkYXRhPT57XHJcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuY3JlYXRlV29yaygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc2VhcmNoV29ya051bSA9IGZ1bmN0aW9uKGlucHV0KXtcclxuXHRcdFx0JHNjb3BlLmlzV29ya0ZpbmQgPWZhbHNlO1xyXG5cdFx0XHQkc2NvcGUuY2xlYXJBZnRlckNoYW5nZVRhYigpO1xyXG5cdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJ3dvcmtOdW0nLCBpbnB1dCwgJ3NufGNyZWF0ZUF0fHN0YXR1c3x3b3JrTnVtfGZvcm1JZHxpdGVtUmVjb3JkLmRvY051bUlkfGl0ZW1SZWNvcmQuZG9jTnVtJylcclxuXHRcdFx0XHQuc3VjY2VzcyhkYXRhPT57XHJcblx0XHRcdFx0XHQkc2NvcGUuc2VsZWN0U05MaXN0ID0gZGF0YTtcclxuXHRcdFx0XHRcdGlmKGRhdGEubGVuZ3RoPjApe1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuaXNXb3JrRmluZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGFbJ2l0ZW1SZWNvcmQnXSA9IHtcclxuXHRcdFx0XHRcdFx0XHRkb2NOdW1JZDpkYXRhWzBdLml0ZW1SZWNvcmQuZG9jTnVtSWQsXHJcblx0XHRcdFx0XHRcdFx0ZG9jTnVtOmRhdGFbMF0uaXRlbVJlY29yZC5kb2NOdW1cclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0bG9hZEl0ZW1SZWNvcmQoZGF0YVswXS5mb3JtSWQpO1xyXG5cclxuXHRcdFx0XHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdpdGVtUmVjb3JkLmRvY051bUlkJywgZGF0YVswXS5pdGVtUmVjb3JkLmRvY051bUlkLCAnc258d29ya051bXxzdGF0dXN8Y3JlYXRlQXQnKVxyXG5cdFx0XHRcdFx0XHRcdC5zdWNjZXNzKGRhdGE9PntcclxuXHRcdFx0XHRcdFx0XHRcdGlmKGRhdGEubGVuZ3RoPjApe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IobGV0IGkgPTA7IGkgPCBkYXRhLmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCFkYXRhW2ldLndvcmtOdW0gfHxkYXRhW2ldLndvcmtOdW0gIT09IGlucHV0LnRvU3RyaW5nKCkpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLlNOTGlzdEZvckRvY051bS5wdXNoKGRhdGFbaV0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuY2xlYXJBZnRlckNoYW5nZVRhYiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5zZWxlY3RTTkxpc3QgPSBbXTtcclxuXHRcdFx0JHNjb3BlLlNOTGlzdEZvckRvY051bT1bXTtcclxuXHRcdFx0JHNjb3BlLmlzU3RhcnRXb3JrID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5pc1dvcmtGaW5kID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0ID0gJ25ldyc7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IHt9O1xyXG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZWQgPSBmYWxzZTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdCRzY29wZS5jcmVhdGVUcmF2ZWxlciA9IGZ1bmN0aW9uKHNuKXtcclxuXHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IGZhbHNlO1xyXG5cdFx0XHRpZigkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9PT0gJ25ldycpe1xyXG5cdFx0XHRcdCRzY29wZS5jbG9zZUFsZXJ0KDAsJ2NsZWFyJyk7XHJcblx0XHRcdFx0JHNjb3BlLmFkZEFsZXJ0KCd3YXJuaW5nJywgJ1NlbGVjdCBhIERvY3VtZW50IE51bWJlcicpO1xyXG5cdFx0XHRcdCRzY29wZS5pc0NvbGxhcHNlZEl0ZW1SZWNvcmQgPSBmYWxzZTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0bGV0IGlzV2FudENyZWF0ZSA9IHRydWU7XHJcblx0XHRcdFx0Y2hlY2tTTkV4aXN0REIoc24sXHJcblx0XHRcdFx0XHQocmVzdWx0KT0+e1xyXG5cdFx0XHRcdFx0XHRpZihyZXN1bHQpe1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCFjb25maXJtKCdTYW1lIFNlcmlhbCBudW1iZXIgYWxyZWFkeSBleGlzdCBpbiB0aGUgZGF0YWJhc2UuIENyZWF0ZSBhIG5ldyBUcmF2ZWxlciB3aXRoIHNhbWUgU2VyaWFsIE51bWJlcj8nKSl7XHJcblx0XHRcdFx0XHRcdFx0XHRpc1dhbnRDcmVhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYoaXNXYW50Q3JlYXRlKXtcclxuXHRcdFx0XHRcdFx0XHRsZXQgaXRlbSA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdFwic25cIjogc24sXHJcblx0XHRcdFx0XHRcdFx0XHRcInN0YXR1c1wiOiBcIk9QRU5cIixcclxuXHRcdFx0XHRcdFx0XHRcdFwiY3JlYXRlQXRcIjogbmV3IERhdGVcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5ld1RyYXZlbGVyKGl0ZW0sIChkYXRhKT0+e1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmNsb3NlQWxlcnQoMCwnY2xlYXInKTtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5pc0NvbGxhcHNlZEl0ZW1SZWNvcmQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdCA9IFtdO1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XCJfaWRcIjpkYXRhLl9pZCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XCJzblwiOmRhdGEuc25cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnNhdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vICRzY29wZS5pc1N0YXJ0V29yayA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3RhcnRXb3JrID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLmlzU3RhcnRXb3JrID0gdHJ1ZTtcclxuXHRcdFx0JHNjb3BlLnRvcENvbGxhcHNlID0gdHJ1ZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmFkZEFsZXJ0ID0gZnVuY3Rpb24odHlwZSwgbXNnKXtcclxuXHRcdFx0JHNjb3BlLmFsZXJ0cy5wdXNoKFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFwidHlwZVwiOiB0eXBlLFxyXG5cdFx0XHRcdFx0XCJtc2dcIiA6IG1zZ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmNsb3NlQWxlcnQgPSBmdW5jdGlvbihpbmRleCwgYWN0aW9uKXtcclxuXHRcdFx0aWYoYWN0aW9uID09PSAnY2xlYXInKXtcclxuXHRcdFx0XHQkc2NvcGUuYWxlcnRzID0gW107XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5hbGVydHMuc3BsaWNlKGluZGV4LDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBjaGVja1NORXhpc3REQiA9IGZ1bmN0aW9uKHNuLCBjYWxsYmFjayl7XHJcblx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSBmYWxzZTtcclxuXHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdzbnxmb3JtSWQnLCBzbisnfCcrJHNjb3BlLmZvcm1JZCwgJ3NuJylcclxuXHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+IHtcclxuXHRcdFx0XHRcdGlmKGRhdGEubGVuZ3RoID4gMCl7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y2FsbGJhY2soJHNjb3BlLmlzU05FeGlzdCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBjcmVhdGVOZXdUcmF2ZWxlciA9IGZ1bmN0aW9uKGl0ZW0sIGNhbGxiYWNrKXtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coaXRlbS5zbik7XHJcblx0XHRcdGlmKCRzY29wZS51c2VybmFtZSl7XHJcblx0XHRcdFx0ZGVsZXRlICRzY29wZS50cmF2ZWxlckRhdGEuX2lkO1xyXG5cdFx0XHRcdGRlbGV0ZSAkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXA7XHJcblx0XHRcdFx0ZGVsZXRlICRzY29wZS50cmF2ZWxlckRhdGEud29ya051bTtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnNuID0gaXRlbS5zbjtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQgPSBpdGVtLml0ZW1SZWNvcmQ7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZWRCeSA9ICRzY29wZS51c2VybmFtZTtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZUF0ID0gaXRlbS5jcmVhdGVBdDtcclxuXHRcdFx0XHRUcmF2ZWxlci5jcmVhdGUoJHNjb3BlLnRyYXZlbGVyRGF0YSlcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtLl9pZCA9IGRhdGEuX2lkO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuU05MaXN0Rm9yRG9jTnVtLnB1c2goaXRlbSk7XHJcblx0XHRcdFx0XHRcdGlmKGNhbGxiYWNrKXtcclxuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhkYXRhKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGdldFNOTGlzdCA9IGZ1bmN0aW9uKGlucHV0KXtcclxuXHRcdFx0VHJhdmVsZXIubm9ybWFsU2VhcmNoKCdpdGVtUmVjb3JkLmRvY051bUlkJywgaW5wdXQsICdzbnxzdGF0dXN8Y3JlYXRlQXR8d29ya051bScpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PntcclxuXHRcdFx0XHRcdCRzY29wZS5TTkxpc3RGb3JEb2NOdW0gPSBkYXRhO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgc2hvdWxkQ29sbGFwc2UgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkc2NvcGUudHJhdmVsZXJEYXRhLnNuICAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQuZG9jTnVtKXtcclxuXHRcdFx0XHQkc2NvcGUudG9wQ29sbGFwc2UgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBzZXROdW1Eb2N0b1RyYXZlbGVyID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5pdGVtUmVjb3JkID0ge1xyXG5cdFx0XHRcdFx0XCJkb2NOdW1JZFwiOiAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuX2lkLFxyXG5cdFx0XHRcdFx0XCJkb2NOdW1cIiAgOiAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtXHJcblx0XHRcdFx0fTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHNldERvY051bUxhYmVsID0gZnVuY3Rpb24oYWN0aW9uKXtcclxuXHJcblx0XHRcdGxldCBjb3VudCA9IDE7XHJcblx0XHRcdGlmKGFjdGlvbiA9PT0gJ2NyZWF0ZScpe1xyXG5cdFx0XHRcdGZvcihsZXQgaT0wOyBpPCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdC5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHRcdGlmKCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFtpXS5kb2NOdW0gPT09ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW0pe1xyXG5cdFx0XHRcdFx0XHRjb3VudCArPSAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYoYWN0aW9uID09PSAnZWRpdCcpe1xyXG5cdFx0XHQvLyBcdGZvcihsZXQgaT0wOyBpPCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdC5sZW5ndGg7aSsrKXtcclxuXHRcdFx0Ly8gXHRcdGlmKCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFtpXS5kb2NOdW0gPT09ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW0gJiZcclxuXHRcdFx0Ly8gXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0W2ldLl9pZCAhPT0gJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZCl7XHJcblx0XHRcdC8vIFx0XHRcdGNvdW50ICs9IDE7XHJcblx0XHRcdC8vIFx0XHR9XHJcblx0XHRcdC8vIFx0fVxyXG5cdFx0XHQvLyB9XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5sYWJlbCA9IGNvdW50O1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgbG9hZEZvcm1MaXN0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Rm9ybS5nZXRGb3JtTGlzdCgpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHQkc2NvcGUuZm9ybUxpc3QgPSBkYXRhO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cclxuXHRcdHZhciByZXNldCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xyXG5cdFx0XHQkc2NvcGUuZm9ybUlkID0gJyc7XHJcblx0XHRcdCRzY29wZS5pc05ldyA9IHRydWU7XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBsb2FkRG9jTnVtTGlzdCA9IGZ1bmN0aW9uKGlkLCBjYWxsYmFjayl7XHJcblx0XHRcdERvY051bS5nZXREb2NOdW1MaXN0KGlkKVxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0ID0gZGF0YTtcclxuXHRcdFx0XHRcdGNhbGxiYWNrKGRhdGEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBsb2FkIGluZm9ybWF0aW9uIGZvciBJdGVtUmVjb3JkIHdpdGggXHJcblx0XHQvLyBkb2NOdW0uIFxyXG5cdFx0dmFyIGxvYWRJdGVtUmVjb3JkID0gZnVuY3Rpb24oZm9ybUlkKXtcclxuXHRcdFx0aWYoIWZvcm1JZCl7XHJcblx0XHRcdFx0Zm9ybUlkID0gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0RG9jTnVtLmdldERvY051bUxpc3QoZm9ybUlkKVxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0Zm9yKGxldCBpPTA7IGk8ZGF0YS5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHRcdFx0aWYoZGF0YVtpXS5faWQgPT09ICRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZC5kb2NOdW1JZCl7XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhID0gZGF0YVtpXTtcclxuXHRcdFx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUudG9wQ29sbGFwc2U9ZmFsc2U7XHJcblx0XHRcdCRzY29wZS51c2VybmFtZSA9ICdKb2huIFNub3cnO1xyXG5cdFx0XHQkc2NvcGUuZG9jTnVtID0ge307XHJcblx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSB0cnVlO1xyXG5cdFx0XHQkc2NvcGUuaXNTTkV4aXN0TW9yZVRoYW5PbmUgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLmlzU05Nb3JlVGhhbk9uZSA9IGZhbHNlO1xyXG5cdFx0XHQkc2NvcGUuc2VhcmNoU05MaXN0ID0gW107XHJcblx0XHRcdCRzY29wZS5zZWxlY3RTTiA9ICcnO1xyXG5cdFx0XHQkc2NvcGUuU05MaXN0Rm9yRG9jTnVtID0gW107XHJcblx0XHRcdCRzY29wZS5zZWxlY3RTTkxpc3QgPSBbXTtcclxuXHRcdFx0JHNjb3BlLmlzVXNlV29ya051bSA9IGZhbHNlO1xyXG5cdFx0XHQkc2NvcGUuaXNTdGFydFdvcmsgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLnNlbGVjdFNlYXJjaFNOPScwJztcclxuXHRcdFx0JHNjb3BlLmlzV29ya0ZpbmQgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLmlucHV0PXt9O1xyXG5cdFx0XHQkc2NvcGUuaXNDb2xsYXBzZWQgPSB0cnVlO1xyXG5cdFx0XHQvLyAkc2NvcGUuaXNDb2xsYXBzZWRTZWxlY3RTTkxpc3QgPSB0cnVlO1xyXG5cdFx0XHQkc2NvcGUuaXNDb2xsYXBzZUhlYWRlclNOTGlzdCA9IHRydWU7XHJcblx0XHRcdCRzY29wZS5pc1NlYXJjaENsaWNrID0gdHJ1ZTtcclxuXHRcdFx0JHNjb3BlLmlzQ29sbGFwc2VkSXRlbVJlY29yZCA9IHRydWU7XHJcblx0XHRcdCRzY29wZS5hbGVydHMgPSBbXTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIG1haW4gPSBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0aW5pdCgpO1xyXG5cdFx0XHRyZXNldCgpO1xyXG5cdFx0XHRsb2FkRm9ybUxpc3QoKTtcclxuXHJcblx0XHRcdGlmKCRzdGF0ZVBhcmFtcy5mb3JtSWQpe1xyXG5cdFx0XHRcdCRzY29wZS5mb3JtSWQgPSAkc3RhdGVQYXJhbXMuZm9ybUlkO1xyXG5cdFx0XHRcdCRzY29wZS51cGRhdGVGb3JtKCk7XHJcblx0XHRcdFx0JHNjb3BlLmlzTmV3ID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGxvYWQgdGhlIHRyYXZlbGVyIGZyb20gU2VhcmNoIHBhZ2VcclxuXHRcdFx0Ly8gdGFrZSB0aGUgcHJhbWFzIGZyb20gVVJMXHJcblx0XHRcdGlmKCRzdGF0ZVBhcmFtcy5faWQpe1xyXG5cdFx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xyXG5cdFx0XHRcdFRyYXZlbGVyLmdldCgnX2lkJywgJHN0YXRlUGFyYW1zLl9pZClcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0XHQvLyBkYXRhIGlzIGEgYXJyYXkuIHJlc3VsdCBjb3VsZCBiZSBtb3JlIHRoYW4gb25lXHJcblx0XHRcdFx0XHRcdC8vIG5lZWQgdG8gZGVhbCB3aXQgdGhpcy5cclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGxvYWRJdGVtUmVjb3JkKGRhdGEuZm9ybUlkKTtcclxuXHRcdFx0XHRcdFx0c2hvdWxkQ29sbGFwc2UoKTtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdFNOTGlzdC5wdXNoKHtcIl9pZFwiOmRhdGEuX2lkLCBcInNuXCI6ZGF0YS5zbn0pO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuaXNTdGFydFdvcmsgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9O1xyXG5cclxuXHRcdG1haW4oKTtcclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdDb3VudGVyU2VydmljZScsIFtdKVxyXG5cdFxyXG5cdC5mYWN0b3J5KCdDb3VudGVyJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG5leHRTZXF1ZW5jZVZhbHVlOmZ1bmN0aW9uKGlucHV0KXtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NvdW50ZXIvbmV4dFNlcXVlbmNlVmFsdWUvJywgaW5wdXQpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjcmVhdGU6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCdhcGkvY291bnRlci9jcmVhdGUnLCBkYXRhKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0RvY051bVNlcnZpY2UnLCBbXSlcclxuXHRcclxuXHQuZmFjdG9yeSgnRG9jTnVtJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXREb2NOdW1MaXN0OiBmdW5jdGlvbihmb3JtSWQpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9jTnVtcy8nK2Zvcm1JZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNyZWF0ZTogZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvZG9jTnVtcy8nLGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlZGl0RG9jTnVtRGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9kb2NOdW1zLycsIGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRnZXREb2NOdW06IGZ1bmN0aW9uKHR5cGUsIGRhdGEpe1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdkIHNlcnZpY2UnKTtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RvY051bXMvc2VhcmNoU2luZ2xlP3R5cGU9Jyt0eXBlKycmZGF0YT0nK2RhdGEpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnRm9ybVNlcnZpY2UnLCBbXSlcclxuXHJcblx0LmZhY3RvcnkoJ0Zvcm0nLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApe1xyXG5cclxuXHRcdHJldHVybiB7XHJcblxyXG5cdFx0XHRjcmVhdGU6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Zvcm1zJywgZGF0YSk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRnZXRBbGw6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9mb3Jtcy8nKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGdldEZvcm1MaXN0OiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZm9ybXMvZm9ybUxpc3QnKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGdldDogZnVuY3Rpb24oZm9ybUlkKXtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zL3NlYXJjaC8nK2Zvcm1JZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNhdmU6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvZm9ybXMnLCBkYXRhKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGVsZXRlOiBmdW5jdGlvbihmb3JtSWQpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvZm9ybXMvJytmb3JtSWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ1RyYXZlbGVyU2VydmljZScsIFtdKVxyXG4gICAgICAgXHJcbiAgICAuZmFjdG9yeSgnVHJhdmVsZXInLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApe1xyXG5cclxuICAgICAgICB2YXIgcmV2aWV3RGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG5cdFxyXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIHdvcmsgd2hlbiBtb3JlIEFQSSByb3V0ZXMgYXJlIGRlZmluZWQgb24gdGhlIE5vZGUgc2lkZSBvZiB0aGluZ3NcclxuICAgICAgICAgICAgLy8gY2FsbCB0byBQT1NUIGFuZCBjcmVhdGUgYSBuZXcgZm9ybVxyXG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKGZvcm1EYXRhKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS90cmF2ZWxlcicsIGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgfSwgXHJcblxyXG4gICAgICAgICAgICBnZXRSZXZpZXdEYXRhOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGE7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHR5cGUsIGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90cmF2ZWxlcj90eXBlPScrdHlwZSsnJmRhdGE9JytkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlcicsIGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgc2V0UmV2aWV3RGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICByZXZpZXdEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNlYXJjaExpa2U6IGZ1bmN0aW9uKHNuKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL3NlYXJjaExpa2UvJysgc24pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBjYWxsIHRvIERFTEVURSBmb3Jtc1xyXG4gICAgICAgICAgICByZW1vdmVUcmF2ZWxlcjogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdHJhdmVsZXIvZGVsZXRlVHJhdmVsZXInLCBkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbm9ybWFsU2VhcmNoOiBmdW5jdGlvbih0eXBlLCBkYXRhLCBzZWxlY3Qpe1xyXG4gICAgICAgICAgICAgICAgaWYoIXNlbGVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL25vcm1hbFNlYXJjaD90eXBlPScrdHlwZSsnJmRhdGE9JytkYXRhKycmc2VsZWN0PScrc2VsZWN0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXBkYXRlTXVsdGlwbGU6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlci91cGRhdGVNdWx0aXBsZScsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblx0fTtcdFx0XHJcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
