"use strict";angular.module("sampleApp",["ui.router","ui.bootstrap","appRoutes","dndLists","AppCtrl","MainCtrl","TravelerCtrl","SearchTravelerCtrl","FormGenCtrl.js","TravelerService","FormService","DocNumService"]),angular.module("appRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"views/home.html",controller:"MainController"}).state("traveler",{url:"/traveler?_id&formId",views:{"":{templateUrl:"views/traveler.html",controller:"TravelerController"},"formReview@traveler":{templateUrl:"views/formReview.html"}}}).state("searchTraveler",{url:"/searchTraveler",views:{"":{templateUrl:"views/searchTraveler.html",controller:"SearchTravelerController"},"formReview@searchTraveler":{templateUrl:"views/formReview.html"}}}).state("formGenerator",{url:"/formGenerator",views:{"":{templateUrl:"views/formGeneratorNav.html",controller:"FormGeneratorController"},"templateGenerator@formGenerator":{templateUrl:"views/templateGenerator.html",controller:"FormGeneratorController"},"templateCreator@formGenerator":{templateUrl:"views/templateCreator.html",controller:"FormGeneratorController"}}}),r.html5Mode(!0)}]),angular.module("AppCtrl",["ngAnimate"]).controller("AppController",["$scope",function(e){e.isCollapsed=!0}]);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};angular.module("FormGenCtrl.js",["ui.bootstrap.tabs"]).controller("FormGeneratorController",["$scope","Form",function(e,t){e.submit=function(r){r&&""!==r||(r=prompt("password")),"123"===r?t.create(e.template).success(function(t){alert("add"),e.create=t,delete e.template}):alert("go home son")},e.save=function(){var r=prompt("password");"123"===r?e.create._id?t.save(e.create).success(function(e){alert("save")}):(e.template=e.create,e.submit(r)):alert("go home")},e["delete"]=function(){var a=prompt("password");"QQmore"===a?confirm("delete template?")&&(e.create._id&&t["delete"](e.create._id).success(function(e){alert("removed")}),r()):alert("go home")},e.setSelectTab=function(t){e.selectTab=t},e.addItemRecord=function(){if(e.inputItemRecord&&""!==e.inputItemRecord){e.create.itemRecord||(e.create.itemRecord=[]);var t=e.create.itemRecord.length,r={id:t+1,Description:e.inputItemRecord};if("select"===e.inputItemRecordType){var a=e.selectOptions;a=a.split(",");for(var o=0;o<a.length;o++)a[o]=a[o].trim();a=Array.from(new Set(a)),r.select={name:""},r.select.options=a}e.create.itemRecord.push(r),e.inputItemRecord=""}},e.addStep=function(){e.create.steps||(e.create.steps=[]);var t=e.create.steps.length,r={step:t+1,type:e.inputStepType||"",Description:e.inputStepDes||""};e.create.steps.push(r),e.inputStepDes=""},e.addSubStep=function(){if(e.tempSub.inputSubStepDes&&""!==e.tempSub.inputSubStepDes){var t=e.tempSub.selectStepForSubStep;e.create.steps[t].list||(e.create.steps[t].list=[]);var r=e.create.steps[t].list.length,a={sub_step:r+1,Description:e.tempSub.inputSubStepDes};e.create.steps[t].list.push(a),e.tempSub.inputSubStepDes=""}},e.addSubOption=function(){for(var t=e.tempSubOption.selectSubForOption.split(",")[0],r=e.tempSubOption.selectSubForOption.split(",")[1],a=e.tempSubOption.subOptions.selectSubOption,o=e.tempSubOption.subOptions.option.input.split(","),n=0;n<o.length;n++)o[n]=o[n].trim();o=Array.from(new Set(o));var c={type:a,name:e.tempSubOption.subOptions.option.name,options:o};e.create.steps[t].list[r].options||(e.create.steps[t].list[r].options=[]),e.create.steps[t].list[r].options.push(c),e.tempSubOption.subOptions.option.name="",e.tempSubOption.subOptions.option.input=""},e.modifyID=function(e,t){for(var r=0;r<e.length;r++)"itemRecord"===t&&(e[r].id=r+1),"steps"===t&&(e[r].step=r+1),"sub_step"===t&&(e[r].sub_step=r+1)},e.editOption=function(e,t){if(console.log("undefined"==typeof t?"undefined":_typeof(t)),console.log(t),e){e.options=[],"string"==typeof t&&(t=t.split(","));for(var r=0;r<t.length;r++)e.options[r]=t[r].trim();e.options=Array.from(new Set(e.options))}},e.updateForm=function(){e.travelerData={},e.formId&&t.get(e.formId).success(function(t){e.create=t})};var r=function(){e.create={},e.create.isPublish=!1},a=function(){t.getFormList().success(function(t){e.formList=t})},o=function(){r(),a(),e.inputItemRecordType="text",e.jsonView=!1};o()}]),angular.module("MainCtrl",[]).controller("MainController",["$scope",function(e){e.tagline="to the moon and back!"}]),angular.module("SearchTravelerCtrl",["chart.js"]).controller("SearchTravelerController",["$scope","Traveler",function(e,t){e.search=function(){if(e.currentInput=e.searchInput,e.isSearch=!0,e.searchInput)if("sn"===e.searchOption){var r=e.searchInput.toString();t.searchLike(r).success(function(t){e.result=t,a()})}else t.normalSearch(e.searchOption,e.searchInput).success(function(t){e.result=t,a()})},e.editTraveler=function(e,t){window.open("traveler?_id="+e+"&formId="+t,"_blank")},e.removeTraveler=function(r,a){t.removeTraveler(r).success(function(t){e.result.splice(a,1)})},e.timeSpend=function(t){if(t.reviewAt){var a=Math.round((new Date(t.reviewAt)-new Date(t.createAt))/1e3);return e.totalTimeSpand+=a,r(a)}var o=Math.round((new Date-new Date(t.createAt))/1e3);return e.totalTimeSpand+=o,r(o)},e.totalTimeSpend=function(){return 5};var r=function(e){return Math.floor(e/60/60)+" Hours and "+Math.floor(e/60)%60+" min and "+e%60+" sec"},a=function(){e.stat={},e.pieLabels1=[],e.pieData1=[];for(var t=e.result,r=0;r<t.length;r++)t[r].status in e.stat?e.stat[t[r].status]+=1:(e.pieLabels1.push(t[r].status),e.stat[t[r].status]=1);e.stat.total=t.length;var a=0,o=0;e.stat.REJECT&&(a=e.stat.REJECT),e.stat.COMPLETED&&(o=e.stat.COMPLETED),e.stat.pecComplete=((o+a)/t.length*100).toFixed(2),e.stat.REJECT/t.length*100?e.stat.pecReject=(a/t.length*100).toFixed(2):e.stat.pecReject=0;for(var n=0;n<e.pieLabels1.length;n++)e.pieData1.push(e.stat[e.pieLabels1[n]]);e.pieLabels2=["Finish","Hold"],e.pieData2=[o+a,e.stat.total-(o+a)]},o=function(){e.isSearch=!1,e.searchOption="docNum",e.sortType="createAt",e.sortReverse=!1,e.travelerData={},e.totalTimeSpand=0},n=function(){o()};n()}]),angular.module("TravelerCtrl",[]).filter("unique",function(){return function(e,t){var r=[],a=[];return angular.forEach(e,function(e){var o=e[t];-1===a.indexOf(o)&&(a.push(o),r.push(e))}),r}}).controller("TravelerController",["$scope","Traveler","Form","DocNum","$stateParams",function(e,t,r,a,o){e.checkReadyReview=function(){e.travelerData.status&&"OPEN"!==e.travelerData.status?(e.travelerData.status="OPEN",e.travelerData.readyReview=!1):(e.travelerData.status="PANDING FOR REVIEW",e.travelerData.readyReview=!0)},e.updateForm=function(){e.travelerData={},e.formId&&r.get(e.formId).success(function(t){e.forms=t,e.lastStep=t.steps.length,e.travelerData.formId=t._id,e.travelerData.formRev=t.formRev,e.travelerData.formNo=t.formNo,e.travelerData.customer=t.customer,e.travelerData.status="OPEN",l(t._id,function(){})})},e.updateDocNum=function(){e.docNum.docNumData=e.docNum.docNumSelectList[e.docNum.docNumSelect],c()},e.nextStep=function(){var t=e.forms.steps[e.currentStep-1];t.list.length>=e.currentSubStep+1?e.currentSubStep+=1:(e.currentStep+=1,e.currentSubStep=1,e.currentStep>e.lastStep&&e.checkReadyReview())},e.statusPage=function(t){e.currentSubStep=1,e.currentStep=t},e.statusSubPage=function(t){e.currentSubStep=t},e.goBack=function(){e.currentStep=1,e.currentSubStep=1,e.checkReadyReview()},e.save=function(){e.travelerData.created?t.save(e.travelerData).success(function(e){alert("saved"),n()}):e.submit()},e.review=function(t){e.travelerData.reviewBy?("reject"===t?e.travelerData.status="REJECT":"complete"===t&&(e.travelerData.status="COMPLETED"),e.travelerData.reviewAt=new Date,e.save()):alert("enter reviewer name")},e.submit=function(){e.username&&e.travelerData.sn?(e.travelerData.created=!0,e.travelerData.createdBy=e.username,e.travelerData.createAt=new Date,t.create(e.travelerData).success(function(t){e.travelerData=t,alert("submit complete"),n()})):alert("enter your name or serial number plz ")},e["new"]=function(){s()},e["delete"]=function(){alert("delete click"),e.travelerData._id&&t.removeTraveler(e.travelerData._id).success(function(e){s()})},e.appendSubStepEditInfo=function(){var t=e.username;if(""!==t){var r=e.currentStep,a=e.currentSubStep;return e.travelerData.step[r][a].editBy=t,e.travelerData.step[r][a].editTime=new Date,!0}return alert("enter your name"),!1},e.printTraveler=function(){window.print()},e.saveDocNum=function(){e.docNum.docNumData.formId=e.travelerData.formId,e.docNum.docNumData.formRev=e.travelerData.formRev,e.docNum.docNumData.formNo=e.travelerData.formNo,u("create"),delete e.docNum.docNumData._id,a.create(e.docNum.docNumData).success(function(t){l(e.travelerData.formId,function(r){for(var a=0;a<r.length;a++)r[a]._id===t._id&&(e.docNum.docNumData=t,e.docNum.docNumSelect=a.toString())})})},e.editDocNum=function(){a.editDocNumData(e.docNum.docNumData).success(function(t){l(e.travelerData.formId,function(){})})},e.checkForSN=function(){e.travelerData._id||t.normalSearch("sn",e.travelerData.sn).success(function(t){t.length>0?(e.isSNExist=!0,e.searchSN=t):e.isSNExist=!1})},e.setTravelerData=function(){e.travelerData=e.searchSN[e.selectSN],m()};var n=function(){e.travelerData.sn&&e.travelerData.itemRecord.docNum&&(e.topCollapse=!0)},c=function(){e.travelerData.itemRecord={docNumId:e.docNum.docNumData._id,docNum:e.docNum.docNumData.docNum}},u=function(t){var r=1;if("create"===t)for(var a=0;a<e.docNum.docNumSelectList.length;a++)e.docNum.docNumSelectList[a].docNum===e.docNum.docNumData.docNum&&(r+=1);e.docNum.docNumData.label=r},i=function(){r.getFormList().success(function(t){e.formList=t})},s=function(){e.travelerData={},e.currentStep=1,e.currentSubStep=1,e.travelerData.readyReview=!1,e.formId="",e.isNew=!0},l=function(t,r){a.getDocNumList(t).success(function(t){e.docNum.docNumSelectList=t,r(t)})},m=function(){a.getDocNumList(e.travelerData.formId).success(function(t){for(var r=0;r<t.length;r++)if(t[r]._id===e.travelerData.itemRecord.docNumId){e.docNum.docNumData=t[r],e.docNum.docNumSelect=r.toString();break}})},p=function(){e.topCollapse=!1,e.username="John Snow",e.docNum={},e.isSNExist=!1,e.searchSN={},e.selectSN="0"},d=function(){p(),s(),i(),o.formId&&(e.formId=o.formId,e.updateForm(),e.isNew=!1),o._id&&(e.isNew=!1,t.get("_id",o._id).success(function(t){e.travelerData=t,m(),n()}))};d()}]),angular.module("DocNumService",[]).factory("DocNum",["$http",function(e){return{getDocNumList:function(t){return e.get("/api/docNums/"+t)},create:function(t){return e.post("/api/docNums/",t)},editDocNumData:function(t){return e.put("/api/docNums/",t)},getDocNum:function(t,r){return console.log("d service"),e.get("/api/docNums/searchSingle?type="+t+"&data="+r)}}}]),angular.module("FormService",[]).factory("Form",["$http",function(e){return{create:function(t){return e.post("/api/forms",t)},getAll:function(){return e.get("/api/forms/")},getFormList:function(){return e.get("/api/forms/formList")},get:function(t){return e.get("/api/forms/search/"+t)},save:function(t){return e.put("/api/forms",t)},"delete":function(t){return e["delete"]("/api/forms/"+t)}}}]),angular.module("TravelerService",[]).factory("Traveler",["$http",function(e){var t={};return{create:function(t){return e.post("/api/traveler",t)},getReviewData:function(){return t},get:function(t,r){return e.get("/api/traveler?type="+t+"&data="+r)},save:function(t){return e.put("/api/traveler",t)},setReviewData:function(e){t=e},searchLike:function(t){return e.get("/api/traveler/searchLike/"+t)},removeTraveler:function(t,r){return e["delete"]("/api/traveler/"+t)},normalSearch:function(t,r){return e.get("/api/traveler/normalSearch?type="+t+"&data="+r)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyIsImFwcC5qcyIsImFwcFJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL0FwcEN0cmwuanMiLCJjb250cm9sbGVycy9Gb3JtR2VuQ3RybC5qcyIsImNvbnRyb2xsZXJzL01haW5DdHJsLmpzIiwiY29udHJvbGxlcnMvU2VhcmNoVHJhdmVsZXJDdHJsLmpzIiwiY29udHJvbGxlcnMvVHJhdmVsZXJDdHJsLmpzIiwic2VydmljZXMvRG9jTnVtU2VydmljZS5qcyIsInNlcnZpY2VzL0Zvcm1TZXJ2aWNlLmpzIiwic2VydmljZXMvVHJhdmVsZXJTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ2aWV3cyIsIiIsImZvcm1SZXZpZXdAdHJhdmVsZXIiLCJmb3JtUmV2aWV3QHNlYXJjaFRyYXZlbGVyIiwidGVtcGxhdGVHZW5lcmF0b3JAZm9ybUdlbmVyYXRvciIsInRlbXBsYXRlQ3JlYXRvckBmb3JtR2VuZXJhdG9yIiwiaHRtbDVNb2RlIiwiJHNjb3BlIiwiaXNDb2xsYXBzZWQiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsIkZvcm0iLCJzdWJtaXQiLCJwYXNzd29yZCIsInByb21wdCIsImNyZWF0ZSIsInRlbXBsYXRlIiwic3VjY2VzcyIsImRhdGEiLCJhbGVydCIsInNhdmUiLCJfaWQiLCJjb25maXJtIiwiaW5pdENyZWF0ZSIsInNldFNlbGVjdFRhYiIsIm4iLCJzZWxlY3RUYWIiLCJhZGRJdGVtUmVjb3JkIiwiaW5wdXRJdGVtUmVjb3JkIiwiaXRlbVJlY29yZCIsImxlbiIsImxlbmd0aCIsIml0ZW0iLCJpZCIsIkRlc2NyaXB0aW9uIiwiaW5wdXRJdGVtUmVjb3JkVHlwZSIsImhvbGRlciIsInNlbGVjdE9wdGlvbnMiLCJzcGxpdCIsImkiLCJ0cmltIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwibmFtZSIsInNlbGVjdCIsInB1c2giLCJhZGRTdGVwIiwic3RlcHMiLCJzdGVwIiwidHlwZSIsImlucHV0U3RlcFR5cGUiLCJpbnB1dFN0ZXBEZXMiLCJhZGRTdWJTdGVwIiwidGVtcFN1YiIsImlucHV0U3ViU3RlcERlcyIsInN0ZXBJbmRleCIsInNlbGVjdFN0ZXBGb3JTdWJTdGVwIiwibGlzdCIsInN1YlN0ZXAiLCJzdWJfc3RlcCIsImFkZFN1Yk9wdGlvbiIsInRlbXBTdWJPcHRpb24iLCJzZWxlY3RTdWJGb3JPcHRpb24iLCJzdWIiLCJzZWxlY3RPcHRpb24iLCJzdWJPcHRpb25zIiwic2VsZWN0U3ViT3B0aW9uIiwib3B0aW9ucyIsIm9wdGlvbiIsImlucHV0Iiwic3ViU3RlcE9wdGlvbiIsIm1vZGlmeUlEIiwib2JqZWN0IiwiZWRpdE9wdGlvbiIsImFkZHJlc3MiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlRm9ybSIsInRyYXZlbGVyRGF0YSIsImZvcm1JZCIsImdldCIsImlzUHVibGlzaCIsImxvYWRGb3JtTGlzdCIsImdldEZvcm1MaXN0IiwiZm9ybUxpc3QiLCJtYWluIiwianNvblZpZXciLCJ0YWdsaW5lIiwiVHJhdmVsZXIiLCJzZWFyY2giLCJjdXJyZW50SW5wdXQiLCJzZWFyY2hJbnB1dCIsImlzU2VhcmNoIiwic2VhcmNoT3B0aW9uIiwic24iLCJ0b1N0cmluZyIsInNlYXJjaExpa2UiLCJyZXN1bHQiLCJmaW5kU3RhdGlzdGljcyIsIm5vcm1hbFNlYXJjaCIsImVkaXRUcmF2ZWxlciIsIndpbmRvdyIsIm9wZW4iLCJyZW1vdmVUcmF2ZWxlciIsImluZGV4Iiwic3BsaWNlIiwidGltZVNwZW5kIiwicmV2aWV3QXQiLCJkaWZmIiwiTWF0aCIsInJvdW5kIiwiRGF0ZSIsImNyZWF0ZUF0IiwidG90YWxUaW1lU3BhbmQiLCJjYWx1bGF0ZVRpbWUiLCJfZGlmZiIsInRvdGFsVGltZVNwZW5kIiwic2Vjb25kcyIsImZsb29yIiwic3RhdCIsInBpZUxhYmVsczEiLCJwaWVEYXRhMSIsInN0YXR1cyIsInRvdGFsIiwicmVqZWN0IiwiY29tcGxldGVkIiwiUkVKRUNUIiwiQ09NUExFVEVEIiwicGVjQ29tcGxldGUiLCJ0b0ZpeGVkIiwicGVjUmVqZWN0IiwiX2kiLCJwaWVMYWJlbHMyIiwicGllRGF0YTIiLCJpbml0Iiwic29ydFR5cGUiLCJzb3J0UmV2ZXJzZSIsImZpbHRlciIsImNvbGxlY3Rpb24iLCJrZXluYW1lIiwib3V0cHV0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpbmRleE9mIiwiRG9jTnVtIiwiJHN0YXRlUGFyYW1zIiwiY2hlY2tSZWFkeVJldmlldyIsInJlYWR5UmV2aWV3IiwiZm9ybXMiLCJsYXN0U3RlcCIsImZvcm1SZXYiLCJmb3JtTm8iLCJjdXN0b21lciIsImxvYWREb2NOdW1MaXN0IiwidXBkYXRlRG9jTnVtIiwiZG9jTnVtIiwiZG9jTnVtRGF0YSIsImRvY051bVNlbGVjdExpc3QiLCJkb2NOdW1TZWxlY3QiLCJzZXROdW1Eb2N0b1RyYXZlbGVyIiwibmV4dFN0ZXAiLCJjdXJyZW50U3RlcCIsImN1cnJlbnRTdWJTdGVwIiwic3RhdHVzUGFnZSIsInBhZ2UiLCJzdGF0dXNTdWJQYWdlIiwiZ29CYWNrIiwiY3JlYXRlZCIsInNob3VsZENvbGxhcHNlIiwicmV2aWV3IiwicmV2aWV3QnkiLCJ1c2VybmFtZSIsImNyZWF0ZWRCeSIsInJlc2V0IiwiYXBwZW5kU3ViU3RlcEVkaXRJbmZvIiwiZWRpdEJ5IiwiZWRpdFRpbWUiLCJwcmludFRyYXZlbGVyIiwicHJpbnQiLCJzYXZlRG9jTnVtIiwic2V0RG9jTnVtTGFiZWwiLCJlZGl0RG9jTnVtIiwiZWRpdERvY051bURhdGEiLCJjaGVja0ZvclNOIiwiaXNTTkV4aXN0Iiwic2VhcmNoU04iLCJzZXRUcmF2ZWxlckRhdGEiLCJzZWxlY3RTTiIsImxvYWRJdGVtUmVjb3JkIiwidG9wQ29sbGFwc2UiLCJkb2NOdW1JZCIsImFjdGlvbiIsImNvdW50IiwibGFiZWwiLCJpc05ldyIsImNhbGxiYWNrIiwiZ2V0RG9jTnVtTGlzdCIsImZhY3RvcnkiLCIkaHR0cCIsInBvc3QiLCJwdXQiLCJnZXREb2NOdW0iLCJnZXRBbGwiLCJkZWxldGUiLCJyZXZpZXdEYXRhIiwiZm9ybURhdGEiLCJnZXRSZXZpZXdEYXRhIiwic2V0UmV2aWV3RGF0YSJdLCJtYXBwaW5ncyI6IkFBQUEsWUNBQUEsU0FBUUMsT0FBTyxhQUViLFlBQ0EsZUFDQSxZQUNBLFdBRUEsVUFDQSxXQUNBLGVBQ0EscUJBQ0EsaUJBRUEsa0JBQ0EsY0FDQSxrQkNmRkQsUUFBUUMsT0FBTyxhQUFjLGNBQzNCQyxRQUFRLGlCQUFrQixxQkFBc0Isb0JBQ2hELFNBQVNDLEVBQWdCQyxFQUFvQkMsR0FFN0NELEVBQW1CRSxVQUFVLFNBRzdCSCxFQUdFSSxNQUFNLFFBQ05DLElBQUssUUFDTEMsWUFBYSxrQkFDYkMsV0FBWSxtQkFJWkgsTUFBTSxZQUNOQyxJQUFLLHVCQUNMRyxPQUNDQyxJQUNDSCxZQUFhLHNCQUNiQyxXQUFZLHNCQUViRyx1QkFDQ0osWUFBYSw0QkFhZkYsTUFBTSxrQkFDTkMsSUFBSyxrQkFDTEcsT0FDQ0MsSUFDQ0gsWUFBYSw0QkFDYkMsV0FBWSw0QkFFYkksNkJBQ0NMLFlBQWEsNEJBS2ZGLE1BQU0saUJBQ05DLElBQUssaUJBQ0xHLE9BQ0NDLElBQ0NILFlBQWEsOEJBQ2JDLFdBQVksMkJBRWJLLG1DQUNDTixZQUFhLCtCQUNiQyxXQUFZLDJCQUViTSxpQ0FDQ1AsWUFBYSw2QkFDYkMsV0FBWSw4QkFLaEJMLEVBQWtCWSxXQUFVLE1DckU5QmpCLFFBQVFDLE9BQU8sV0FBWSxjQUV6QlMsV0FBVyxpQkFBa0IsU0FBVSxTQUFTUSxHQUVoREEsRUFBT0MsYUFBYyxJSHVFdkIsSUFBSUMsU0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFB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IHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdzYW1wbGVBcHAnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAnYXBwUm91dGVzJywgJ2RuZExpc3RzJywgJ0FwcEN0cmwnLCAnTWFpbkN0cmwnLCAnVHJhdmVsZXJDdHJsJywgJ1NlYXJjaFRyYXZlbGVyQ3RybCcsICdGb3JtR2VuQ3RybC5qcycsICdUcmF2ZWxlclNlcnZpY2UnLCAnRm9ybVNlcnZpY2UnLCAnRG9jTnVtU2VydmljZSddKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2FwcFJvdXRlcycsIFsndWkucm91dGVyJ10pLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9ob21lJyk7XG5cblx0Ly8gJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXHQkc3RhdGVQcm92aWRlclxuXG5cdC8vIGhvbWUgcGFnZVxuXHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0dXJsOiAnL2hvbWUnLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvaG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnTWFpbkNvbnRyb2xsZXInXG5cdH0pLnN0YXRlKCd0cmF2ZWxlcicsIHtcblx0XHR1cmw6ICcvdHJhdmVsZXI/X2lkJmZvcm1JZCcsXG5cdFx0dmlld3M6IHtcblx0XHRcdCcnOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvdHJhdmVsZXIuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdUcmF2ZWxlckNvbnRyb2xsZXInXG5cdFx0XHR9LFxuXHRcdFx0J2Zvcm1SZXZpZXdAdHJhdmVsZXInOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybVJldmlldy5odG1sJ1xuXHRcdFx0XHQvLyBjb250cm9sbGVyOiBbJyRzY29wZScsICdUcmF2ZWxlcicsICdGb3JtJyxmdW5jdGlvbigkc2NvcGUsIFRyYXZlbGVyLCBGb3JtKXtcblx0XHRcdFx0Ly8gXHQkc2NvcGUucmV2aWV3RGF0YSA9IFRyYXZlbGVyLmdldFJldmlld0RhdGEoKTtcblx0XHRcdFx0Ly8gXHRGb3JtLmdldCgkc2NvcGUucmV2aWV3RGF0YS5mb3JtSWQpXG5cdFx0XHRcdC8vIFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0Ly8gXHRcdFx0JHNjb3BlLmZvcm1zID0gZGF0YTtcblx0XHRcdFx0Ly8gXHR9KTtcblx0XHRcdFx0Ly8gfV1cblx0XHRcdFx0Ly8gY29udHJvbGxlcjogJ1RyYXZlbGVyQ29udHJvbGxlcidcblx0XHRcdH1cblx0XHR9XG5cdH0pLnN0YXRlKCdzZWFyY2hUcmF2ZWxlcicsIHtcblx0XHR1cmw6ICcvc2VhcmNoVHJhdmVsZXInLFxuXHRcdHZpZXdzOiB7XG5cdFx0XHQnJzoge1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NlYXJjaFRyYXZlbGVyLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2VhcmNoVHJhdmVsZXJDb250cm9sbGVyJ1xuXHRcdFx0fSxcblx0XHRcdCdmb3JtUmV2aWV3QHNlYXJjaFRyYXZlbGVyJzoge1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1SZXZpZXcuaHRtbCdcblx0XHRcdH1cblx0XHR9XG5cdH0pLnN0YXRlKCdmb3JtR2VuZXJhdG9yJywge1xuXHRcdHVybDogJy9mb3JtR2VuZXJhdG9yJyxcblx0XHR2aWV3czoge1xuXHRcdFx0Jyc6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9mb3JtR2VuZXJhdG9yTmF2Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnRm9ybUdlbmVyYXRvckNvbnRyb2xsZXInXG5cdFx0XHR9LFxuXHRcdFx0J3RlbXBsYXRlR2VuZXJhdG9yQGZvcm1HZW5lcmF0b3InOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvdGVtcGxhdGVHZW5lcmF0b3IuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcidcblx0XHRcdH0sXG5cdFx0XHQndGVtcGxhdGVDcmVhdG9yQGZvcm1HZW5lcmF0b3InOiB7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvdGVtcGxhdGVDcmVhdG9yLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnRm9ybUdlbmVyYXRvckNvbnRyb2xsZXInXG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBDdHJsJywgWyduZ0FuaW1hdGUnXSkuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXG5cdCRzY29wZS5pc0NvbGxhcHNlZCA9IHRydWU7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5hbmd1bGFyLm1vZHVsZSgnRm9ybUdlbkN0cmwuanMnLCBbJ3VpLmJvb3RzdHJhcC50YWJzJ10pLmNvbnRyb2xsZXIoJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJywgWyckc2NvcGUnLCAnRm9ybScsIGZ1bmN0aW9uICgkc2NvcGUsIEZvcm0pIHtcblxuXHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKHBhc3N3b3JkKSB7XG5cdFx0aWYgKCFwYXNzd29yZCB8fCBwYXNzd29yZCA9PT0gJycpIHtcblx0XHRcdHBhc3N3b3JkID0gcHJvbXB0KCdwYXNzd29yZCcpO1xuXHRcdH1cblx0XHRpZiAocGFzc3dvcmQgPT09ICcxMjMnKSB7XG5cdFx0XHRGb3JtLmNyZWF0ZSgkc2NvcGUudGVtcGxhdGUpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0Ly8gZG8gc29tZXRoaW5nXG5cdFx0XHRcdGFsZXJ0KCdhZGQnKTtcblx0XHRcdFx0JHNjb3BlLmNyZWF0ZSA9IGRhdGE7XG5cdFx0XHRcdGRlbGV0ZSAkc2NvcGUudGVtcGxhdGU7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWxlcnQoJ2dvIGhvbWUgc29uJyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcblx0XHRpZiAocGFzc3dvcmQgPT09ICcxMjMnKSB7XG5cdFx0XHRpZiAoJHNjb3BlLmNyZWF0ZS5faWQpIHtcblx0XHRcdFx0Rm9ybS5zYXZlKCRzY29wZS5jcmVhdGUpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRhbGVydCgnc2F2ZScpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRzY29wZS50ZW1wbGF0ZSA9ICRzY29wZS5jcmVhdGU7XG5cdFx0XHRcdCRzY29wZS5zdWJtaXQocGFzc3dvcmQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbGVydCgnZ28gaG9tZScpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcblx0XHRpZiAocGFzc3dvcmQgPT09ICdRUW1vcmUnKSB7XG5cdFx0XHRpZiAoY29uZmlybSgnZGVsZXRlIHRlbXBsYXRlPycpKSB7XG5cblx0XHRcdFx0aWYgKCRzY29wZS5jcmVhdGUuX2lkKSB7XG5cdFx0XHRcdFx0Rm9ybS5kZWxldGUoJHNjb3BlLmNyZWF0ZS5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdGFsZXJ0KCdyZW1vdmVkJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5pdENyZWF0ZSgpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbGVydCgnZ28gaG9tZScpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuc2V0U2VsZWN0VGFiID0gZnVuY3Rpb24gKG4pIHtcblx0XHQkc2NvcGUuc2VsZWN0VGFiID0gbjtcblx0fTtcblxuXHQkc2NvcGUuYWRkSXRlbVJlY29yZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoJHNjb3BlLmlucHV0SXRlbVJlY29yZCAmJiAkc2NvcGUuaW5wdXRJdGVtUmVjb3JkICE9PSAnJykge1xuXHRcdFx0aWYgKCEkc2NvcGUuY3JlYXRlLml0ZW1SZWNvcmQpIHtcblx0XHRcdFx0JHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkID0gW107XG5cdFx0XHR9XG5cdFx0XHR2YXIgbGVuID0gJHNjb3BlLmNyZWF0ZS5pdGVtUmVjb3JkLmxlbmd0aDtcblx0XHRcdHZhciBpdGVtID0ge1xuXHRcdFx0XHRcImlkXCI6IGxlbiArIDEsXG5cdFx0XHRcdFwiRGVzY3JpcHRpb25cIjogJHNjb3BlLmlucHV0SXRlbVJlY29yZFxuXHRcdFx0fTtcblx0XHRcdGlmICgkc2NvcGUuaW5wdXRJdGVtUmVjb3JkVHlwZSA9PT0gJ3NlbGVjdCcpIHtcblx0XHRcdFx0dmFyIGhvbGRlciA9ICRzY29wZS5zZWxlY3RPcHRpb25zO1xuXHRcdFx0XHRob2xkZXIgPSBob2xkZXIuc3BsaXQoJywnKTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob2xkZXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRob2xkZXJbaV0gPSBob2xkZXJbaV0udHJpbSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGhvbGRlciA9IEFycmF5LmZyb20obmV3IFNldChob2xkZXIpKTtcblx0XHRcdFx0aXRlbVsnc2VsZWN0J10gPSB7ICduYW1lJzogJycgfTtcblx0XHRcdFx0aXRlbS5zZWxlY3RbJ29wdGlvbnMnXSA9IGhvbGRlcjtcblx0XHRcdH1cblx0XHRcdCRzY29wZS5jcmVhdGUuaXRlbVJlY29yZC5wdXNoKGl0ZW0pO1xuXHRcdFx0JHNjb3BlLmlucHV0SXRlbVJlY29yZCA9ICcnO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuYWRkU3RlcCA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBpZigkc2NvcGUuaW5wdXRTdGVwRGVzICYmICRzY29wZS5pbnB1dFN0ZXBEZXMgIT09ICcnKXtcblx0XHRpZiAoISRzY29wZS5jcmVhdGUuc3RlcHMpIHtcblx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHMgPSBbXTtcblx0XHR9XG5cdFx0dmFyIGxlbiA9ICRzY29wZS5jcmVhdGUuc3RlcHMubGVuZ3RoO1xuXHRcdHZhciBzdGVwID0ge1xuXHRcdFx0XCJzdGVwXCI6IGxlbiArIDEsXG5cdFx0XHRcInR5cGVcIjogJHNjb3BlLmlucHV0U3RlcFR5cGUgfHwgJycsXG5cdFx0XHRcIkRlc2NyaXB0aW9uXCI6ICRzY29wZS5pbnB1dFN0ZXBEZXMgfHwgJydcblx0XHR9O1xuXHRcdCRzY29wZS5jcmVhdGUuc3RlcHMucHVzaChzdGVwKTtcblxuXHRcdCRzY29wZS5pbnB1dFN0ZXBEZXMgPSAnJztcblx0XHQvLyB9XG5cdH07XG5cblx0JHNjb3BlLmFkZFN1YlN0ZXAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS50ZW1wU3ViLmlucHV0U3ViU3RlcERlcyAmJiAkc2NvcGUudGVtcFN1Yi5pbnB1dFN1YlN0ZXBEZXMgIT09ICcnKSB7XG5cdFx0XHR2YXIgc3RlcEluZGV4ID0gJHNjb3BlLnRlbXBTdWIuc2VsZWN0U3RlcEZvclN1YlN0ZXA7XG5cdFx0XHRpZiAoISRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0KSB7XG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0ID0gW107XG5cdFx0XHR9XG5cdFx0XHR2YXIgbGVuID0gJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwSW5kZXhdLmxpc3QubGVuZ3RoO1xuXHRcdFx0dmFyIHN1YlN0ZXAgPSB7XG5cdFx0XHRcdFwic3ViX3N0ZXBcIjogbGVuICsgMSxcblx0XHRcdFx0XCJEZXNjcmlwdGlvblwiOiAkc2NvcGUudGVtcFN1Yi5pbnB1dFN1YlN0ZXBEZXNcblx0XHRcdH07XG5cdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBJbmRleF0ubGlzdC5wdXNoKHN1YlN0ZXApO1xuXHRcdFx0JHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzID0gJyc7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5hZGRTdWJPcHRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHN0ZXAgPSAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zZWxlY3RTdWJGb3JPcHRpb24uc3BsaXQoJywnKVswXTtcblx0XHR2YXIgc3ViID0gJHNjb3BlLnRlbXBTdWJPcHRpb24uc2VsZWN0U3ViRm9yT3B0aW9uLnNwbGl0KCcsJylbMV07XG5cdFx0dmFyIHNlbGVjdE9wdGlvbiA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMuc2VsZWN0U3ViT3B0aW9uO1xuXHRcdHZhciBvcHRpb25zID0gJHNjb3BlLnRlbXBTdWJPcHRpb24uc3ViT3B0aW9ucy5vcHRpb24uaW5wdXQuc3BsaXQoJywnKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG9wdGlvbnNbaV0gPSBvcHRpb25zW2ldLnRyaW0oKTtcblx0XHR9XG5cdFx0b3B0aW9ucyA9IEFycmF5LmZyb20obmV3IFNldChvcHRpb25zKSk7XG5cdFx0dmFyIHN1YlN0ZXBPcHRpb24gPSB7XG5cdFx0XHRcInR5cGVcIjogc2VsZWN0T3B0aW9uLFxuXHRcdFx0XCJuYW1lXCI6ICRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLm5hbWUsXG5cdFx0XHRcIm9wdGlvbnNcIjogb3B0aW9uc1xuXHRcdH07XG5cdFx0aWYgKCEkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBdLmxpc3Rbc3ViXS5vcHRpb25zKSB7XG5cdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBdLmxpc3Rbc3ViXS5vcHRpb25zID0gW107XG5cdFx0fVxuXHRcdCRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcF0ubGlzdFtzdWJdLm9wdGlvbnMucHVzaChzdWJTdGVwT3B0aW9uKTtcblx0XHQvLyRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcF0ubGlzdFtzdWJdW3NlbGVjdE9wdGlvbl0gPSBzdWJTdGVwT3B0aW9uO1xuXHRcdCRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLm5hbWUgPSAnJztcblx0XHQkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5pbnB1dCA9ICcnO1xuXHR9O1xuXG5cdCRzY29wZS5tb2RpZnlJRCA9IGZ1bmN0aW9uIChvYmplY3QsIHR5cGUpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHR5cGUgPT09ICdpdGVtUmVjb3JkJykge1xuXHRcdFx0XHRvYmplY3RbaV0uaWQgPSBpICsgMTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlID09PSAnc3RlcHMnKSB7XG5cdFx0XHRcdG9iamVjdFtpXS5zdGVwID0gaSArIDE7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZSA9PT0gJ3N1Yl9zdGVwJykge1xuXHRcdFx0XHRvYmplY3RbaV0uc3ViX3N0ZXAgPSBpICsgMTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmVkaXRPcHRpb24gPSBmdW5jdGlvbiAoYWRkcmVzcywgaW5wdXQpIHtcblx0XHRjb25zb2xlLmxvZyh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KSk7XG5cdFx0Y29uc29sZS5sb2coaW5wdXQpO1xuXHRcdGlmIChhZGRyZXNzKSB7XG5cdFx0XHRhZGRyZXNzLm9wdGlvbnMgPSBbXTtcblx0XHRcdGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGlucHV0ID0gaW5wdXQuc3BsaXQoJywnKTtcblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0YWRkcmVzcy5vcHRpb25zW2ldID0gaW5wdXRbaV0udHJpbSgpO1xuXHRcdFx0fVxuXHRcdFx0YWRkcmVzcy5vcHRpb25zID0gQXJyYXkuZnJvbShuZXcgU2V0KGFkZHJlc3Mub3B0aW9ucykpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUudXBkYXRlRm9ybSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XG5cdFx0aWYgKCRzY29wZS5mb3JtSWQpIHtcblx0XHRcdEZvcm0uZ2V0KCRzY29wZS5mb3JtSWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0Ly8gJHNjb3BlLmZvcm1zID0gZGF0YTsgICAgICAgXG5cdFx0XHRcdC8vIC8vIGZpbmQgdGhlIGxhc3Qgc3ViU3RlcFxuXHRcdFx0XHQvLyAkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcblx0XHRcdFx0Ly8gLy8gaW5pdCB0aGUgdHJhdmVsZXJEYXRhIGZyb20gZm9ybURhdGFcblx0XHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQgPSBkYXRhLl9pZDtcblx0XHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtUmV2ID0gZGF0YS5mb3JtUmV2O1xuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObyA9IGRhdGEuZm9ybU5vO1xuXHRcdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmN1c3RvbWVyID0gZGF0YS5jdXN0b21lcjtcblx0XHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnT1BFTic7XG5cdFx0XHRcdCRzY29wZS5jcmVhdGUgPSBkYXRhO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBpbml0Q3JlYXRlID0gZnVuY3Rpb24gaW5pdENyZWF0ZSgpIHtcblx0XHQkc2NvcGUuY3JlYXRlID0ge307XG5cdFx0JHNjb3BlLmNyZWF0ZS5pc1B1Ymxpc2ggPSBmYWxzZTtcblx0fTtcblxuXHR2YXIgbG9hZEZvcm1MaXN0ID0gZnVuY3Rpb24gbG9hZEZvcm1MaXN0KCkge1xuXHRcdEZvcm0uZ2V0Rm9ybUxpc3QoKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHQkc2NvcGUuZm9ybUxpc3QgPSBkYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBtYWluID0gZnVuY3Rpb24gbWFpbigpIHtcblxuXHRcdGluaXRDcmVhdGUoKTtcblx0XHRsb2FkRm9ybUxpc3QoKTtcblxuXHRcdCRzY29wZS5pbnB1dEl0ZW1SZWNvcmRUeXBlID0gJ3RleHQnO1xuXHRcdCRzY29wZS5qc29uVmlldyA9IGZhbHNlO1xuXHR9O1xuXG5cdG1haW4oKTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ01haW5DdHJsJywgW10pLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cblx0JHNjb3BlLnRhZ2xpbmUgPSAndG8gdGhlIG1vb24gYW5kIGJhY2shJztcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ1NlYXJjaFRyYXZlbGVyQ3RybCcsIFsnY2hhcnQuanMnXSkuY29udHJvbGxlcignU2VhcmNoVHJhdmVsZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnVHJhdmVsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBUcmF2ZWxlcikge1xuXG5cdCRzY29wZS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmN1cnJlbnRJbnB1dCA9ICRzY29wZS5zZWFyY2hJbnB1dDtcblx0XHQkc2NvcGUuaXNTZWFyY2ggPSB0cnVlO1xuXHRcdGlmICgkc2NvcGUuc2VhcmNoSW5wdXQpIHtcblx0XHRcdGlmICgkc2NvcGUuc2VhcmNoT3B0aW9uID09PSAnc24nKSB7XG5cdFx0XHRcdHZhciBzbiA9ICRzY29wZS5zZWFyY2hJbnB1dC50b1N0cmluZygpO1xuXHRcdFx0XHRUcmF2ZWxlci5zZWFyY2hMaWtlKHNuKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdCA9IGRhdGE7XG5cdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBzZWFyY2ggZG9jIG51bVxuXHRcdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJHNjb3BlLnNlYXJjaE9wdGlvbiwgJHNjb3BlLnNlYXJjaElucHV0KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdCA9IGRhdGE7XG5cdFx0XHRcdFx0ZmluZFN0YXRpc3RpY3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5lZGl0VHJhdmVsZXIgPSBmdW5jdGlvbiAoX2lkLCBmb3JtSWQpIHtcblx0XHR3aW5kb3cub3BlbigndHJhdmVsZXI/X2lkPScgKyBfaWQgKyAnJmZvcm1JZD0nICsgZm9ybUlkLCAnX2JsYW5rJyk7XG5cdH07XG5cblx0JHNjb3BlLnJlbW92ZVRyYXZlbGVyID0gZnVuY3Rpb24gKF9pZCwgaW5kZXgpIHtcblx0XHRUcmF2ZWxlci5yZW1vdmVUcmF2ZWxlcihfaWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdC8vICRzY29wZS5yZXN1bHQ9ZGF0YTtcblx0XHRcdCRzY29wZS5yZXN1bHQuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudGltZVNwZW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRpZiAoZGF0YS5yZXZpZXdBdCkge1xuXHRcdFx0dmFyIGRpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZShkYXRhLnJldmlld0F0KSAtIG5ldyBEYXRlKGRhdGEuY3JlYXRlQXQpKSAvIDEwMDApO1xuXHRcdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kICs9IGRpZmY7XG5cdFx0XHRyZXR1cm4gY2FsdWxhdGVUaW1lKGRpZmYpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgX2RpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoZGF0YS5jcmVhdGVBdCkpIC8gMTAwMCk7XG5cdFx0XHQkc2NvcGUudG90YWxUaW1lU3BhbmQgKz0gX2RpZmY7XG5cdFx0XHRyZXR1cm4gY2FsdWxhdGVUaW1lKF9kaWZmKTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnRvdGFsVGltZVNwZW5kID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIDU7XG5cdH07XG5cblx0dmFyIGNhbHVsYXRlVGltZSA9IGZ1bmN0aW9uIGNhbHVsYXRlVGltZShzZWNvbmRzKSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwIC8gNjApICsgJyBIb3VycyBhbmQgJyArIE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKSAlIDYwICsgJyBtaW4gYW5kICcgKyBzZWNvbmRzICUgNjAgKyAnIHNlYyc7XG5cdH07XG5cblx0Ly8gJHNjb3BlLnByaW50VHJhdmVsZXIgPSBmdW5jdGlvbihpbmRleCl7XG5cdC8vIFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9ICRzY29wZS5yZXN1bHRbaW5kZXhdO1xuXHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XG5cdC8vICAgIHZhciBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3dpZHRoPTgwMCxoZWlnaHQ9ODAwLHNjcm9sbGJhcnM9bm8sbWVudWJhcj1ubyx0b29sYmFyPW5vLGxvY2F0aW9uPW5vLHN0YXR1cz1ubyx0aXRsZWJhcj1ubyx0b3A9NTAnKTtcblx0Ly8gICAgcG9wdXBXaW4ud2luZG93LmZvY3VzKCk7XG5cdC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcblx0Ly8gICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoJzwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjx0aXRsZT5USVRMRSBPRiBUSEUgUFJJTlQgT1VUPC90aXRsZT4nICtcblx0Ly8gICAgICAgICc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cImxpYnMvYm9vc2F2ZURvY051bXRzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzc1wiPicgK1xuXHQvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XG5cdC8vICAgIHBvcHVwV2luLmRvY3VtZW50LmNsb3NlKCk7XG5cdC8vIH1cblxuXHR2YXIgZmluZFN0YXRpc3RpY3MgPSBmdW5jdGlvbiBmaW5kU3RhdGlzdGljcygpIHtcblx0XHQkc2NvcGUuc3RhdCA9IHt9O1xuXHRcdCRzY29wZS5waWVMYWJlbHMxID0gW107XG5cdFx0JHNjb3BlLnBpZURhdGExID0gW107XG5cdFx0dmFyIGRhdGEgPSAkc2NvcGUucmVzdWx0O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGRhdGFbaV0uc3RhdHVzIGluICRzY29wZS5zdGF0KSB7XG5cdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSArPSAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHNjb3BlLnBpZUxhYmVsczEucHVzaChkYXRhW2ldLnN0YXR1cyk7XG5cdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSA9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCRzY29wZS5zdGF0LnRvdGFsID0gZGF0YS5sZW5ndGg7XG5cdFx0dmFyIHJlamVjdCA9IDA7XG5cdFx0dmFyIGNvbXBsZXRlZCA9IDA7XG5cdFx0Ly8gY2FsdWxhdGUgcGVyY2VudCBvZiB0b3RhbCBjb21wbGF0ZWQgb3V0IG9mIHRvdGFsXG5cdFx0aWYgKCRzY29wZS5zdGF0LlJFSkVDVCkge1xuXHRcdFx0cmVqZWN0ID0gJHNjb3BlLnN0YXQuUkVKRUNUO1xuXHRcdH1cblxuXHRcdGlmICgkc2NvcGUuc3RhdC5DT01QTEVURUQpIHtcblx0XHRcdGNvbXBsZXRlZCA9ICRzY29wZS5zdGF0LkNPTVBMRVRFRDtcblx0XHR9XG5cdFx0JHNjb3BlLnN0YXQucGVjQ29tcGxldGUgPSAoKGNvbXBsZXRlZCArIHJlamVjdCkgLyBkYXRhLmxlbmd0aCAqIDEwMCkudG9GaXhlZCgyKTtcblxuXHRcdC8vIGNhbHVsYXRlIHBlcmNlbnQgb2YgcmVqZWN0IG91dCBvZiB0b3RhbFxuXHRcdGlmICgkc2NvcGUuc3RhdC5SRUpFQ1QgLyBkYXRhLmxlbmd0aCAqIDEwMCkge1xuXHRcdFx0JHNjb3BlLnN0YXQucGVjUmVqZWN0ID0gKHJlamVjdCAvIGRhdGEubGVuZ3RoICogMTAwKS50b0ZpeGVkKDIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUuc3RhdC5wZWNSZWplY3QgPSAwO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIF9pID0gMDsgX2kgPCAkc2NvcGUucGllTGFiZWxzMS5sZW5ndGg7IF9pKyspIHtcblx0XHRcdCRzY29wZS5waWVEYXRhMS5wdXNoKCRzY29wZS5zdGF0WyRzY29wZS5waWVMYWJlbHMxW19pXV0pO1xuXHRcdH1cblxuXHRcdCRzY29wZS5waWVMYWJlbHMyID0gWydGaW5pc2gnLCAnSG9sZCddO1xuXHRcdCRzY29wZS5waWVEYXRhMiA9IFtjb21wbGV0ZWQgKyByZWplY3QsICRzY29wZS5zdGF0LnRvdGFsIC0gKGNvbXBsZXRlZCArIHJlamVjdCldO1xuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQkc2NvcGUuaXNTZWFyY2ggPSBmYWxzZTtcblx0XHQkc2NvcGUuc2VhcmNoT3B0aW9uID0gJ2RvY051bSc7XG5cdFx0JHNjb3BlLnNvcnRUeXBlID0gJ2NyZWF0ZUF0Jztcblx0XHQkc2NvcGUuc29ydFJldmVyc2UgPSBmYWxzZTtcblx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XG5cdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kID0gMDtcblx0fTtcblxuXHR2YXIgbWFpbiA9IGZ1bmN0aW9uIG1haW4oKSB7XG5cdFx0aW5pdCgpO1xuXHR9O1xuXHRtYWluKCk7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlckN0cmwnLCBbXSkuZmlsdGVyKCd1bmlxdWUnLCBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiBmdW5jdGlvbiAoY29sbGVjdGlvbiwga2V5bmFtZSkge1xuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAga2V5cyA9IFtdO1xuXG5cdFx0YW5ndWxhci5mb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIga2V5ID0gaXRlbVtrZXluYW1lXTtcblx0XHRcdGlmIChrZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcblx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdG91dHB1dC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH07XG59KS5jb250cm9sbGVyKCdUcmF2ZWxlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICdUcmF2ZWxlcicsICdGb3JtJywgJ0RvY051bScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHNjb3BlLCBUcmF2ZWxlciwgRm9ybSwgRG9jTnVtLCAkc3RhdGVQYXJhbXMpIHtcblxuXHQkc2NvcGUuY2hlY2tSZWFkeVJldmlldyA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgJiYgJHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgIT09ICdPUEVOJykge1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnT1BFTic7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ1BBTkRJTkcgRk9SIFJFVklFVyc7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnVwZGF0ZUZvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xuXHRcdGlmICgkc2NvcGUuZm9ybUlkKSB7XG5cdFx0XHRGb3JtLmdldCgkc2NvcGUuZm9ybUlkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdCRzY29wZS5mb3JtcyA9IGRhdGE7XG5cdFx0XHRcdC8vIGZpbmQgdGhlIGxhc3Qgc3ViU3RlcFxuXHRcdFx0XHQkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcblx0XHRcdFx0Ly8gaW5pdCB0aGUgdHJhdmVsZXJEYXRhIGZyb20gZm9ybURhdGFcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQgPSBkYXRhLl9pZDtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtUmV2ID0gZGF0YS5mb3JtUmV2O1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObyA9IGRhdGEuZm9ybU5vO1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmN1c3RvbWVyID0gZGF0YS5jdXN0b21lcjtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnT1BFTic7XG5cdFx0XHRcdGxvYWREb2NOdW1MaXN0KGRhdGEuX2lkLCBmdW5jdGlvbiAoKSB7fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnVwZGF0ZURvY051bSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEgPSAkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbJHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RdO1xuXHRcdHNldE51bURvY3RvVHJhdmVsZXIoKTtcblx0fTtcblxuXHQkc2NvcGUubmV4dFN0ZXAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIG9iamVjdCA9ICRzY29wZS5mb3Jtcy5zdGVwc1skc2NvcGUuY3VycmVudFN0ZXAgLSAxXTtcblx0XHRpZiAob2JqZWN0Lmxpc3QubGVuZ3RoID49ICRzY29wZS5jdXJyZW50U3ViU3RlcCArIDEpIHtcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCArPSAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgKz0gMTtcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0XHRpZiAoJHNjb3BlLmN1cnJlbnRTdGVwID4gJHNjb3BlLmxhc3RTdGVwKSB7XG5cdFx0XHRcdC8vIFRyYXZlbGVyLnNldFJldmlld0RhdGEoJHNjb3BlLnRyYXZlbGVyRGF0YSk7XG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEucmVhZHlSZXZpZXcgPSB0cnVlO1x0XHRcblx0XHRcdFx0JHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcoKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnN0YXR1c1BhZ2UgPSBmdW5jdGlvbiAocGFnZSkge1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gcGFnZTtcblx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XG5cdFx0Ly8gJHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcoKTtcblx0fTtcblxuXHQkc2NvcGUuc3RhdHVzU3ViUGFnZSA9IGZ1bmN0aW9uIChwYWdlKSB7XG5cdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gcGFnZTtcblx0fTtcblxuXHQkc2NvcGUuZ29CYWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5jdXJyZW50U3RlcCA9IDE7XG5cdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcblx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XG5cdFx0JHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcoKTtcblx0fTtcblxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkKSB7XG5cdFx0XHQvLyBzZXROdW1Eb2N0b1RyYXZlbGVyKCk7XG5cdFx0XHRUcmF2ZWxlci5zYXZlKCRzY29wZS50cmF2ZWxlckRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0Ly8gZG8gc29tZXRoaW5nXG5cdFx0XHRcdGFsZXJ0KCdzYXZlZCcpO1xuXHRcdFx0XHRzaG91bGRDb2xsYXBzZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRzY29wZS5zdWJtaXQoKTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnJldmlldyA9IGZ1bmN0aW9uIChvcHRpb24pIHtcblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5yZXZpZXdCeSkge1xuXHRcdFx0aWYgKG9wdGlvbiA9PT0gJ3JlamVjdCcpIHtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnUkVKRUNUJztcblx0XHRcdH0gZWxzZSBpZiAob3B0aW9uID09PSAnY29tcGxldGUnKSB7XG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ0NPTVBMRVRFRCc7XG5cdFx0XHR9XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnJldmlld0F0ID0gbmV3IERhdGUoKTtcblx0XHRcdCRzY29wZS5zYXZlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFsZXJ0KCdlbnRlciByZXZpZXdlciBuYW1lJyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS51c2VybmFtZSAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLnNuKSB7XG5cdFx0XHQvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0Ly8gc2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkID0gdHJ1ZTtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZEJ5ID0gJHNjb3BlLnVzZXJuYW1lO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVBdCA9IG5ldyBEYXRlKCk7XG5cdFx0XHRUcmF2ZWxlci5jcmVhdGUoJHNjb3BlLnRyYXZlbGVyRGF0YSlcblxuXHRcdFx0Ly8gaWYgc3VjY2Vzc2Z1bCBjcmVhdGVcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcblx0XHRcdFx0YWxlcnQoJ3N1Ym1pdCBjb21wbGV0ZScpO1xuXHRcdFx0XHRzaG91bGRDb2xsYXBzZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFsZXJ0KCdlbnRlciB5b3VyIG5hbWUgb3Igc2VyaWFsIG51bWJlciBwbHogJyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5uZXcgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmVzZXQoKTtcblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdGFsZXJ0KCdkZWxldGUgY2xpY2snKTtcblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpIHtcblx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKCRzY29wZS50cmF2ZWxlckRhdGEuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdHJlc2V0KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmFwcGVuZFN1YlN0ZXBFZGl0SW5mbyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdXNlcm5hbWUgPSAkc2NvcGUudXNlcm5hbWU7XG5cdFx0aWYgKHVzZXJuYW1lICE9PSAnJykge1xuXHRcdFx0dmFyIGN1cnJlbnRTdGVwID0gJHNjb3BlLmN1cnJlbnRTdGVwO1xuXHRcdFx0dmFyIGN1cnJlbnRTdWJTdGVwID0gJHNjb3BlLmN1cnJlbnRTdWJTdGVwO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGVwW2N1cnJlbnRTdGVwXVtjdXJyZW50U3ViU3RlcF0uZWRpdEJ5ID0gdXNlcm5hbWU7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXBbY3VycmVudFN0ZXBdW2N1cnJlbnRTdWJTdGVwXS5lZGl0VGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0YWxlcnQoJ2VudGVyIHlvdXIgbmFtZScpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQkc2NvcGUucHJpbnRUcmF2ZWxlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYtaWQtc2VsZWN0b3InKS5pbm5lckhUTUw7XG5cdFx0Ly8gICAgdmFyIHBvcHVwV2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnLCAnd2lkdGg9ODAwLGhlaWdodD04MDAsc2Nyb2xsYmFycz1ubyxtZW51YmFyPW5vLHRvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLHRpdGxlYmFyPW5vLHRvcD01MCcpO1xuXHRcdC8vICAgIHBvcHVwV2luLndpbmRvdy5mb2N1cygpO1xuXHRcdC8vICAgIHBvcHVwV2luLmRvY3VtZW50Lm9wZW4oKTtcblx0XHQvLyAgICBwb3B1cFdpbi5kb2N1bWVudC53cml0ZSgnPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPlRJVExFIE9GIFRIRSBQUklOVCBPVVQ8L3RpdGxlPicgK1xuXHRcdC8vICAgICAgICAnPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJsaWJzL2Jvb3NhdmVEb2NOdW10c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3NcIj4nICtcblx0XHQvLyAgICAgICAgJzwvaGVhZD48Ym9keSBvbmxvYWQ9XCJ3aW5kb3cucHJpbnQoKTsgd2luZG93LmNsb3NlKCk7XCI+PGRpdj4nICsgcHJpbnRDb250ZW50cyArICc8L2Rpdj48L2h0bWw+Jyk7XG5cdFx0Ly8gICAgcG9wdXBXaW4uZG9jdW1lbnQuY2xvc2UoKTtcblx0XHR3aW5kb3cucHJpbnQoKTtcblx0fTtcblxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgKlxyXG4gICpcclxuICAqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdCRzY29wZS5zYXZlRG9jTnVtID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5mb3JtSWQgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZDtcblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZm9ybVJldiA9ICRzY29wZS50cmF2ZWxlckRhdGEuZm9ybVJldjtcblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZm9ybU5vID0gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtTm87XG5cdFx0Ly8gY29uc29sZS5sb2coJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhKTtcblx0XHRzZXREb2NOdW1MYWJlbCgnY3JlYXRlJyk7XG5cdFx0ZGVsZXRlICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5faWQ7XG5cdFx0Ly8gY29uc29sZS5sb2coJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhKTtcblx0XHREb2NOdW0uY3JlYXRlKCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0bG9hZERvY051bUxpc3QoJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQsIGZ1bmN0aW9uIChsaXN0KSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChsaXN0W2ldLl9pZCA9PT0gZGF0YS5faWQpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IGRhdGE7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5lZGl0RG9jTnVtID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vIHNldERvY051bUxhYmVsKCdlZGl0Jyk7XG5cdFx0RG9jTnVtLmVkaXREb2NOdW1EYXRhKCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0bG9hZERvY051bUxpc3QoJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQsIGZ1bmN0aW9uICgpIHt9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUuY2hlY2tGb3JTTiA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICghJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpIHtcblx0XHRcdFRyYXZlbGVyLm5vcm1hbFNlYXJjaCgnc24nLCAkc2NvcGUudHJhdmVsZXJEYXRhLnNuKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdGlmIChkYXRhLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHQkc2NvcGUuaXNTTkV4aXN0ID0gdHJ1ZTtcblx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoU04gPSBkYXRhO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zZXRUcmF2ZWxlckRhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9ICRzY29wZS5zZWFyY2hTTlskc2NvcGUuc2VsZWN0U05dO1xuXHRcdGxvYWRJdGVtUmVjb3JkKCk7XG5cdH07XG5cblx0dmFyIHNob3VsZENvbGxhcHNlID0gZnVuY3Rpb24gc2hvdWxkQ29sbGFwc2UoKSB7XG5cdFx0aWYgKCRzY29wZS50cmF2ZWxlckRhdGEuc24gJiYgJHNjb3BlLnRyYXZlbGVyRGF0YS5pdGVtUmVjb3JkLmRvY051bSkge1xuXHRcdFx0JHNjb3BlLnRvcENvbGxhcHNlID0gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblx0dmFyIHNldE51bURvY3RvVHJhdmVsZXIgPSBmdW5jdGlvbiBzZXROdW1Eb2N0b1RyYXZlbGVyKCkge1xuXHRcdCRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZCA9IHtcblx0XHRcdFwiZG9jTnVtSWRcIjogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZCxcblx0XHRcdFwiZG9jTnVtXCI6ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW1cblx0XHR9O1xuXHR9O1xuXG5cdHZhciBzZXREb2NOdW1MYWJlbCA9IGZ1bmN0aW9uIHNldERvY051bUxhYmVsKGFjdGlvbikge1xuXG5cdFx0dmFyIGNvdW50ID0gMTtcblx0XHRpZiAoYWN0aW9uID09PSAnY3JlYXRlJykge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFtpXS5kb2NOdW0gPT09ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5kb2NOdW0pIHtcblx0XHRcdFx0XHRjb3VudCArPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gaWYoYWN0aW9uID09PSAnZWRpdCcpe1xuXHRcdC8vIFx0Zm9yKGxldCBpPTA7IGk8JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0Lmxlbmd0aDtpKyspe1xuXHRcdC8vIFx0XHRpZigkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbaV0uZG9jTnVtID09PSAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtICYmXG5cdFx0Ly8gXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0W2ldLl9pZCAhPT0gJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZCl7XG5cdFx0Ly8gXHRcdFx0Y291bnQgKz0gMTtcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0fVxuXHRcdC8vIH1cblx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEubGFiZWwgPSBjb3VudDtcblx0fTtcblxuXHR2YXIgbG9hZEZvcm1MaXN0ID0gZnVuY3Rpb24gbG9hZEZvcm1MaXN0KCkge1xuXHRcdEZvcm0uZ2V0Rm9ybUxpc3QoKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHQkc2NvcGUuZm9ybUxpc3QgPSBkYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciByZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcblx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSAxO1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xuXHRcdCRzY29wZS5mb3JtSWQgPSAnJztcblx0XHQkc2NvcGUuaXNOZXcgPSB0cnVlO1xuXHR9O1xuXG5cdHZhciBsb2FkRG9jTnVtTGlzdCA9IGZ1bmN0aW9uIGxvYWREb2NOdW1MaXN0KGlkLCBjYWxsYmFjaykge1xuXHRcdERvY051bS5nZXREb2NOdW1MaXN0KGlkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3QgPSBkYXRhO1xuXHRcdFx0Y2FsbGJhY2soZGF0YSk7XG5cdFx0fSk7XG5cdH07XG5cblx0Ly8gbG9hZCBpbmZvcm1hdGlvbiBmb3IgSXRlbVJlY29yZCB3aXRoXG5cdC8vIGRvY051bS5cblx0dmFyIGxvYWRJdGVtUmVjb3JkID0gZnVuY3Rpb24gbG9hZEl0ZW1SZWNvcmQoKSB7XG5cblx0XHREb2NOdW0uZ2V0RG9jTnVtTGlzdCgkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChkYXRhW2ldLl9pZCA9PT0gJHNjb3BlLnRyYXZlbGVyRGF0YS5pdGVtUmVjb3JkLmRvY051bUlkKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhID0gZGF0YVtpXTtcblx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQkc2NvcGUudG9wQ29sbGFwc2UgPSBmYWxzZTtcblx0XHQkc2NvcGUudXNlcm5hbWUgPSAnSm9obiBTbm93Jztcblx0XHQkc2NvcGUuZG9jTnVtID0ge307XG5cdFx0JHNjb3BlLmlzU05FeGlzdCA9IGZhbHNlO1xuXHRcdCRzY29wZS5zZWFyY2hTTiA9IHt9O1xuXHRcdCRzY29wZS5zZWxlY3RTTiA9ICcwJztcblx0fTtcblxuXHR2YXIgbWFpbiA9IGZ1bmN0aW9uIG1haW4oKSB7XG5cblx0XHRpbml0KCk7XG5cdFx0cmVzZXQoKTtcblx0XHRsb2FkRm9ybUxpc3QoKTtcblxuXHRcdGlmICgkc3RhdGVQYXJhbXMuZm9ybUlkKSB7XG5cdFx0XHQkc2NvcGUuZm9ybUlkID0gJHN0YXRlUGFyYW1zLmZvcm1JZDtcblx0XHRcdCRzY29wZS51cGRhdGVGb3JtKCk7XG5cdFx0XHQkc2NvcGUuaXNOZXcgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBsb2FkIHRoZSB0cmF2ZWxlciBmcm9tIFNlYXJjaCBwYWdlXG5cdFx0Ly8gdGFrZSB0aGUgcHJhbWFzIGZyb20gVVJMXG5cdFx0aWYgKCRzdGF0ZVBhcmFtcy5faWQpIHtcblx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xuXHRcdFx0VHJhdmVsZXIuZ2V0KCdfaWQnLCAkc3RhdGVQYXJhbXMuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdC8vIGRhdGEgaXMgYSBhcnJheS4gcmVzdWx0IGNvdWxkIGJlIG1vcmUgdGhhbiBvbmVcblx0XHRcdFx0Ly8gbmVlZCB0byBkZWFsIHdpdCB0aGlzLlxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcblx0XHRcdFx0bG9hZEl0ZW1SZWNvcmQoKTtcblx0XHRcdFx0c2hvdWxkQ29sbGFwc2UoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHRtYWluKCk7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdEb2NOdW1TZXJ2aWNlJywgW10pLmZhY3RvcnkoJ0RvY051bScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuXHRyZXR1cm4ge1xuXHRcdGdldERvY051bUxpc3Q6IGZ1bmN0aW9uIGdldERvY051bUxpc3QoZm9ybUlkKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RvY051bXMvJyArIGZvcm1JZCk7XG5cdFx0fSxcblx0XHRjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9kb2NOdW1zLycsIGRhdGEpO1xuXHRcdH0sXG5cdFx0ZWRpdERvY051bURhdGE6IGZ1bmN0aW9uIGVkaXREb2NOdW1EYXRhKGRhdGEpIHtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvZG9jTnVtcy8nLCBkYXRhKTtcblx0XHR9LFxuXHRcdGdldERvY051bTogZnVuY3Rpb24gZ2V0RG9jTnVtKHR5cGUsIGRhdGEpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdkIHNlcnZpY2UnKTtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9jTnVtcy9zZWFyY2hTaW5nbGU/dHlwZT0nICsgdHlwZSArICcmZGF0YT0nICsgZGF0YSk7XG5cdFx0fVxuXHR9O1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnRm9ybVNlcnZpY2UnLCBbXSkuZmFjdG9yeSgnRm9ybScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuXHRyZXR1cm4ge1xuXG5cdFx0Y3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvZm9ybXMnLCBkYXRhKTtcblx0XHR9LFxuXG5cdFx0Z2V0QWxsOiBmdW5jdGlvbiBnZXRBbGwoKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zLycpO1xuXHRcdH0sXG5cblx0XHRnZXRGb3JtTGlzdDogZnVuY3Rpb24gZ2V0Rm9ybUxpc3QoKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zL2Zvcm1MaXN0Jyk7XG5cdFx0fSxcblxuXHRcdGdldDogZnVuY3Rpb24gZ2V0KGZvcm1JZCkge1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9mb3Jtcy9zZWFyY2gvJyArIGZvcm1JZCk7XG5cdFx0fSxcblx0XHRzYXZlOiBmdW5jdGlvbiBzYXZlKGRhdGEpIHtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvZm9ybXMnLCBkYXRhKTtcblx0XHR9LFxuXHRcdGRlbGV0ZTogZnVuY3Rpb24gX2RlbGV0ZShmb3JtSWQpIHtcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvZm9ybXMvJyArIGZvcm1JZCk7XG5cdFx0fVxuXHR9O1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnVHJhdmVsZXJTZXJ2aWNlJywgW10pLmZhY3RvcnkoJ1RyYXZlbGVyJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgdmFyIHJldmlld0RhdGEgPSB7fTtcblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgLy8gdGhlc2Ugd2lsbCB3b3JrIHdoZW4gbW9yZSBBUEkgcm91dGVzIGFyZSBkZWZpbmVkIG9uIHRoZSBOb2RlIHNpZGUgb2YgdGhpbmdzXG4gICAgICAgIC8vIGNhbGwgdG8gUE9TVCBhbmQgY3JlYXRlIGEgbmV3IGZvcm1cbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoZm9ybURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3RyYXZlbGVyJywgZm9ybURhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFJldmlld0RhdGE6IGZ1bmN0aW9uIGdldFJldmlld0RhdGEoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmV2aWV3RGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCh0eXBlLCBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyP3R5cGU9JyArIHR5cGUgKyAnJmRhdGE9JyArIGRhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlcicsIGRhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFJldmlld0RhdGE6IGZ1bmN0aW9uIHNldFJldmlld0RhdGEoZGF0YSkge1xuICAgICAgICAgICAgcmV2aWV3RGF0YSA9IGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoTGlrZTogZnVuY3Rpb24gc2VhcmNoTGlrZShzbikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90cmF2ZWxlci9zZWFyY2hMaWtlLycgKyBzbik7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGNhbGwgdG8gREVMRVRFIGEgZm9ybVxuICAgICAgICByZW1vdmVUcmF2ZWxlcjogZnVuY3Rpb24gcmVtb3ZlVHJhdmVsZXIoX2lkLCBpbnB1dCkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coX2lkKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvdHJhdmVsZXIvJyArIF9pZCk7XG4gICAgICAgIH0sXG4gICAgICAgIG5vcm1hbFNlYXJjaDogZnVuY3Rpb24gbm9ybWFsU2VhcmNoKHR5cGUsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdHJhdmVsZXIvbm9ybWFsU2VhcmNoP3R5cGU9JyArIHR5cGUgKyAnJmRhdGE9JyArIGRhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnc2FtcGxlQXBwJywgXHJcblx0W1xyXG5cdFx0J3VpLnJvdXRlcicsIFxyXG5cdFx0J3VpLmJvb3RzdHJhcCcsXHJcblx0XHQnYXBwUm91dGVzJyxcclxuXHRcdCdkbmRMaXN0cycsXHJcblxyXG5cdFx0J0FwcEN0cmwnLFxyXG5cdFx0J01haW5DdHJsJywgXHJcblx0XHQnVHJhdmVsZXJDdHJsJywgXHJcblx0XHQnU2VhcmNoVHJhdmVsZXJDdHJsJywgXHJcblx0XHQnRm9ybUdlbkN0cmwuanMnLFxyXG5cdFx0XHJcblx0XHQnVHJhdmVsZXJTZXJ2aWNlJywgXHJcblx0XHQnRm9ybVNlcnZpY2UnLFxyXG5cdFx0J0RvY051bVNlcnZpY2UnXHJcblx0XVxyXG4pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHBSb3V0ZXMnLCBbJ3VpLnJvdXRlciddKVxyXG5cdC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInICxcclxuXHRcdGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcclxuXHJcblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvaG9tZScpO1xyXG5cclxuXHRcdC8vICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuXHRcdCRzdGF0ZVByb3ZpZGVyXHJcblxyXG5cdFx0XHQvLyBob21lIHBhZ2VcclxuXHRcdFx0LnN0YXRlKCdob21lJywge1xyXG5cdFx0XHRcdHVybDogJy9ob21lJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvbWUuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ01haW5Db250cm9sbGVyJ1xyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0XHJcblx0XHRcdC5zdGF0ZSgndHJhdmVsZXInLCB7XHJcblx0XHRcdFx0dXJsOiAnL3RyYXZlbGVyP19pZCZmb3JtSWQnLFxyXG5cdFx0XHRcdHZpZXdzOntcclxuXHRcdFx0XHRcdCcnOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90cmF2ZWxlci5odG1sJyxcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ1RyYXZlbGVyQ29udHJvbGxlcidcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHQnZm9ybVJldmlld0B0cmF2ZWxlcic6e1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1SZXZpZXcuaHRtbCdcclxuXHRcdFx0XHRcdFx0Ly8gY29udHJvbGxlcjogWyckc2NvcGUnLCAnVHJhdmVsZXInLCAnRm9ybScsZnVuY3Rpb24oJHNjb3BlLCBUcmF2ZWxlciwgRm9ybSl7XHJcblx0XHRcdFx0XHRcdC8vIFx0JHNjb3BlLnJldmlld0RhdGEgPSBUcmF2ZWxlci5nZXRSZXZpZXdEYXRhKCk7XHJcblx0XHRcdFx0XHRcdC8vIFx0Rm9ybS5nZXQoJHNjb3BlLnJldmlld0RhdGEuZm9ybUlkKVxyXG5cdFx0XHRcdFx0XHQvLyBcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRcdC8vIFx0XHRcdCRzY29wZS5mb3JtcyA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdC8vIFx0fSk7XHJcblx0XHRcdFx0XHRcdC8vIH1dXHJcblx0XHRcdFx0XHRcdC8vIGNvbnRyb2xsZXI6ICdUcmF2ZWxlckNvbnRyb2xsZXInXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0LnN0YXRlKCdzZWFyY2hUcmF2ZWxlcicse1xyXG5cdFx0XHRcdHVybDogJy9zZWFyY2hUcmF2ZWxlcicsXHJcblx0XHRcdFx0dmlld3M6e1xyXG5cdFx0XHRcdFx0Jyc6e1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NlYXJjaFRyYXZlbGVyLmh0bWwnLFxyXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnU2VhcmNoVHJhdmVsZXJDb250cm9sbGVyJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdCdmb3JtUmV2aWV3QHNlYXJjaFRyYXZlbGVyJzp7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybVJldmlldy5odG1sJ1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdC5zdGF0ZSgnZm9ybUdlbmVyYXRvcicse1xyXG5cdFx0XHRcdHVybDogJy9mb3JtR2VuZXJhdG9yJyxcclxuXHRcdFx0XHR2aWV3czp7XHJcblx0XHRcdFx0XHQnJzp7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybUdlbmVyYXRvck5hdi5odG1sJyxcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdCd0ZW1wbGF0ZUdlbmVyYXRvckBmb3JtR2VuZXJhdG9yJzp7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvdGVtcGxhdGVHZW5lcmF0b3IuaHRtbCcsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcidcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHQndGVtcGxhdGVDcmVhdG9yQGZvcm1HZW5lcmF0b3InOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90ZW1wbGF0ZUNyZWF0b3IuaHRtbCcsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcidcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBDdHJsJywgWyduZ0FuaW1hdGUnXSlcclxuXHRcclxuXHQuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcclxuXHJcblx0XHQkc2NvcGUuaXNDb2xsYXBzZWQgPSB0cnVlO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0Zvcm1HZW5DdHJsLmpzJywgWyd1aS5ib290c3RyYXAudGFicyddKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdGb3JtR2VuZXJhdG9yQ29udHJvbGxlcicsIFsnJHNjb3BlJywnRm9ybScgLCBmdW5jdGlvbigkc2NvcGUsIEZvcm0pe1xyXG5cclxuXHJcblx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24ocGFzc3dvcmQpe1xyXG5cdFx0XHRpZighcGFzc3dvcmQgfHwgcGFzc3dvcmQgPT09ICcnKXtcclxuXHRcdFx0XHRwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihwYXNzd29yZCA9PT0gJzEyMycpe1xyXG5cdFx0XHRGb3JtLmNyZWF0ZSgkc2NvcGUudGVtcGxhdGUpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PntcclxuXHRcdFx0XHRcdC8vIGRvIHNvbWV0aGluZ1xyXG5cdFx0XHRcdFx0YWxlcnQoJ2FkZCcpO1xyXG5cdFx0XHRcdFx0JHNjb3BlLmNyZWF0ZSA9IGRhdGE7XHJcblx0XHRcdFx0XHRkZWxldGUgJHNjb3BlLnRlbXBsYXRlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZ28gaG9tZSBzb24nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcclxuXHRcdFx0aWYocGFzc3dvcmQgPT09JzEyMycpe1xyXG5cdFx0XHRcdGlmKCRzY29wZS5jcmVhdGUuX2lkKXtcclxuXHRcdFx0XHRcdEZvcm0uc2F2ZSgkc2NvcGUuY3JlYXRlKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YT0+e1xyXG5cdFx0XHRcdFx0XHRhbGVydCgnc2F2ZScpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUuY3JlYXRlO1xyXG5cdFx0XHRcdFx0JHNjb3BlLnN1Ym1pdChwYXNzd29yZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZ28gaG9tZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5kZWxldGUgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgcGFzc3dvcmQgPSBwcm9tcHQoJ3Bhc3N3b3JkJyk7XHJcblx0XHRcdGlmKHBhc3N3b3JkID09PSAnUVFtb3JlJyl7XHJcblx0XHRcdFx0aWYoY29uZmlybSgnZGVsZXRlIHRlbXBsYXRlPycpKXtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmKCRzY29wZS5jcmVhdGUuX2lkKXtcclxuXHRcdFx0XHRcdFx0Rm9ybS5kZWxldGUoJHNjb3BlLmNyZWF0ZS5faWQpXHJcblx0XHRcdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YT0+e1xyXG5cdFx0XHRcdFx0XHRcdFx0YWxlcnQoJ3JlbW92ZWQnKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aW5pdENyZWF0ZSgpO1xyXG5cdFx0XHRcdH1cdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZ28gaG9tZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5zZXRTZWxlY3RUYWIgPSBmdW5jdGlvbihuKXtcclxuXHRcdFx0JHNjb3BlLnNlbGVjdFRhYiA9IG47XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5hZGRJdGVtUmVjb3JkID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoJHNjb3BlLmlucHV0SXRlbVJlY29yZCAmJiAkc2NvcGUuaW5wdXRJdGVtUmVjb3JkICE9PSAnJyl7XHJcblx0XHRcdFx0aWYoISRzY29wZS5jcmVhdGUuaXRlbVJlY29yZCl7XHJcblx0XHRcdFx0XHQkc2NvcGUuY3JlYXRlLml0ZW1SZWNvcmQgPSBbXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGxlbiA9ICRzY29wZS5jcmVhdGUuaXRlbVJlY29yZC5sZW5ndGg7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSB7XHJcblx0XHRcdFx0XHRcImlkXCI6IGxlbisxLFxyXG5cdFx0XHRcdFx0XCJEZXNjcmlwdGlvblwiOiRzY29wZS5pbnB1dEl0ZW1SZWNvcmRcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGlmKCRzY29wZS5pbnB1dEl0ZW1SZWNvcmRUeXBlID09PSAnc2VsZWN0Jyl7XHJcblx0XHRcdFx0XHR2YXIgaG9sZGVyID0gJHNjb3BlLnNlbGVjdE9wdGlvbnM7XHJcblx0XHRcdFx0XHRob2xkZXIgPSBob2xkZXIuc3BsaXQoJywnKTtcclxuXHRcdFx0XHRcdGZvcihsZXQgaSA9IDA7IGk8aG9sZGVyLmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdFx0XHRob2xkZXJbaV0gPSBob2xkZXJbaV0udHJpbSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aG9sZGVyID0gQXJyYXkuZnJvbShuZXcgU2V0KGhvbGRlcikpO1xyXG5cdFx0XHRcdFx0aXRlbVsnc2VsZWN0J10gPSB7J25hbWUnOicnfTtcclxuXHRcdFx0XHRcdGl0ZW0uc2VsZWN0WydvcHRpb25zJ10gPSBob2xkZXI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuaXRlbVJlY29yZC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdCRzY29wZS5pbnB1dEl0ZW1SZWNvcmQgPSAnJztcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuYWRkU3RlcCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdC8vIGlmKCRzY29wZS5pbnB1dFN0ZXBEZXMgJiYgJHNjb3BlLmlucHV0U3RlcERlcyAhPT0gJycpe1xyXG5cdFx0XHRcdGlmKCEkc2NvcGUuY3JlYXRlLnN0ZXBzKXtcclxuXHRcdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHMgPSBbXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGxlbiA9ICRzY29wZS5jcmVhdGUuc3RlcHMubGVuZ3RoO1xyXG5cdFx0XHRcdHZhciBzdGVwID0ge1xyXG5cdFx0XHRcdFx0XCJzdGVwXCI6IGxlbisxLFxyXG5cdFx0XHRcdFx0XCJ0eXBlXCI6ICRzY29wZS5pbnB1dFN0ZXBUeXBlIHx8ICcnLFxyXG5cdFx0XHRcdFx0XCJEZXNjcmlwdGlvblwiOiAkc2NvcGUuaW5wdXRTdGVwRGVzIHx8ICcnXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzLnB1c2goc3RlcCk7XHJcblxyXG5cdFx0XHRcdCRzY29wZS5pbnB1dFN0ZXBEZXMgPSAnJztcclxuXHRcdFx0Ly8gfVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuYWRkU3ViU3RlcCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKCRzY29wZS50ZW1wU3ViLmlucHV0U3ViU3RlcERlcyAmJiAkc2NvcGUudGVtcFN1Yi5pbnB1dFN1YlN0ZXBEZXMgIT09ICcnKXtcclxuXHRcdFx0XHRsZXQgc3RlcEluZGV4ID0gJHNjb3BlLnRlbXBTdWIuc2VsZWN0U3RlcEZvclN1YlN0ZXA7XHJcblx0XHRcdFx0aWYoISRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0KXtcclxuXHRcdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcEluZGV4XS5saXN0PVtdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsZXQgbGVuID0gJHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwSW5kZXhdLmxpc3QubGVuZ3RoO1xyXG5cdFx0XHRcdGxldCBzdWJTdGVwID0ge1xyXG5cdFx0XHRcdFx0XCJzdWJfc3RlcFwiOiBsZW4rMSxcclxuXHRcdFx0XHRcdFwiRGVzY3JpcHRpb25cIjogJHNjb3BlLnRlbXBTdWIuaW5wdXRTdWJTdGVwRGVzXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHQkc2NvcGUuY3JlYXRlLnN0ZXBzW3N0ZXBJbmRleF0ubGlzdC5wdXNoKHN1YlN0ZXApO1xyXG5cdFx0XHRcdCRzY29wZS50ZW1wU3ViLmlucHV0U3ViU3RlcERlcyA9ICcnO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5hZGRTdWJPcHRpb24gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRsZXQgc3RlcCA9ICRzY29wZS50ZW1wU3ViT3B0aW9uLnNlbGVjdFN1YkZvck9wdGlvbi5zcGxpdCgnLCcpWzBdO1xyXG5cdFx0XHRsZXQgc3ViID0gJHNjb3BlLnRlbXBTdWJPcHRpb24uc2VsZWN0U3ViRm9yT3B0aW9uLnNwbGl0KCcsJylbMV07XHJcblx0XHRcdGxldCBzZWxlY3RPcHRpb24gPSAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLnNlbGVjdFN1Yk9wdGlvbjtcclxuXHRcdFx0bGV0IG9wdGlvbnMgPSAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5pbnB1dC5zcGxpdCgnLCcpO1xyXG5cdFx0XHRmb3IobGV0IGk9MDsgaTwgb3B0aW9ucy5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHRvcHRpb25zW2ldID0gb3B0aW9uc1tpXS50cmltKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0b3B0aW9ucyA9IEFycmF5LmZyb20obmV3IFNldChvcHRpb25zKSk7XHJcblx0XHRcdGxldCBzdWJTdGVwT3B0aW9uID0ge1xyXG5cdFx0XHRcdFx0XCJ0eXBlXCI6IHNlbGVjdE9wdGlvbixcclxuXHRcdFx0XHRcdFwibmFtZVwiOiAkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5uYW1lLFxyXG5cdFx0XHRcdFx0XCJvcHRpb25zXCI6IG9wdGlvbnNcclxuXHRcdFx0fTtcclxuXHRcdFx0aWYoISRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcF0ubGlzdFtzdWJdLm9wdGlvbnMpe1xyXG5cdFx0XHRcdCRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcF0ubGlzdFtzdWJdLm9wdGlvbnM9W107XHJcblx0XHRcdH1cclxuXHRcdFx0JHNjb3BlLmNyZWF0ZS5zdGVwc1tzdGVwXS5saXN0W3N1Yl0ub3B0aW9ucy5wdXNoKHN1YlN0ZXBPcHRpb24pO1xyXG5cdFx0XHQvLyRzY29wZS5jcmVhdGUuc3RlcHNbc3RlcF0ubGlzdFtzdWJdW3NlbGVjdE9wdGlvbl0gPSBzdWJTdGVwT3B0aW9uO1xyXG5cdFx0XHQkc2NvcGUudGVtcFN1Yk9wdGlvbi5zdWJPcHRpb25zLm9wdGlvbi5uYW1lID0gJyc7XHJcblx0XHRcdCRzY29wZS50ZW1wU3ViT3B0aW9uLnN1Yk9wdGlvbnMub3B0aW9uLmlucHV0ID0gJyc7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQkc2NvcGUubW9kaWZ5SUQgPSBmdW5jdGlvbihvYmplY3QsIHR5cGUpe1xyXG5cdFx0XHRmb3IobGV0IGk9MDsgaTxvYmplY3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0aWYodHlwZSA9PT0naXRlbVJlY29yZCcpe1xyXG5cdFx0XHRcdFx0b2JqZWN0W2ldLmlkID0gaSsxO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZih0eXBlID09PSdzdGVwcycpe1xyXG5cdFx0XHRcdFx0b2JqZWN0W2ldLnN0ZXAgPSBpKzE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHR5cGUgPT09J3N1Yl9zdGVwJyl7XHJcblx0XHRcdFx0XHRvYmplY3RbaV0uc3ViX3N0ZXAgPSBpKzE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5lZGl0T3B0aW9uID0gZnVuY3Rpb24oYWRkcmVzcywgaW5wdXQpe1xyXG4gICAgICBjb25zb2xlLmxvZyh0eXBlb2YgaW5wdXQpO1xyXG4gICAgICBjb25zb2xlLmxvZyhpbnB1dCk7XHJcblx0XHRcdGlmKGFkZHJlc3Mpe1xyXG5cdFx0XHRcdGFkZHJlc3Mub3B0aW9ucyA9IFtdO1xyXG4gICAgICAgIGlmKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpe1xyXG5cdFx0XHRcdCAgaW5wdXQgPSBpbnB1dC5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuXHRcdFx0XHRmb3IobGV0IGk9MDtpPGlucHV0Lmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdFx0YWRkcmVzcy5vcHRpb25zW2ldID0gaW5wdXRbaV0udHJpbSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhZGRyZXNzLm9wdGlvbnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWRkcmVzcy5vcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZUZvcm0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcclxuICAgICAgICAgIGlmKCRzY29wZS5mb3JtSWQpe1xyXG4gICAgICAgICAgICBGb3JtLmdldCgkc2NvcGUuZm9ybUlkKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmZvcm1zID0gZGF0YTsgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gLy8gZmluZCB0aGUgbGFzdCBzdWJTdGVwXHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIC8vIC8vIGluaXQgdGhlIHRyYXZlbGVyRGF0YSBmcm9tIGZvcm1EYXRhXHJcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCA9IGRhdGEuX2lkO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtUmV2ID0gZGF0YS5mb3JtUmV2O1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtTm8gPSBkYXRhLmZvcm1ObztcclxuICAgICAgICAgICAgICAgIC8vICRzY29wZS50cmF2ZWxlckRhdGEuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnT1BFTic7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3JlYXRlPSBkYXRhO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblx0XHR2YXIgaW5pdENyZWF0ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5jcmVhdGUgPSB7fTtcclxuXHRcdFx0JHNjb3BlLmNyZWF0ZS5pc1B1Ymxpc2ggPSBmYWxzZTtcclxuXHRcdH07XHJcblxyXG4gICAgdmFyIGxvYWRGb3JtTGlzdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgIEZvcm0uZ2V0Rm9ybUxpc3QoKVxyXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgJHNjb3BlLmZvcm1MaXN0ID0gZGF0YTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHRcdHZhciBtYWluID0gZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdGluaXRDcmVhdGUoKTtcclxuICAgICAgbG9hZEZvcm1MaXN0KCk7XHJcblx0XHRcclxuXHRcdFx0JHNjb3BlLmlucHV0SXRlbVJlY29yZFR5cGUgPSAndGV4dCc7XHJcblx0XHRcdCRzY29wZS5qc29uVmlldyA9IGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcblx0XHRtYWluKCk7XHJcblx0fV0pOyIsImFuZ3VsYXIubW9kdWxlKCdNYWluQ3RybCcsIFtdKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcclxuXHJcblx0XHQkc2NvcGUudGFnbGluZSA9ICd0byB0aGUgbW9vbiBhbmQgYmFjayEnO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ1NlYXJjaFRyYXZlbGVyQ3RybCcsIFsnY2hhcnQuanMnXSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1NlYXJjaFRyYXZlbGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1RyYXZlbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBUcmF2ZWxlcil7XHJcblxyXG5cdFx0JHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5jdXJyZW50SW5wdXQgPSAkc2NvcGUuc2VhcmNoSW5wdXQ7XHJcblx0XHRcdCRzY29wZS5pc1NlYXJjaCA9IHRydWU7XHJcblx0XHRcdGlmKCRzY29wZS5zZWFyY2hJbnB1dCl7XHJcblx0XHRcdFx0aWYoJHNjb3BlLnNlYXJjaE9wdGlvbiA9PT0nc24nKXtcclxuXHRcdFx0XHRcdGxldCBzbiA9ICRzY29wZS5zZWFyY2hJbnB1dC50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0VHJhdmVsZXIuc2VhcmNoTGlrZShzbilcclxuXHJcblx0XHRcdFx0XHRcdC5zdWNjZXNzKCBkYXRhID0+e1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5yZXN1bHQ9ZGF0YTtcclxuXHRcdFx0XHRcdFx0XHRmaW5kU3RhdGlzdGljcygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdC8vIHNlYXJjaCBkb2MgbnVtXHJcblx0XHRcdFx0XHRUcmF2ZWxlci5ub3JtYWxTZWFyY2goJHNjb3BlLnNlYXJjaE9wdGlvbiwgJHNjb3BlLnNlYXJjaElucHV0KVxyXG5cdFx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+e1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5yZXN1bHQ9ZGF0YTtcclxuXHRcdFx0XHRcdFx0XHRmaW5kU3RhdGlzdGljcygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5lZGl0VHJhdmVsZXIgPSBmdW5jdGlvbihfaWQsIGZvcm1JZCl7XHJcblx0XHRcdHdpbmRvdy5vcGVuKCd0cmF2ZWxlcj9faWQ9JytfaWQrJyZmb3JtSWQ9Jytmb3JtSWQsICdfYmxhbmsnKTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnJlbW92ZVRyYXZlbGVyID0gZnVuY3Rpb24oX2lkLCBpbmRleCl7XHJcblx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKF9pZClcclxuXHRcdFx0XHQuc3VjY2VzcyggZGF0YSA9PiB7XHJcblx0XHRcdFx0XHQvLyAkc2NvcGUucmVzdWx0PWRhdGE7XHJcblx0XHRcdFx0XHQkc2NvcGUucmVzdWx0LnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS50aW1lU3BlbmQgPSBmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0aWYoZGF0YS5yZXZpZXdBdCl7XHJcblx0XHRcdFx0bGV0IGRpZmYgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZShkYXRhLnJldmlld0F0KSAtIG5ldyBEYXRlKGRhdGEuY3JlYXRlQXQpKS8xMDAwKTtcclxuXHRcdFx0XHQkc2NvcGUudG90YWxUaW1lU3BhbmQgKz0gZGlmZjtcclxuXHRcdFx0XHRyZXR1cm4gY2FsdWxhdGVUaW1lKGRpZmYpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRsZXQgZGlmZiA9IE1hdGgucm91bmQoKG5ldyBEYXRlKCkgLSBuZXcgRGF0ZShkYXRhLmNyZWF0ZUF0KSkvMTAwMCk7XHJcblx0XHRcdFx0JHNjb3BlLnRvdGFsVGltZVNwYW5kICs9IGRpZmY7XHJcblx0XHRcdFx0cmV0dXJuIGNhbHVsYXRlVGltZShkaWZmKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUudG90YWxUaW1lU3BlbmQgPSBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0cmV0dXJuIDU7XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBjYWx1bGF0ZVRpbWUgPSBmdW5jdGlvbihzZWNvbmRzKXtcclxuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3Ioc2Vjb25kcy82MC82MCkgKyAnIEhvdXJzIGFuZCAnICsgTWF0aC5mbG9vcihzZWNvbmRzLzYwKSU2MCArIFxyXG5cdFx0XHRcdFx0JyBtaW4gYW5kICcgKyBzZWNvbmRzICUgNjAgKyAnIHNlYyc7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vICRzY29wZS5wcmludFRyYXZlbGVyID0gZnVuY3Rpb24oaW5kZXgpe1xyXG5cdFx0Ly8gXHQkc2NvcGUudHJhdmVsZXJEYXRhID0gJHNjb3BlLnJlc3VsdFtpbmRleF07XHJcblx0XHRcdC8vIHZhciBwcmludENvbnRlbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpdi1pZC1zZWxlY3RvcicpLmlubmVySFRNTDtcclxuXHRcdCAvLyAgICB2YXIgcG9wdXBXaW4gPSB3aW5kb3cub3BlbignJywgJ19ibGFuaycsICd3aWR0aD04MDAsaGVpZ2h0PTgwMCxzY3JvbGxiYXJzPW5vLG1lbnViYXI9bm8sdG9vbGJhcj1ubyxsb2NhdGlvbj1ubyxzdGF0dXM9bm8sdGl0bGViYXI9bm8sdG9wPTUwJyk7XHJcblx0XHQgLy8gICAgcG9wdXBXaW4ud2luZG93LmZvY3VzKCk7XHJcblx0XHQgLy8gICAgcG9wdXBXaW4uZG9jdW1lbnQub3BlbigpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLmRvY3VtZW50LndyaXRlKCc8IURPQ1RZUEUgaHRtbD48aHRtbD48aGVhZD48dGl0bGU+VElUTEUgT0YgVEhFIFBSSU5UIE9VVDwvdGl0bGU+JyArXHJcblx0XHQgLy8gICAgICAgICc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cImxpYnMvYm9vc2F2ZURvY051bXRzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzc1wiPicgK1xyXG5cdFx0IC8vICAgICAgICAnPC9oZWFkPjxib2R5IG9ubG9hZD1cIndpbmRvdy5wcmludCgpOyB3aW5kb3cuY2xvc2UoKTtcIj48ZGl2PicgKyBwcmludENvbnRlbnRzICsgJzwvZGl2PjwvaHRtbD4nKTtcclxuXHRcdCAvLyAgICBwb3B1cFdpbi5kb2N1bWVudC5jbG9zZSgpO1xyXG5cdFx0Ly8gfVxyXG5cclxuXHRcdHZhciBmaW5kU3RhdGlzdGljcyA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5zdGF0ID0ge307XHJcblx0XHRcdCRzY29wZS5waWVMYWJlbHMxPVtdO1xyXG5cdFx0XHQkc2NvcGUucGllRGF0YTEgPSBbXTtcclxuXHRcdFx0bGV0IGRhdGEgPSAkc2NvcGUucmVzdWx0O1xyXG5cdFx0XHRmb3IobGV0IGk9MDsgaTxkYXRhLmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdGlmKGRhdGFbaV0uc3RhdHVzIGluICRzY29wZS5zdGF0KXtcclxuXHRcdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSArPTE7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQkc2NvcGUucGllTGFiZWxzMS5wdXNoKGRhdGFbaV0uc3RhdHVzKTtcclxuXHRcdFx0XHRcdCRzY29wZS5zdGF0W2RhdGFbaV0uc3RhdHVzXSA9MTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0JHNjb3BlLnN0YXQudG90YWwgPSBkYXRhLmxlbmd0aDtcclxuXHRcdFx0bGV0IHJlamVjdCA9IDA7XHJcblx0XHRcdGxldCBjb21wbGV0ZWQgPSAwO1xyXG5cdFx0XHQvLyBjYWx1bGF0ZSBwZXJjZW50IG9mIHRvdGFsIGNvbXBsYXRlZCBvdXQgb2YgdG90YWxcclxuXHRcdFx0aWYoJHNjb3BlLnN0YXQuUkVKRUNUKXtcclxuXHRcdFx0XHRyZWplY3QgPSAkc2NvcGUuc3RhdC5SRUpFQ1Q7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCRzY29wZS5zdGF0LkNPTVBMRVRFRCl7XHJcblx0XHRcdFx0Y29tcGxldGVkID0gJHNjb3BlLnN0YXQuQ09NUExFVEVEO1xyXG5cdFx0XHR9XHJcblx0XHRcdCRzY29wZS5zdGF0LnBlY0NvbXBsZXRlID0gKCgoY29tcGxldGVkKSsocmVqZWN0KSkvKGRhdGEubGVuZ3RoKSoxMDApLnRvRml4ZWQoMik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjYWx1bGF0ZSBwZXJjZW50IG9mIHJlamVjdCBvdXQgb2YgdG90YWxcclxuXHRcdFx0aWYoKCRzY29wZS5zdGF0LlJFSkVDVCkvKGRhdGEubGVuZ3RoKSoxMDApe1xyXG5cdFx0XHRcdCRzY29wZS5zdGF0LnBlY1JlamVjdCA9ICgocmVqZWN0KS8oZGF0YS5sZW5ndGgpKjEwMCkudG9GaXhlZCgyKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0JHNjb3BlLnN0YXQucGVjUmVqZWN0ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Zm9yKGxldCBpPTA7aTwkc2NvcGUucGllTGFiZWxzMS5sZW5ndGg7aSsrKXtcclxuXHRcdFx0XHQkc2NvcGUucGllRGF0YTEucHVzaCgkc2NvcGUuc3RhdFskc2NvcGUucGllTGFiZWxzMVtpXV0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkc2NvcGUucGllTGFiZWxzMiA9IFsnRmluaXNoJywgJ0hvbGQnXTtcclxuXHRcdFx0JHNjb3BlLnBpZURhdGEyID0gW2NvbXBsZXRlZCtyZWplY3QsICgkc2NvcGUuc3RhdC50b3RhbC0oY29tcGxldGVkK3JlamVjdCkpXTtcclxuXHRcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuaXNTZWFyY2ggPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLnNlYXJjaE9wdGlvbiA9ICdkb2NOdW0nO1xyXG5cdFx0XHQkc2NvcGUuc29ydFR5cGUgPSAnY3JlYXRlQXQnO1xyXG5cdFx0XHQkc2NvcGUuc29ydFJldmVyc2UgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xyXG5cdFx0XHQkc2NvcGUudG90YWxUaW1lU3BhbmQgPSAwO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgbWFpbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGluaXQoKTtcclxuXHRcdH07XHJcblx0XHRtYWluKCk7XHJcblx0fV0pOyIsImFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlckN0cmwnLCBbXSlcclxuXHRcclxuXHQuZmlsdGVyKCd1bmlxdWUnLCBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGtleW5hbWUpe1xyXG5cdFx0XHR2YXIgb3V0cHV0ID0gW10sXHJcblx0XHRcdFx0a2V5cyAgID0gW107XHJcblxyXG5cdFx0XHRhbmd1bGFyLmZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSl7XHJcblx0XHRcdFx0dmFyIGtleSA9IGl0ZW1ba2V5bmFtZV07XHJcblx0XHRcdFx0aWYoa2V5cy5pbmRleE9mKGtleSkgPT09IC0xKXtcclxuXHRcdFx0XHRcdGtleXMucHVzaChrZXkpO1xyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goaXRlbSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIG91dHB1dDtcclxuXHRcdH07XHJcblx0fSlcclxuXHRcclxuXHQuY29udHJvbGxlcignVHJhdmVsZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCdUcmF2ZWxlcicsICdGb3JtJywgJ0RvY051bScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbigkc2NvcGUsIFRyYXZlbGVyLCBGb3JtLCBEb2NOdW0sICRzdGF0ZVBhcmFtcyl7XHJcblxyXG5cdFx0JHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyAmJiAkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyAhPT0gJ09QRU4nKXtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdPUEVOJztcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnJlYWR5UmV2aWV3ID0gZmFsc2U7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RhdHVzID0gJ1BBTkRJTkcgRk9SIFJFVklFVyc7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnVwZGF0ZUZvcm0gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xyXG5cdFx0XHRpZigkc2NvcGUuZm9ybUlkKXtcclxuXHRcdFx0XHRGb3JtLmdldCgkc2NvcGUuZm9ybUlkKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5mb3JtcyA9IGRhdGE7XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gZmluZCB0aGUgbGFzdCBzdWJTdGVwXHJcblx0XHRcdFx0XHRcdCRzY29wZS5sYXN0U3RlcCA9IGRhdGEuc3RlcHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHQvLyBpbml0IHRoZSB0cmF2ZWxlckRhdGEgZnJvbSBmb3JtRGF0YVxyXG5cdFx0XHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCA9IGRhdGEuX2lkO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXYgPSBkYXRhLmZvcm1SZXY7XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuZm9ybU5vID0gZGF0YS5mb3JtTm87XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0YXR1cyA9ICdPUEVOJztcclxuXHRcdFx0XHRcdFx0bG9hZERvY051bUxpc3QoZGF0YS5faWQsICgpPT57fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUudXBkYXRlRG9jTnVtID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhID0gJHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3RMaXN0WyRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0XTtcclxuXHRcdFx0c2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUubmV4dFN0ZXAgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgb2JqZWN0ID0gJHNjb3BlLmZvcm1zLnN0ZXBzWyRzY29wZS5jdXJyZW50U3RlcC0xXTtcclxuXHRcdFx0aWYob2JqZWN0Lmxpc3QubGVuZ3RoID49ICRzY29wZS5jdXJyZW50U3ViU3RlcCsxKXtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgKz0gMTtcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgKz0gMTtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHRcdGlmKCRzY29wZS5jdXJyZW50U3RlcCA+ICRzY29wZS5sYXN0U3RlcCl7XHJcblx0XHRcdFx0XHQvLyBUcmF2ZWxlci5zZXRSZXZpZXdEYXRhKCRzY29wZS50cmF2ZWxlckRhdGEpO1xyXG5cdFx0XHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IHRydWU7XHRcdFxyXG5cdFx0XHRcdFx0JHNjb3BlLmNoZWNrUmVhZHlSZXZpZXcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnN0YXR1c1BhZ2UgPSBmdW5jdGlvbihwYWdlKXtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gcGFnZTtcclxuXHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xyXG5cdFx0XHQvLyAkc2NvcGUuY2hlY2tSZWFkeVJldmlldygpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3RhdHVzU3ViUGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSBwYWdlO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuZ29CYWNrID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcclxuXHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5yZWFkeVJldmlldyA9IGZhbHNlO1xyXG5cdFx0XHQkc2NvcGUuY2hlY2tSZWFkeVJldmlldygpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZCl7XHJcblx0XHRcdFx0Ly8gc2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0XHRcdFRyYXZlbGVyLnNhdmUoJHNjb3BlLnRyYXZlbGVyRGF0YSlcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGRhdGEgPT57XHJcblx0XHRcdFx0XHRcdC8vIGRvIHNvbWV0aGluZ1xyXG5cdFx0XHRcdFx0XHRhbGVydCgnc2F2ZWQnKTtcclxuXHRcdFx0XHRcdFx0c2hvdWxkQ29sbGFwc2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkc2NvcGUuc3VibWl0KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnJldmlldyA9IGZ1bmN0aW9uKG9wdGlvbil7XHJcblx0XHRcdGlmKCRzY29wZS50cmF2ZWxlckRhdGEucmV2aWV3Qnkpe1xyXG5cdFx0XHRcdGlmKG9wdGlvbiA9PT0gJ3JlamVjdCcpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnUkVKRUNUJztcclxuXHRcdFx0XHR9ZWxzZSBpZihvcHRpb24gPT09ICdjb21wbGV0ZScpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGF0dXMgPSAnQ09NUExFVEVEJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5yZXZpZXdBdCA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdFx0JHNjb3BlLnNhdmUoKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0YWxlcnQoJ2VudGVyIHJldmlld2VyIG5hbWUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoJHNjb3BlLnVzZXJuYW1lICYmICRzY29wZS50cmF2ZWxlckRhdGEuc24pe1xyXG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEuY29tcGxldGVkID0gZmFsc2U7XHJcblx0XHRcdFx0Ly8gc2V0TnVtRG9jdG9UcmF2ZWxlcigpO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZCA9IHRydWU7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkQnkgPSAkc2NvcGUudXNlcm5hbWU7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVBdCA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdFx0VHJhdmVsZXIuY3JlYXRlKCRzY29wZS50cmF2ZWxlckRhdGEpXHJcblxyXG5cdFx0XHRcdFx0Ly8gaWYgc3VjY2Vzc2Z1bCBjcmVhdGVcclxuXHRcdFx0XHRcdC5zdWNjZXNzKCBkYXRhID0+e1xyXG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KCdzdWJtaXQgY29tcGxldGUnKTtcclxuXHRcdFx0XHRcdFx0c2hvdWxkQ29sbGFwc2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZW50ZXIgeW91ciBuYW1lIG9yIHNlcmlhbCBudW1iZXIgcGx6ICcpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5uZXcgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRyZXNldCgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0YWxlcnQoJ2RlbGV0ZSBjbGljaycpO1xyXG5cdFx0XHRpZigkc2NvcGUudHJhdmVsZXJEYXRhLl9pZCl7XHJcblx0XHRcdFx0VHJhdmVsZXIucmVtb3ZlVHJhdmVsZXIoJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpXHJcblx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+IHtcclxuXHRcdFx0XHRcdFx0cmVzZXQoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5hcHBlbmRTdWJTdGVwRWRpdEluZm8gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgdXNlcm5hbWUgPSAkc2NvcGUudXNlcm5hbWU7XHJcblx0XHRcdGlmKHVzZXJuYW1lICE9PSAnJyl7XHJcblx0XHRcdFx0dmFyIGN1cnJlbnRTdGVwID0gJHNjb3BlLmN1cnJlbnRTdGVwO1xyXG5cdFx0XHRcdHZhciBjdXJyZW50U3ViU3RlcCA9ICRzY29wZS5jdXJyZW50U3ViU3RlcDtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXBbY3VycmVudFN0ZXBdW2N1cnJlbnRTdWJTdGVwXS5lZGl0QnkgPSB1c2VybmFtZTtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXBbY3VycmVudFN0ZXBdW2N1cnJlbnRTdWJTdGVwXS5lZGl0VGltZSA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0YWxlcnQoJ2VudGVyIHlvdXIgbmFtZScpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5wcmludFRyYXZlbGVyID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gdmFyIHByaW50Q29udGVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGl2LWlkLXNlbGVjdG9yJykuaW5uZXJIVE1MO1xyXG5cdFx0IC8vICAgIHZhciBwb3B1cFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgJ3dpZHRoPTgwMCxoZWlnaHQ9ODAwLHNjcm9sbGJhcnM9bm8sbWVudWJhcj1ubyx0b29sYmFyPW5vLGxvY2F0aW9uPW5vLHN0YXR1cz1ubyx0aXRsZWJhcj1ubyx0b3A9NTAnKTtcclxuXHRcdCAvLyAgICBwb3B1cFdpbi53aW5kb3cuZm9jdXMoKTtcclxuXHRcdCAvLyAgICBwb3B1cFdpbi5kb2N1bWVudC5vcGVuKCk7XHJcblx0XHQgLy8gICAgcG9wdXBXaW4uZG9jdW1lbnQud3JpdGUoJzwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjx0aXRsZT5USVRMRSBPRiBUSEUgUFJJTlQgT1VUPC90aXRsZT4nICtcclxuXHRcdCAvLyAgICAgICAgJzxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIiBocmVmPVwibGlicy9ib29zYXZlRG9jTnVtdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzXCI+JyArXHJcblx0XHQgLy8gICAgICAgICc8L2hlYWQ+PGJvZHkgb25sb2FkPVwid2luZG93LnByaW50KCk7IHdpbmRvdy5jbG9zZSgpO1wiPjxkaXY+JyArIHByaW50Q29udGVudHMgKyAnPC9kaXY+PC9odG1sPicpO1xyXG5cdFx0IC8vICAgIHBvcHVwV2luLmRvY3VtZW50LmNsb3NlKCk7XHJcblx0XHRcdHdpbmRvdy5wcmludCgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqXHJcblx0XHQgKlxyXG5cdFx0ICpcclxuXHRcdCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblx0XHQkc2NvcGUuc2F2ZURvY051bSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5mb3JtSWQgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZDtcclxuXHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmZvcm1SZXYgPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1SZXY7XHJcblx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5mb3JtTm8gPSAkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1ObztcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhKTtcclxuXHRcdFx0c2V0RG9jTnVtTGFiZWwoJ2NyZWF0ZScpO1xyXG5cdFx0XHRkZWxldGUgJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZDtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhKTtcclxuXHRcdFx0RG9jTnVtLmNyZWF0ZSgkc2NvcGUuZG9jTnVtLmRvY051bURhdGEpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRsb2FkRG9jTnVtTGlzdCgkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZCwgKGxpc3QpPT57XHJcblx0XHRcdFx0XHRcdGZvcihsZXQgaT0wOyBpPGxpc3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRcdFx0aWYobGlzdFtpXS5faWQgPT09IGRhdGEuX2lkKXtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdCA9IGkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5lZGl0RG9jTnVtID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gc2V0RG9jTnVtTGFiZWwoJ2VkaXQnKTtcclxuXHRcdFx0RG9jTnVtLmVkaXREb2NOdW1EYXRhKCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSlcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGxvYWREb2NOdW1MaXN0KCRzY29wZS50cmF2ZWxlckRhdGEuZm9ybUlkLCAoKT0+e30pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuY2hlY2tGb3JTTiA9IGZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0XHRpZighJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpe1xyXG5cdFx0XHRcdFRyYXZlbGVyLm5vcm1hbFNlYXJjaCgnc24nLCAkc2NvcGUudHJhdmVsZXJEYXRhLnNuKVxyXG5cdFx0XHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdFx0XHRpZihkYXRhLmxlbmd0aCA+MCApe1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuc2VhcmNoU04gPSBkYXRhO1xyXG5cdFx0XHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmlzU05FeGlzdCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnNldFRyYXZlbGVyRGF0YSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSAkc2NvcGUuc2VhcmNoU05bJHNjb3BlLnNlbGVjdFNOXTtcclxuXHRcdFx0bG9hZEl0ZW1SZWNvcmQoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHNob3VsZENvbGxhcHNlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoJHNjb3BlLnRyYXZlbGVyRGF0YS5zbiAgJiYgJHNjb3BlLnRyYXZlbGVyRGF0YS5pdGVtUmVjb3JkLmRvY051bSl7XHJcblx0XHRcdFx0JHNjb3BlLnRvcENvbGxhcHNlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgc2V0TnVtRG9jdG9UcmF2ZWxlciA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuaXRlbVJlY29yZCA9IHtcclxuXHRcdFx0XHRcdFwiZG9jTnVtSWRcIjogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLl9pZCxcclxuXHRcdFx0XHRcdFwiZG9jTnVtXCIgIDogJHNjb3BlLmRvY051bS5kb2NOdW1EYXRhLmRvY051bVxyXG5cdFx0XHRcdH07XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBzZXREb2NOdW1MYWJlbCA9IGZ1bmN0aW9uKGFjdGlvbil7XHJcblxyXG5cdFx0XHRsZXQgY291bnQgPSAxO1xyXG5cdFx0XHRpZihhY3Rpb24gPT09ICdjcmVhdGUnKXtcclxuXHRcdFx0XHRmb3IobGV0IGk9MDsgaTwkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRpZigkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbaV0uZG9jTnVtID09PSAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtKXtcclxuXHRcdFx0XHRcdFx0Y291bnQgKz0gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmKGFjdGlvbiA9PT0gJ2VkaXQnKXtcclxuXHRcdFx0Ly8gXHRmb3IobGV0IGk9MDsgaTwkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3QubGVuZ3RoO2krKyl7XHJcblx0XHRcdC8vIFx0XHRpZigkc2NvcGUuZG9jTnVtLmRvY051bVNlbGVjdExpc3RbaV0uZG9jTnVtID09PSAkc2NvcGUuZG9jTnVtLmRvY051bURhdGEuZG9jTnVtICYmXHJcblx0XHRcdC8vIFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdFtpXS5faWQgIT09ICRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YS5faWQpe1xyXG5cdFx0XHQvLyBcdFx0XHRjb3VudCArPSAxO1xyXG5cdFx0XHQvLyBcdFx0fVxyXG5cdFx0XHQvLyBcdH1cclxuXHRcdFx0Ly8gfVxyXG5cdFx0XHQkc2NvcGUuZG9jTnVtLmRvY051bURhdGEubGFiZWwgPSBjb3VudDtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGxvYWRGb3JtTGlzdCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdEZvcm0uZ2V0Rm9ybUxpc3QoKVxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0JHNjb3BlLmZvcm1MaXN0ID0gZGF0YTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHJcblx0XHR2YXIgcmVzZXQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0ge307XHJcblx0XHRcdCRzY29wZS5jdXJyZW50U3RlcCA9IDE7XHJcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEucmVhZHlSZXZpZXcgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLmZvcm1JZCA9ICcnO1xyXG5cdFx0XHQkc2NvcGUuaXNOZXcgPSB0cnVlO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgbG9hZERvY051bUxpc3QgPSBmdW5jdGlvbihpZCwgY2FsbGJhY2spe1xyXG5cdFx0XHREb2NOdW0uZ2V0RG9jTnVtTGlzdChpZClcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtU2VsZWN0TGlzdCA9IGRhdGE7XHJcblx0XHRcdFx0XHRjYWxsYmFjayhkYXRhKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gbG9hZCBpbmZvcm1hdGlvbiBmb3IgSXRlbVJlY29yZCB3aXRoIFxyXG5cdFx0Ly8gZG9jTnVtLiBcclxuXHRcdHZhciBsb2FkSXRlbVJlY29yZCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFxyXG5cdFx0XHREb2NOdW0uZ2V0RG9jTnVtTGlzdCgkc2NvcGUudHJhdmVsZXJEYXRhLmZvcm1JZClcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGZvcihsZXQgaT0wOyBpPGRhdGEubGVuZ3RoO2krKyl7XHJcblx0XHRcdFx0XHRcdGlmKGRhdGFbaV0uX2lkID09PSAkc2NvcGUudHJhdmVsZXJEYXRhLml0ZW1SZWNvcmQuZG9jTnVtSWQpe1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5kb2NOdW0uZG9jTnVtRGF0YSA9IGRhdGFbaV07XHJcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmRvY051bS5kb2NOdW1TZWxlY3QgPSBpLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUudG9wQ29sbGFwc2U9ZmFsc2U7XHJcblx0XHRcdCRzY29wZS51c2VybmFtZSA9ICdKb2huIFNub3cnO1xyXG5cdFx0XHQkc2NvcGUuZG9jTnVtID0ge307XHJcblx0XHRcdCRzY29wZS5pc1NORXhpc3QgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLnNlYXJjaFNOID0ge307XHJcblx0XHRcdCRzY29wZS5zZWxlY3RTTiA9ICcwJztcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIG1haW4gPSBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0aW5pdCgpO1xyXG5cdFx0XHRyZXNldCgpO1xyXG5cdFx0XHRsb2FkRm9ybUxpc3QoKTtcclxuXHJcblx0XHRcdGlmKCRzdGF0ZVBhcmFtcy5mb3JtSWQpe1xyXG5cdFx0XHRcdCRzY29wZS5mb3JtSWQgPSAkc3RhdGVQYXJhbXMuZm9ybUlkO1xyXG5cdFx0XHRcdCRzY29wZS51cGRhdGVGb3JtKCk7XHJcblx0XHRcdFx0JHNjb3BlLmlzTmV3ID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGxvYWQgdGhlIHRyYXZlbGVyIGZyb20gU2VhcmNoIHBhZ2VcclxuXHRcdFx0Ly8gdGFrZSB0aGUgcHJhbWFzIGZyb20gVVJMXHJcblx0XHRcdGlmKCRzdGF0ZVBhcmFtcy5faWQpe1xyXG5cdFx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xyXG5cdFx0XHRcdFRyYXZlbGVyLmdldCgnX2lkJywgJHN0YXRlUGFyYW1zLl9pZClcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0XHQvLyBkYXRhIGlzIGEgYXJyYXkuIHJlc3VsdCBjb3VsZCBiZSBtb3JlIHRoYW4gb25lXHJcblx0XHRcdFx0XHRcdC8vIG5lZWQgdG8gZGVhbCB3aXQgdGhpcy5cclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGxvYWRJdGVtUmVjb3JkKCk7XHJcblx0XHRcdFx0XHRcdHNob3VsZENvbGxhcHNlKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH07XHJcblxyXG5cdFx0bWFpbigpO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0RvY051bVNlcnZpY2UnLCBbXSlcclxuXHRcclxuXHQuZmFjdG9yeSgnRG9jTnVtJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXREb2NOdW1MaXN0OiBmdW5jdGlvbihmb3JtSWQpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9jTnVtcy8nK2Zvcm1JZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNyZWF0ZTogZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvZG9jTnVtcy8nLGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlZGl0RG9jTnVtRGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9kb2NOdW1zLycsIGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRnZXREb2NOdW06IGZ1bmN0aW9uKHR5cGUsIGRhdGEpe1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdkIHNlcnZpY2UnKTtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RvY051bXMvc2VhcmNoU2luZ2xlP3R5cGU9Jyt0eXBlKycmZGF0YT0nK2RhdGEpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnRm9ybVNlcnZpY2UnLCBbXSlcclxuXHJcblx0LmZhY3RvcnkoJ0Zvcm0nLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApe1xyXG5cclxuXHRcdHJldHVybiB7XHJcblxyXG5cdFx0XHRjcmVhdGU6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Zvcm1zJywgZGF0YSk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRnZXRBbGw6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9mb3Jtcy8nKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGdldEZvcm1MaXN0OiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZm9ybXMvZm9ybUxpc3QnKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGdldDogZnVuY3Rpb24oZm9ybUlkKXtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zL3NlYXJjaC8nK2Zvcm1JZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNhdmU6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvZm9ybXMnLCBkYXRhKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGVsZXRlOiBmdW5jdGlvbihmb3JtSWQpe1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvZm9ybXMvJytmb3JtSWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ1RyYXZlbGVyU2VydmljZScsIFtdKVxyXG4gICAgICAgXHJcbiAgICAuZmFjdG9yeSgnVHJhdmVsZXInLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApe1xyXG5cclxuICAgICAgICB2YXIgcmV2aWV3RGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG5cdFxyXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIHdvcmsgd2hlbiBtb3JlIEFQSSByb3V0ZXMgYXJlIGRlZmluZWQgb24gdGhlIE5vZGUgc2lkZSBvZiB0aGluZ3NcclxuICAgICAgICAgICAgLy8gY2FsbCB0byBQT1NUIGFuZCBjcmVhdGUgYSBuZXcgZm9ybVxyXG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKGZvcm1EYXRhKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS90cmF2ZWxlcicsIGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgfSwgXHJcblxyXG4gICAgICAgICAgICBnZXRSZXZpZXdEYXRhOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGE7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHR5cGUsIGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90cmF2ZWxlcj90eXBlPScrdHlwZSsnJmRhdGE9JytkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlcicsIGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgc2V0UmV2aWV3RGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICByZXZpZXdEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNlYXJjaExpa2U6IGZ1bmN0aW9uKHNuKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL3NlYXJjaExpa2UvJysgc24pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBjYWxsIHRvIERFTEVURSBhIGZvcm1cclxuICAgICAgICAgICAgcmVtb3ZlVHJhdmVsZXI6IGZ1bmN0aW9uKF9pZCwgaW5wdXQpe1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coX2lkKTtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3RyYXZlbGVyLycrIF9pZCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5vcm1hbFNlYXJjaDogZnVuY3Rpb24odHlwZSwgZGF0YSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL25vcm1hbFNlYXJjaD90eXBlPScrdHlwZSsnJmRhdGE9JytkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cdH07XHRcdFxyXG59XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
