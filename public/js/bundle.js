"use strict";angular.module("sampleApp",["ui.router","appRoutes","MainCtrl","TravelerCtrl","SearchTravelerCtrl","FormGenCtrl.js","TravelerService","FormService"]),angular.module("appRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,t){r.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"views/home.html",controller:"MainController"}).state("traveler",{url:"/traveler?_id&formId",views:{"":{templateUrl:"views/traveler.html",controller:"TravelerController"},"formReview@traveler":{templateUrl:"views/formReview.html",controller:["$scope","Traveler","Form",function(e,r,t){e.reviewData=r.getReviewData(),t.get(e.reviewData.formId).success(function(r){e.forms=r})}]}}}).state("searchTraveler",{url:"/searchTraveler",templateUrl:"views/searchTraveler.html",controller:"SearchTravelerController"}).state("formGenerator",{url:"/formGenerator",templateUrl:"views/formGenerator.html",controller:"FormGeneratorController"}),t.html5Mode(!0)}]),angular.module("FormGenCtrl.js",[]).controller("FormGeneratorController",["$scope","Form",function(e,r){e.submit=function(){var t=prompt("password");"123"===t?r.create(e.template).success(function(e){alert("add")}):alert("go home son")}}]),angular.module("MainCtrl",[]).controller("MainController",["$scope",function(e){e.tagline="to the moon and back!"}]),angular.module("SearchTravelerCtrl",[]).controller("SearchTravelerController",["$scope","Traveler",function(e,r){e.isSearch=!1,e.search=function(){if(e.currentInput=e.searchInput,e.isSearch=!0,e.searchInput){var t=e.searchInput.toString();r.searchLike(t).success(function(r){e.result=r})}},e.editTraveler=function(e,r){window.open("traveler?_id="+e+"&formId="+r,"_blank")},e.removeTraveler=function(t,a){r.removeTraveler(t).success(function(r){e.result.splice(a,1)})}}]),angular.module("TravelerCtrl",[]).controller("TravelerController",["$scope","Traveler","Form","$stateParams",function(e,r,t,a){e.updateForm=function(){e.travelerData={},e.formId&&t.get(e.formId).success(function(r){e.forms=r,e.lastStep=r.steps.length,e.travelerData.formId=r.formId})},e.nextStep=function(){var t=e.forms.steps[e.currentStep-1];t.list.length>=e.currentSubStep+1?e.currentSubStep+=1:(e.currentStep+=1,e.currentSubStep=1,e.currentStep>e.lastStep&&(r.setReviewData(e.travelerData),e.readySubmit=!0))},e.statusPage=function(r){e.currentStep=r,e.currentSubStep=1,e.readySubmit=!1},e.statusSubPage=function(r){e.currentSubStep=r},e.goBack=function(){e.currentStep=1,e.currentSubStep=1,e.readySubmit=!1},e.save=function(){e.travelerData.created?r.save(e.travelerData).success(function(e){}):e.submit()},e.submit=function(){document.getElementById("username").value?(e.travelerData.created=!0,e.travelerData.createdBy=document.getElementById("username").value,e.travelerData.createAt=new Date,r.create(e.travelerData).success(function(r){console.log(r),e.travelerData=r})):alert("enter you name plz")},e["new"]=function(){l()},e["delete"]=function(){alert("delete click"),e.travelerData._id&&r.removeTraveler(e.travelerData._id).success(function(e){l()})};var n=function(){var r=document.getElementById("username").value;if(""!==r){var t=e.currentStep,a=e.currentSubStep;return e.travelerData.step[t][a].editBy=r,e.travelerData.step[t][a].editTime=new Date,!0}return alert("enter your name"),!1},o=function(){t.getFormList().success(function(r){e.formList=r})},l=function(){e.travelerData={},e.currentStep=1,e.currentSubStep=1,e.readySubmit=!1,e.formId="",e.isNew=!0},u=function(){e.$watch("travelerData.step",function(r,t){e.isNew?(console.log(e.currentStep+";"+e.currentSubStep+"changed"),n()):e.isNew=!0},!0)},c=function(){l(),o(),a.formId&&(e.formId=a.formId,e.updateForm(),e.isNew=!1),a._id&&(e.isNew=!1,r.get(a._id).success(function(r){e.travelerData=r})),u()};c()}]),angular.module("FormService",[]).factory("Form",["$http",function(e){return{create:function(r){return e.post("/api/forms",r)},getFormList:function(){return e.get("/api/forms/")},get:function(r){return e.get("/api/forms/"+r)}}}]),angular.module("TravelerService",[]).factory("Traveler",["$http",function(e){var r={};return{create:function(r){return e.post("/api/traveler",r)},getReviewData:function(){return r},get:function(r){return e.get("/api/traveler?_id="+r)},save:function(r){return e.put("/api/traveler",r)},setReviewData:function(e){r=e},searchLike:function(r){return e.get("/api/traveler/searchLike/"+r)},removeTraveler:function(r,t){return console.log(r),e["delete"]("/api/traveler/"+r)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyIsImFwcC5qcyIsImFwcFJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL0Zvcm1HZW5DdHJsLmpzIiwiY29udHJvbGxlcnMvTWFpbkN0cmwuanMiLCJjb250cm9sbGVycy9TZWFyY2hUcmF2ZWxlckN0cmwuanMiLCJjb250cm9sbGVycy9UcmF2ZWxlckN0cmwuanMiLCJzZXJ2aWNlcy9Gb3JtU2VydmljZS5qcyIsInNlcnZpY2VzL1RyYXZlbGVyU2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwidmlld3MiLCIiLCJmb3JtUmV2aWV3QHRyYXZlbGVyIiwiJHNjb3BlIiwiVHJhdmVsZXIiLCJGb3JtIiwicmV2aWV3RGF0YSIsImdldFJldmlld0RhdGEiLCJnZXQiLCJmb3JtSWQiLCJzdWNjZXNzIiwiZGF0YSIsImZvcm1zIiwiaHRtbDVNb2RlIiwic3VibWl0IiwicGFzc3dvcmQiLCJwcm9tcHQiLCJjcmVhdGUiLCJ0ZW1wbGF0ZSIsImFsZXJ0IiwidGFnbGluZSIsImlzU2VhcmNoIiwic2VhcmNoIiwiY3VycmVudElucHV0Iiwic2VhcmNoSW5wdXQiLCJzbiIsInRvU3RyaW5nIiwic2VhcmNoTGlrZSIsInJlc3VsdCIsImVkaXRUcmF2ZWxlciIsIl9pZCIsIndpbmRvdyIsIm9wZW4iLCJyZW1vdmVUcmF2ZWxlciIsImluZGV4Iiwic3BsaWNlIiwiJHN0YXRlUGFyYW1zIiwidXBkYXRlRm9ybSIsInRyYXZlbGVyRGF0YSIsImxhc3RTdGVwIiwic3RlcHMiLCJsZW5ndGgiLCJuZXh0U3RlcCIsIm9iamVjdCIsImN1cnJlbnRTdGVwIiwibGlzdCIsImN1cnJlbnRTdWJTdGVwIiwic2V0UmV2aWV3RGF0YSIsInJlYWR5U3VibWl0Iiwic3RhdHVzUGFnZSIsInBhZ2UiLCJzdGF0dXNTdWJQYWdlIiwiZ29CYWNrIiwic2F2ZSIsImNyZWF0ZWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJjcmVhdGVkQnkiLCJjcmVhdGVBdCIsIkRhdGUiLCJjb25zb2xlIiwibG9nIiwicmVzZXQiLCJhcHBlbmRTdWJTdGVwRWRpdEluZm8iLCJ1c2VybmFtZSIsInN0ZXAiLCJlZGl0QnkiLCJlZGl0VGltZSIsImxvYWRGb3JtTGlzdCIsImdldEZvcm1MaXN0IiwiZm9ybUxpc3QiLCJpc05ldyIsInN0YXJ0V2F0Y2giLCIkd2F0Y2giLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwibWFpbiIsImZhY3RvcnkiLCIkaHR0cCIsInBvc3QiLCJmb3JtRGF0YSIsInB1dCIsImlucHV0Il0sIm1hcHBpbmdzIjoiQUFBQSxZQ0FBQSxTQUFRQyxPQUFPLGFBRWIsWUFDQSxZQUVBLFdBQ0EsZUFDQSxxQkFDQSxpQkFFQSxrQkFDQSxnQkNYRkQsUUFBUUMsT0FBTyxhQUFjLGNBQzNCQyxRQUFRLGlCQUFrQixxQkFBc0Isb0JBQ2hELFNBQVNDLEVBQWdCQyxFQUFvQkMsR0FFN0NELEVBQW1CRSxVQUFVLFNBRzdCSCxFQUdFSSxNQUFNLFFBQ05DLElBQUssUUFDTEMsWUFBYSxrQkFDYkMsV0FBWSxtQkFJWkgsTUFBTSxZQUNOQyxJQUFLLHVCQUNMRyxPQUNDQyxJQUNDSCxZQUFhLHNCQUNiQyxXQUFZLHNCQUViRyx1QkFDQ0osWUFBYSx3QkFDYkMsWUFBYSxTQUFVLFdBQVksT0FBTyxTQUFTSSxFQUFRQyxFQUFVQyxHQUNwRUYsRUFBT0csV0FBYUYsRUFBU0csZ0JBQzdCRixFQUFLRyxJQUFJTCxFQUFPRyxXQUFXRyxRQUN6QkMsUUFBUSxTQUFTQyxHQUNqQlIsRUFBT1MsTUFBUUQsVUFPcEJmLE1BQU0sa0JBQ05DLElBQUssa0JBQ0xDLFlBQWEsNEJBQ2JDLFdBQVksNkJBR1pILE1BQU0saUJBQ05DLElBQUssaUJBQ0xDLFlBQWEs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QUdqQlIsRUFBT21DLGFBQWUzQixLQUd6QjhELElBR0RJLFFDdEtGeEYsUUFBUUMsT0FBTyxrQkFFYndGLFFBQVEsUUFBUyxRQUFTLFNBQVNDLEdBRW5DLE9BRUM5RCxPQUFRLFNBQVNOLEdBQ2hCLE1BQU9vRSxHQUFNQyxLQUFLLGFBQWNyRSxJQUdqQzJELFlBQWEsV0FDWixNQUFPUyxHQUFNdkUsSUFBSSxnQkFHbEJBLElBQUssU0FBU0MsR0FDYixNQUFPc0UsR0FBTXZFLElBQUksY0FBY0MsUUNmbkNwQixRQUFRQyxPQUFPLHNCQUVWd0YsUUFBUSxZQUFhLFFBQVMsU0FBU0MsR0FFcEMsR0FBSXpFLEtBRUosUUFJSVcsT0FBUSxTQUFTZ0UsR0FDaEIsTUFBT0YsR0FBTUMsS0FBSyxnQkFBaUJDLElBR3BDMUUsY0FBZSxXQUNYLE1BQU9ELElBR1hFLElBQUssU0FBU3NCLEdBQ1YsTUFBT2lELEdBQU12RSxJQUFJLHFCQUFzQnNCLElBRzNDdUIsS0FBTSxTQUFTMUMsR0FDWCxNQUFPb0UsR0FBTUcsSUFBSSxnQkFBaUJ2RSxJQUd0Q29DLGNBQWUsU0FBU3BDLEdBQ3BCTCxFQUFhSyxHQUdqQmdCLFdBQVksU0FBU0YsR0FDcEIsTUFBT3NELEdBQU12RSxJQUFJLDRCQUE2QmlCLElBRy9DUSxlQUFnQixTQUFTSCxFQUFLcUQsR0FFN0IsTUFER3RCLFNBQVFDLElBQUloQyxHQUNSaUQsRUFBQUEsVUFBYSxpQkFBa0JqRCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdzYW1wbGVBcHAnLCBbJ3VpLnJvdXRlcicsICdhcHBSb3V0ZXMnLCAnTWFpbkN0cmwnLCAnVHJhdmVsZXJDdHJsJywgJ1NlYXJjaFRyYXZlbGVyQ3RybCcsICdGb3JtR2VuQ3RybC5qcycsICdUcmF2ZWxlclNlcnZpY2UnLCAnRm9ybVNlcnZpY2UnXSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHBSb3V0ZXMnLCBbJ3VpLnJvdXRlciddKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblxuXHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvaG9tZScpO1xuXG5cdC8vICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblx0JHN0YXRlUHJvdmlkZXJcblxuXHQvLyBob21lIHBhZ2Vcblx0LnN0YXRlKCdob21lJywge1xuXHRcdHVybDogJy9ob21lJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvbWUuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ01haW5Db250cm9sbGVyJ1xuXHR9KS5zdGF0ZSgndHJhdmVsZXInLCB7XG5cdFx0dXJsOiAnL3RyYXZlbGVyP19pZCZmb3JtSWQnLFxuXHRcdHZpZXdzOiB7XG5cdFx0XHQnJzoge1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3RyYXZlbGVyLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnVHJhdmVsZXJDb250cm9sbGVyJ1xuXHRcdFx0fSxcblx0XHRcdCdmb3JtUmV2aWV3QHRyYXZlbGVyJzoge1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1SZXZpZXcuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJ1RyYXZlbGVyJywgJ0Zvcm0nLCBmdW5jdGlvbiAoJHNjb3BlLCBUcmF2ZWxlciwgRm9ybSkge1xuXHRcdFx0XHRcdCRzY29wZS5yZXZpZXdEYXRhID0gVHJhdmVsZXIuZ2V0UmV2aWV3RGF0YSgpO1xuXHRcdFx0XHRcdEZvcm0uZ2V0KCRzY29wZS5yZXZpZXdEYXRhLmZvcm1JZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZvcm1zID0gZGF0YTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fV1cblx0XHRcdH1cblx0XHR9XG5cdH0pLnN0YXRlKCdzZWFyY2hUcmF2ZWxlcicsIHtcblx0XHR1cmw6ICcvc2VhcmNoVHJhdmVsZXInLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2VhcmNoVHJhdmVsZXIuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ1NlYXJjaFRyYXZlbGVyQ29udHJvbGxlcidcblx0fSkuc3RhdGUoJ2Zvcm1HZW5lcmF0b3InLCB7XG5cdFx0dXJsOiAnL2Zvcm1HZW5lcmF0b3InLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZm9ybUdlbmVyYXRvci5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnRm9ybUdlbmVyYXRvckNvbnRyb2xsZXInXG5cdH0pO1xuXG5cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0Zvcm1HZW5DdHJsLmpzJywgW10pLmNvbnRyb2xsZXIoJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJywgWyckc2NvcGUnLCAnRm9ybScsIGZ1bmN0aW9uICgkc2NvcGUsIEZvcm0pIHtcblxuXHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBwYXNzd29yZCA9IHByb21wdCgncGFzc3dvcmQnKTtcblx0XHRpZiAocGFzc3dvcmQgPT09ICcxMjMnKSB7XG5cdFx0XHRGb3JtLmNyZWF0ZSgkc2NvcGUudGVtcGxhdGUpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0Ly8gZG8gc29tZXRoaW5nXG5cdFx0XHRcdGFsZXJ0KCdhZGQnKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbGVydCgnZ28gaG9tZSBzb24nKTtcblx0XHR9XG5cdH07XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdNYWluQ3RybCcsIFtdKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXG5cdCRzY29wZS50YWdsaW5lID0gJ3RvIHRoZSBtb29uIGFuZCBiYWNrISc7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdTZWFyY2hUcmF2ZWxlckN0cmwnLCBbXSkuY29udHJvbGxlcignU2VhcmNoVHJhdmVsZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnVHJhdmVsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBUcmF2ZWxlcikge1xuXG5cdCRzY29wZS5pc1NlYXJjaCA9IGZhbHNlO1xuXG5cdCRzY29wZS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmN1cnJlbnRJbnB1dCA9ICRzY29wZS5zZWFyY2hJbnB1dDtcblx0XHQkc2NvcGUuaXNTZWFyY2ggPSB0cnVlO1xuXHRcdGlmICgkc2NvcGUuc2VhcmNoSW5wdXQpIHtcblx0XHRcdHZhciBzbiA9ICRzY29wZS5zZWFyY2hJbnB1dC50b1N0cmluZygpO1xuXHRcdFx0VHJhdmVsZXIuc2VhcmNoTGlrZShzbikuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHQkc2NvcGUucmVzdWx0ID0gZGF0YTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUuZWRpdFRyYXZlbGVyID0gZnVuY3Rpb24gKF9pZCwgZm9ybUlkKSB7XG5cdFx0d2luZG93Lm9wZW4oJ3RyYXZlbGVyP19pZD0nICsgX2lkICsgJyZmb3JtSWQ9JyArIGZvcm1JZCwgJ19ibGFuaycpO1xuXHR9O1xuXG5cdCRzY29wZS5yZW1vdmVUcmF2ZWxlciA9IGZ1bmN0aW9uIChfaWQsIGluZGV4KSB7XG5cdFx0VHJhdmVsZXIucmVtb3ZlVHJhdmVsZXIoX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHQvLyAkc2NvcGUucmVzdWx0PWRhdGE7XG5cdFx0XHQkc2NvcGUucmVzdWx0LnNwbGljZShpbmRleCwgMSk7XG5cdFx0fSk7XG5cdH07XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlckN0cmwnLCBbXSkuY29udHJvbGxlcignVHJhdmVsZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnVHJhdmVsZXInLCAnRm9ybScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHNjb3BlLCBUcmF2ZWxlciwgRm9ybSwgJHN0YXRlUGFyYW1zKSB7XG5cblx0JHNjb3BlLnVwZGF0ZUZvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xuXHRcdGlmICgkc2NvcGUuZm9ybUlkKSB7XG5cdFx0XHRGb3JtLmdldCgkc2NvcGUuZm9ybUlkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdCRzY29wZS5mb3JtcyA9IGRhdGE7XG5cdFx0XHRcdC8vIGZpbmQgdGhlIGxhc3Qgc3ViU3RlcFxuXHRcdFx0XHQkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQgPSBkYXRhLmZvcm1JZDtcblx0XHRcdFx0Ly8gJHNjb3BlLmxhc3RTdWJTdGVwID0gZGF0YS5mb3Jtcy5zdGVwc1tkYXRhLmZvcm1zLnN0ZXBzLmxlbmd0aC0xXS5saXN0Lmxlbmd0aDtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUubmV4dFN0ZXAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gYXBwZW5kU3ViU3RlcEVkaXRJbmZvKCk7XG5cdFx0dmFyIG9iamVjdCA9ICRzY29wZS5mb3Jtcy5zdGVwc1skc2NvcGUuY3VycmVudFN0ZXAgLSAxXTtcblx0XHRpZiAob2JqZWN0Lmxpc3QubGVuZ3RoID49ICRzY29wZS5jdXJyZW50U3ViU3RlcCArIDEpIHtcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCArPSAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgKz0gMTtcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0XHRpZiAoJHNjb3BlLmN1cnJlbnRTdGVwID4gJHNjb3BlLmxhc3RTdGVwKSB7XG5cdFx0XHRcdFRyYXZlbGVyLnNldFJldmlld0RhdGEoJHNjb3BlLnRyYXZlbGVyRGF0YSk7XG5cdFx0XHRcdCRzY29wZS5yZWFkeVN1Ym1pdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5zdGF0dXNQYWdlID0gZnVuY3Rpb24gKHBhZ2UpIHtcblx0XHQvLyBhcHBlbmRTdWJTdGVwRWRpdEluZm8oKTtcblx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSBwYWdlO1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0JHNjb3BlLnJlYWR5U3VibWl0ID0gZmFsc2U7XG5cdH07XG5cblx0JHNjb3BlLnN0YXR1c1N1YlBhZ2UgPSBmdW5jdGlvbiAocGFnZSkge1xuXHRcdC8vIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbygpO1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IHBhZ2U7XG5cdH07XG5cblx0JHNjb3BlLmdvQmFjayA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSAxO1xuXHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IDE7XG5cdFx0JHNjb3BlLnJlYWR5U3VibWl0ID0gZmFsc2U7XG5cdH07XG5cblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkKSB7XG5cdFx0XHQvLyBpZihhcHBlbmRTdWJTdGVwRWRpdEluZm8oKSl7XG5cblx0XHRcdFRyYXZlbGVyLnNhdmUoJHNjb3BlLnRyYXZlbGVyRGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHQvLyBkbyBzb21ldGhpbmdcblx0XHRcdH0pO1xuXHRcdFx0Ly8gfVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRzY29wZS5zdWJtaXQoKTtcblx0XHRcdH1cblx0fTtcblxuXHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKS52YWx1ZSkge1xuXHRcdFx0Ly8gJHNjb3BlLnRyYXZlbGVyRGF0YS5jb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlZCA9IHRydWU7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZWRCeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlO1xuXHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVBdCA9IG5ldyBEYXRlKCk7XG5cdFx0XHRUcmF2ZWxlci5jcmVhdGUoJHNjb3BlLnRyYXZlbGVyRGF0YSlcblxuXHRcdFx0Ly8gaWYgc3VjY2Vzc2Z1bCBjcmVhdGVcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbGVydCgnZW50ZXIgeW91IG5hbWUgcGx6Jyk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5uZXcgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmVzZXQoKTtcblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdGFsZXJ0KCdkZWxldGUgY2xpY2snKTtcblx0XHRpZiAoJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpIHtcblx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKCRzY29wZS50cmF2ZWxlckRhdGEuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdHJlc2V0KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0dmFyIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbyA9IGZ1bmN0aW9uIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbygpIHtcblx0XHR2YXIgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKS52YWx1ZTtcblx0XHRpZiAodXNlcm5hbWUgIT09ICcnKSB7XG5cdFx0XHR2YXIgY3VycmVudFN0ZXAgPSAkc2NvcGUuY3VycmVudFN0ZXA7XG5cdFx0XHR2YXIgY3VycmVudFN1YlN0ZXAgPSAkc2NvcGUuY3VycmVudFN1YlN0ZXA7XG5cdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLnN0ZXBbY3VycmVudFN0ZXBdW2N1cnJlbnRTdWJTdGVwXS5lZGl0QnkgPSB1c2VybmFtZTtcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuc3RlcFtjdXJyZW50U3RlcF1bY3VycmVudFN1YlN0ZXBdLmVkaXRUaW1lID0gbmV3IERhdGUoKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRhbGVydCgnZW50ZXIgeW91ciBuYW1lJyk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdHZhciBsb2FkRm9ybUxpc3QgPSBmdW5jdGlvbiBsb2FkRm9ybUxpc3QoKSB7XG5cdFx0Rm9ybS5nZXRGb3JtTGlzdCgpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdCRzY29wZS5mb3JtTGlzdCA9IGRhdGE7XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIHJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG5cdFx0JHNjb3BlLnRyYXZlbGVyRGF0YSA9IHt9O1xuXHRcdCRzY29wZS5jdXJyZW50U3RlcCA9IDE7XG5cdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcblx0XHQkc2NvcGUucmVhZHlTdWJtaXQgPSBmYWxzZTtcblx0XHQkc2NvcGUuZm9ybUlkID0gJyc7XG5cdFx0JHNjb3BlLmlzTmV3ID0gdHJ1ZTtcblx0fTtcblxuXHR2YXIgc3RhcnRXYXRjaCA9IGZ1bmN0aW9uIHN0YXJ0V2F0Y2goKSB7XG5cdFx0JHNjb3BlLiR3YXRjaCgndHJhdmVsZXJEYXRhLnN0ZXAnLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7XG5cdFx0XHRpZiAoISRzY29wZS5pc05ldykge1xuXHRcdFx0XHQkc2NvcGUuaXNOZXcgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJHNjb3BlLmN1cnJlbnRTdGVwICsgJzsnICsgJHNjb3BlLmN1cnJlbnRTdWJTdGVwICsgJ2NoYW5nZWQnKTtcblx0XHRcdFx0YXBwZW5kU3ViU3RlcEVkaXRJbmZvKCk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSk7XG5cdH07XG5cblx0dmFyIG1haW4gPSBmdW5jdGlvbiBtYWluKCkge1xuXHRcdHJlc2V0KCk7XG5cdFx0bG9hZEZvcm1MaXN0KCk7XG5cblx0XHRpZiAoJHN0YXRlUGFyYW1zLmZvcm1JZCkge1xuXHRcdFx0JHNjb3BlLmZvcm1JZCA9ICRzdGF0ZVBhcmFtcy5mb3JtSWQ7XG5cdFx0XHQkc2NvcGUudXBkYXRlRm9ybSgpO1xuXHRcdFx0JHNjb3BlLmlzTmV3ID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKCRzdGF0ZVBhcmFtcy5faWQpIHtcblx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xuXHRcdFx0VHJhdmVsZXIuZ2V0KCRzdGF0ZVBhcmFtcy5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0Ly8gZGF0YSBpcyBhIGFycmF5LiByZXN1bHQgY291bGQgYmUgbW9yZSB0aGFuIG9uZVxuXHRcdFx0XHQvLyBuZWVkIHRvIGRlYWwgd2l0IHRoaXMuXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSBkYXRhO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHN0YXJ0V2F0Y2goKTtcblx0fTtcblxuXHRtYWluKCk7XG59XSk7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdGb3JtU2VydmljZScsIFtdKS5mYWN0b3J5KCdGb3JtJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG5cdHJldHVybiB7XG5cblx0XHRjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9mb3JtcycsIGRhdGEpO1xuXHRcdH0sXG5cblx0XHRnZXRGb3JtTGlzdDogZnVuY3Rpb24gZ2V0Rm9ybUxpc3QoKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zLycpO1xuXHRcdH0sXG5cblx0XHRnZXQ6IGZ1bmN0aW9uIGdldChmb3JtSWQpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZm9ybXMvJyArIGZvcm1JZCk7XG5cdFx0fVxuXHR9O1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnVHJhdmVsZXJTZXJ2aWNlJywgW10pLmZhY3RvcnkoJ1RyYXZlbGVyJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgdmFyIHJldmlld0RhdGEgPSB7fTtcblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgLy8gdGhlc2Ugd2lsbCB3b3JrIHdoZW4gbW9yZSBBUEkgcm91dGVzIGFyZSBkZWZpbmVkIG9uIHRoZSBOb2RlIHNpZGUgb2YgdGhpbmdzXG4gICAgICAgIC8vIGNhbGwgdG8gUE9TVCBhbmQgY3JlYXRlIGEgbmV3IGZvcm1cbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoZm9ybURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3RyYXZlbGVyJywgZm9ybURhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFJldmlld0RhdGE6IGZ1bmN0aW9uIGdldFJldmlld0RhdGEoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmV2aWV3RGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldChfaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdHJhdmVsZXI/X2lkPScgKyBfaWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlcicsIGRhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFJldmlld0RhdGE6IGZ1bmN0aW9uIHNldFJldmlld0RhdGEoZGF0YSkge1xuICAgICAgICAgICAgcmV2aWV3RGF0YSA9IGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoTGlrZTogZnVuY3Rpb24gc2VhcmNoTGlrZShzbikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90cmF2ZWxlci9zZWFyY2hMaWtlLycgKyBzbik7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGNhbGwgdG8gREVMRVRFIGEgZm9ybVxuICAgICAgICByZW1vdmVUcmF2ZWxlcjogZnVuY3Rpb24gcmVtb3ZlVHJhdmVsZXIoX2lkLCBpbnB1dCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX2lkKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvdHJhdmVsZXIvJyArIF9pZCk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdzYW1wbGVBcHAnLCBcclxuXHRbXHJcblx0XHQndWkucm91dGVyJywgXHJcblx0XHQnYXBwUm91dGVzJywgXHJcblxyXG5cdFx0J01haW5DdHJsJywgXHJcblx0XHQnVHJhdmVsZXJDdHJsJywgXHJcblx0XHQnU2VhcmNoVHJhdmVsZXJDdHJsJywgXHJcblx0XHQnRm9ybUdlbkN0cmwuanMnLFxyXG5cdFx0XHJcblx0XHQnVHJhdmVsZXJTZXJ2aWNlJywgXHJcblx0XHQnRm9ybVNlcnZpY2UnXHJcblx0XVxyXG4pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHBSb3V0ZXMnLCBbJ3VpLnJvdXRlciddKVxyXG5cdC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInICxcclxuXHRcdGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcclxuXHJcblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvaG9tZScpO1xyXG5cclxuXHRcdC8vICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuXHRcdCRzdGF0ZVByb3ZpZGVyXHJcblxyXG5cdFx0XHQvLyBob21lIHBhZ2VcclxuXHRcdFx0LnN0YXRlKCdob21lJywge1xyXG5cdFx0XHRcdHVybDogJy9ob21lJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvbWUuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ01haW5Db250cm9sbGVyJ1xyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0XHJcblx0XHRcdC5zdGF0ZSgndHJhdmVsZXInLCB7XHJcblx0XHRcdFx0dXJsOiAnL3RyYXZlbGVyP19pZCZmb3JtSWQnLFxyXG5cdFx0XHRcdHZpZXdzOntcclxuXHRcdFx0XHRcdCcnOntcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy90cmF2ZWxlci5odG1sJyxcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ1RyYXZlbGVyQ29udHJvbGxlcidcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHQnZm9ybVJldmlld0B0cmF2ZWxlcic6e1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1SZXZpZXcuaHRtbCcsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJ1RyYXZlbGVyJywgJ0Zvcm0nLGZ1bmN0aW9uKCRzY29wZSwgVHJhdmVsZXIsIEZvcm0pe1xyXG5cdFx0XHRcdFx0XHRcdCRzY29wZS5yZXZpZXdEYXRhID0gVHJhdmVsZXIuZ2V0UmV2aWV3RGF0YSgpO1xyXG5cdFx0XHRcdFx0XHRcdEZvcm0uZ2V0KCRzY29wZS5yZXZpZXdEYXRhLmZvcm1JZClcclxuXHRcdFx0XHRcdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZm9ybXMgPSBkYXRhO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdC5zdGF0ZSgnc2VhcmNoVHJhdmVsZXInLHtcclxuXHRcdFx0XHR1cmw6ICcvc2VhcmNoVHJhdmVsZXInLFxyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2VhcmNoVHJhdmVsZXIuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NlYXJjaFRyYXZlbGVyQ29udHJvbGxlcidcclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdC5zdGF0ZSgnZm9ybUdlbmVyYXRvcicse1xyXG5cdFx0XHRcdHVybDogJy9mb3JtR2VuZXJhdG9yJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Zvcm1HZW5lcmF0b3IuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0Zvcm1HZW5lcmF0b3JDb250cm9sbGVyJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnRm9ybUdlbkN0cmwuanMnLCBbXSlcclxuXHRcclxuXHQuY29udHJvbGxlcignRm9ybUdlbmVyYXRvckNvbnRyb2xsZXInLCBbJyRzY29wZScsJ0Zvcm0nICwgZnVuY3Rpb24oJHNjb3BlLCBGb3JtKXtcclxuXHJcblx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIHBhc3N3b3JkID0gcHJvbXB0KCdwYXNzd29yZCcpO1xyXG5cdFx0XHRpZihwYXNzd29yZCA9PT0gJzEyMycpe1xyXG5cdFx0XHRGb3JtLmNyZWF0ZSgkc2NvcGUudGVtcGxhdGUpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PntcclxuXHRcdFx0XHRcdC8vIGRvIHNvbWV0aGluZ1xyXG5cdFx0XHRcdFx0YWxlcnQoJ2FkZCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydCgnZ28gaG9tZSBzb24nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ01haW5DdHJsJywgW10pXHJcblx0XHJcblx0LmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xyXG5cclxuXHRcdCRzY29wZS50YWdsaW5lID0gJ3RvIHRoZSBtb29uIGFuZCBiYWNrISc7XHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnU2VhcmNoVHJhdmVsZXJDdHJsJywgW10pXHJcblxyXG5cdC5jb250cm9sbGVyKCdTZWFyY2hUcmF2ZWxlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICdUcmF2ZWxlcicsIGZ1bmN0aW9uKCRzY29wZSwgVHJhdmVsZXIpe1xyXG5cclxuXHRcdCRzY29wZS5pc1NlYXJjaCA9IGZhbHNlO1xyXG5cclxuXHRcdCRzY29wZS5zZWFyY2ggPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudElucHV0ID0gJHNjb3BlLnNlYXJjaElucHV0O1xyXG5cdFx0XHQkc2NvcGUuaXNTZWFyY2ggPSB0cnVlO1xyXG5cdFx0XHRpZigkc2NvcGUuc2VhcmNoSW5wdXQpe1xyXG5cdFx0XHRcdGxldCBzbiA9ICRzY29wZS5zZWFyY2hJbnB1dC50b1N0cmluZygpO1xyXG5cdFx0XHRcdFRyYXZlbGVyLnNlYXJjaExpa2Uoc24pXHJcblxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoIGRhdGEgPT57XHJcblx0XHRcdFx0XHRcdCRzY29wZS5yZXN1bHQ9ZGF0YTtcclxuXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuZWRpdFRyYXZlbGVyID0gZnVuY3Rpb24oX2lkLCBmb3JtSWQpe1xyXG5cdFx0XHR3aW5kb3cub3BlbigndHJhdmVsZXI/X2lkPScrX2lkKycmZm9ybUlkPScrZm9ybUlkLCAnX2JsYW5rJyk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5yZW1vdmVUcmF2ZWxlciA9IGZ1bmN0aW9uKF9pZCwgaW5kZXgpe1xyXG5cdFx0XHRUcmF2ZWxlci5yZW1vdmVUcmF2ZWxlcihfaWQpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoIGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gJHNjb3BlLnJlc3VsdD1kYXRhO1xyXG5cdFx0XHRcdFx0JHNjb3BlLnJlc3VsdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ1RyYXZlbGVyQ3RybCcsIFtdKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdUcmF2ZWxlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1RyYXZlbGVyJywgJ0Zvcm0nLCckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbigkc2NvcGUsIFRyYXZlbGVyLCBGb3JtLCAkc3RhdGVQYXJhbXMpe1xyXG5cclxuXHRcdCRzY29wZS51cGRhdGVGb3JtID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcclxuXHRcdFx0aWYoJHNjb3BlLmZvcm1JZCl7XHJcblx0XHRcdFx0Rm9ybS5nZXQoJHNjb3BlLmZvcm1JZClcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuZm9ybXMgPSBkYXRhO1x0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGZpbmQgdGhlIGxhc3Qgc3ViU3RlcFxyXG5cdFx0XHRcdFx0XHQkc2NvcGUubGFzdFN0ZXAgPSBkYXRhLnN0ZXBzLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5mb3JtSWQgPSBkYXRhLmZvcm1JZDtcclxuXHRcdFx0XHRcdFx0Ly8gJHNjb3BlLmxhc3RTdWJTdGVwID0gZGF0YS5mb3Jtcy5zdGVwc1tkYXRhLmZvcm1zLnN0ZXBzLmxlbmd0aC0xXS5saXN0Lmxlbmd0aDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5uZXh0U3RlcCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdC8vIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbygpO1xyXG5cdFx0XHR2YXIgb2JqZWN0ID0gJHNjb3BlLmZvcm1zLnN0ZXBzWyRzY29wZS5jdXJyZW50U3RlcC0xXTtcclxuXHRcdFx0aWYob2JqZWN0Lmxpc3QubGVuZ3RoID49ICRzY29wZS5jdXJyZW50U3ViU3RlcCsxKXtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgKz0gMTtcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgKz0gMTtcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHRcdGlmKCRzY29wZS5jdXJyZW50U3RlcCA+ICRzY29wZS5sYXN0U3RlcCl7XHJcblx0XHRcdFx0XHRUcmF2ZWxlci5zZXRSZXZpZXdEYXRhKCRzY29wZS50cmF2ZWxlckRhdGEpO1xyXG5cdFx0XHRcdFx0JHNjb3BlLnJlYWR5U3VibWl0ID0gdHJ1ZTtcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5zdGF0dXNQYWdlID0gZnVuY3Rpb24ocGFnZSl7XHJcblx0XHRcdC8vIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbygpO1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSBwYWdlO1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHQkc2NvcGUucmVhZHlTdWJtaXQgPSBmYWxzZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnN0YXR1c1N1YlBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcclxuXHRcdFx0Ly8gYXBwZW5kU3ViU3RlcEVkaXRJbmZvKCk7XHJcblx0XHRcdCRzY29wZS5jdXJyZW50U3ViU3RlcCA9IHBhZ2U7XHJcblx0XHR9O1xyXG5cclxuXHRcdCRzY29wZS5nb0JhY2sgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN0ZXAgPSAxO1xyXG5cdFx0XHQkc2NvcGUuY3VycmVudFN1YlN0ZXAgPSAxO1xyXG5cdFx0XHQkc2NvcGUucmVhZHlTdWJtaXQgPSBmYWxzZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0aWYoJHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkKXtcclxuXHRcdFx0XHQvLyBpZihhcHBlbmRTdWJTdGVwRWRpdEluZm8oKSl7XHJcblxyXG5cdFx0XHRcdFx0VHJhdmVsZXIuc2F2ZSgkc2NvcGUudHJhdmVsZXJEYXRhKVxyXG5cdFx0XHRcdFx0XHQuc3VjY2VzcyhkYXRhID0+e1xyXG5cdFx0XHRcdFx0XHRcdC8vIGRvIHNvbWV0aGluZ1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvLyB9XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5zdWJtaXQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lJykudmFsdWUpe1xyXG5cdFx0XHRcdC8vICRzY29wZS50cmF2ZWxlckRhdGEuY29tcGxldGVkID0gZmFsc2U7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5jcmVhdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhLmNyZWF0ZWRCeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlO1xyXG5cdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEuY3JlYXRlQXQgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0XHRcdFRyYXZlbGVyLmNyZWF0ZSgkc2NvcGUudHJhdmVsZXJEYXRhKVxyXG5cclxuXHRcdFx0XHRcdC8vIGlmIHN1Y2Nlc3NmdWwgY3JlYXRlXHJcblx0XHRcdFx0XHQuc3VjY2VzcyggZGF0YSA9PntcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XHJcblx0XHRcdFx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSBkYXRhO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGFsZXJ0KCdlbnRlciB5b3UgbmFtZSBwbHonKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUubmV3ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0cmVzZXQoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0JHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGFsZXJ0KCdkZWxldGUgY2xpY2snKTtcclxuXHRcdFx0aWYoJHNjb3BlLnRyYXZlbGVyRGF0YS5faWQpe1xyXG5cdFx0XHRcdFRyYXZlbGVyLnJlbW92ZVRyYXZlbGVyKCRzY29wZS50cmF2ZWxlckRhdGEuX2lkKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZGF0YSA9PiB7XHJcblx0XHRcdFx0XHRcdHJlc2V0KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblxyXG5cdFx0dmFyIGFwcGVuZFN1YlN0ZXBFZGl0SW5mbyA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlO1xyXG5cdFx0XHRpZih1c2VybmFtZSAhPT0gJycpe1xyXG5cdFx0XHRcdHZhciBjdXJyZW50U3RlcCA9ICRzY29wZS5jdXJyZW50U3RlcDtcclxuXHRcdFx0XHR2YXIgY3VycmVudFN1YlN0ZXAgPSAkc2NvcGUuY3VycmVudFN1YlN0ZXA7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGVwW2N1cnJlbnRTdGVwXVtjdXJyZW50U3ViU3RlcF0uZWRpdEJ5ID0gdXNlcm5hbWU7XHJcblx0XHRcdFx0JHNjb3BlLnRyYXZlbGVyRGF0YS5zdGVwW2N1cnJlbnRTdGVwXVtjdXJyZW50U3ViU3RlcF0uZWRpdFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFsZXJ0KCdlbnRlciB5b3VyIG5hbWUnKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgbG9hZEZvcm1MaXN0ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Rm9ybS5nZXRGb3JtTGlzdCgpXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHQkc2NvcGUuZm9ybUxpc3QgPSBkYXRhO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cclxuXHRcdHZhciByZXNldCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS50cmF2ZWxlckRhdGEgPSB7fTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRTdWJTdGVwID0gMTtcclxuXHRcdFx0JHNjb3BlLnJlYWR5U3VibWl0ID0gZmFsc2U7XHJcblx0XHRcdCRzY29wZS5mb3JtSWQgPSAnJztcclxuXHRcdFx0JHNjb3BlLmlzTmV3ID0gdHJ1ZTtcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHN0YXJ0V2F0Y2ggPSBmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUuJHdhdGNoKFxyXG5cdFx0XHRcdCd0cmF2ZWxlckRhdGEuc3RlcCcsXHJcblx0XHRcdFx0ZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKXtcclxuXHRcdFx0XHRcdGlmKCEkc2NvcGUuaXNOZXcpe1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuaXNOZXcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRzY29wZS5jdXJyZW50U3RlcCArICc7Jyskc2NvcGUuY3VycmVudFN1YlN0ZXArJ2NoYW5nZWQnKTtcclxuXHRcdFx0XHRcdFx0YXBwZW5kU3ViU3RlcEVkaXRJbmZvKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgdHJ1ZVxyXG5cdFx0XHQpO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgbWFpbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHJlc2V0KCk7XHJcblx0XHRcdGxvYWRGb3JtTGlzdCgpO1xyXG5cclxuXHRcdFx0aWYoJHN0YXRlUGFyYW1zLmZvcm1JZCl7XHJcblx0XHRcdFx0JHNjb3BlLmZvcm1JZCA9ICRzdGF0ZVBhcmFtcy5mb3JtSWQ7XHJcblx0XHRcdFx0JHNjb3BlLnVwZGF0ZUZvcm0oKTtcclxuXHRcdFx0XHQkc2NvcGUuaXNOZXcgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdGlmKCRzdGF0ZVBhcmFtcy5faWQpe1xyXG5cdFx0XHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xyXG5cdFx0XHRcdFRyYXZlbGVyLmdldCgkc3RhdGVQYXJhbXMuX2lkKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRcdC8vIGRhdGEgaXMgYSBhcnJheS4gcmVzdWx0IGNvdWxkIGJlIG1vcmUgdGhhbiBvbmVcclxuXHRcdFx0XHRcdFx0Ly8gbmVlZCB0byBkZWFsIHdpdCB0aGlzLlxyXG5cdFx0XHRcdFx0XHQkc2NvcGUudHJhdmVsZXJEYXRhID0gZGF0YTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHN0YXJ0V2F0Y2goKTtcclxuXHRcdH07XHJcblxyXG5cdFx0bWFpbigpO1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0Zvcm1TZXJ2aWNlJywgW10pXHJcblxyXG5cdC5mYWN0b3J5KCdGb3JtJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cclxuXHRcdFx0Y3JlYXRlOiBmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9mb3JtcycsIGRhdGEpO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Z2V0Rm9ybUxpc3Q6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9mb3Jtcy8nKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGdldDogZnVuY3Rpb24oZm9ybUlkKXtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Zvcm1zLycrZm9ybUlkKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdUcmF2ZWxlclNlcnZpY2UnLCBbXSlcclxuICAgICAgIFxyXG4gICAgLmZhY3RvcnkoJ1RyYXZlbGVyJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHJcbiAgICAgICAgdmFyIHJldmlld0RhdGEgPSB7fTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuXHRcclxuICAgICAgICAgICAgLy8gdGhlc2Ugd2lsbCB3b3JrIHdoZW4gbW9yZSBBUEkgcm91dGVzIGFyZSBkZWZpbmVkIG9uIHRoZSBOb2RlIHNpZGUgb2YgdGhpbmdzXHJcbiAgICAgICAgICAgIC8vIGNhbGwgdG8gUE9TVCBhbmQgY3JlYXRlIGEgbmV3IGZvcm1cclxuICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbihmb3JtRGF0YSl7XHJcbiAgICAgICAgICAgIFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdHJhdmVsZXInLCBmb3JtRGF0YSk7XHJcbiAgICAgICAgICAgIH0sIFxyXG5cclxuICAgICAgICAgICAgZ2V0UmV2aWV3RGF0YTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXZpZXdEYXRhO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihfaWQpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90cmF2ZWxlcj9faWQ9JysgX2lkKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS90cmF2ZWxlcicsIGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgc2V0UmV2aWV3RGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICByZXZpZXdEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNlYXJjaExpa2U6IGZ1bmN0aW9uKHNuKXtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RyYXZlbGVyL3NlYXJjaExpa2UvJysgc24pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBjYWxsIHRvIERFTEVURSBhIGZvcm1cclxuICAgICAgICAgICAgcmVtb3ZlVHJhdmVsZXI6IGZ1bmN0aW9uKF9pZCwgaW5wdXQpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2lkKTtcclxuICAgICAgICAgICAgXHRyZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3RyYXZlbGVyLycrIF9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHR9O1x0XHRcclxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
